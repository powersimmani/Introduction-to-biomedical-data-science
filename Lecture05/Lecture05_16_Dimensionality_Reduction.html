<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dimensionality Reduction - Comprehensive Guide</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
        }
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #1E64C8 0%, #1976D2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        .title {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 18px;
            opacity: 0.9;
        }
        .overview-section {
            padding: 40px;
            background: white;
        }
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .content-card {
            background: white;
            border: 2.5px solid #1E64C8;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
        }
        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(30, 100, 200, 0.3);
            background: #f8fbff;
        }
        .card-title {
            font-size: 20px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 10px;
        }
        .card-desc {
            font-size: 15px;
            color: #555;
            line-height: 1.5;
        }
        .detailed-section {
            padding: 20px 40px;
            background: #f9f9f9;
        }
        .technique-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        .technique-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #1E64C8;
        }
        .technique-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }
        .technique-title {
            font-size: 28px;
            color: #1E64C8;
            font-weight: 700;
        }
        .technique-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 20px;
        }
        .description-box {
            background: #f0f5fc;
            border-left: 4px solid #1E64C8;
            border-radius: 8px;
            padding: 20px;
        }
        .description-title {
            font-size: 18px;
            font-weight: 600;
            color: #1E64C8;
            margin-bottom: 10px;
        }
        .description-text {
            font-size: 14px;
            color: #333;
            line-height: 1.6;
        }
        .visual-box {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 300px;
        }
        .parameters-box {
            background: #fff3e0;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        .param-title {
            font-size: 16px;
            font-weight: 600;
            color: #f57c00;
            margin-bottom: 8px;
        }
        .param-list {
            list-style: none;
            padding-left: 0;
        }
        .param-item {
            font-size: 14px;
            color: #555;
            margin-bottom: 5px;
            padding-left: 20px;
            position: relative;
        }
        .param-item:before {
            content: "▸";
            position: absolute;
            left: 0;
            color: #f57c00;
        }
        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .pros, .cons {
            padding: 15px;
            border-radius: 8px;
        }
        .pros {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
        }
        .cons {
            background: #ffebee;
            border-left: 4px solid #f44336;
        }
        .pros-title, .cons-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .pros-title {
            color: #2e7d32;
        }
        .cons-title {
            color: #c62828;
        }
        .list-item {
            font-size: 14px;
            color: #555;
            margin-bottom: 4px;
            padding-left: 15px;
            position: relative;
        }
        .pros .list-item:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #4caf50;
        }
        .cons .list-item:before {
            content: "✗";
            position: absolute;
            left: 0;
            color: #f44336;
        }
        .code-box {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        .code-comment {
            color: #6a9955;
        }
        .code-keyword {
            color: #569cd6;
        }
        .code-string {
            color: #ce9178;
        }
        .workflow-section {
            background: white;
            padding: 40px;
            margin-top: 30px;
        }
        .workflow-title {
            font-size: 28px;
            color: #1E64C8;
            text-align: center;
            margin-bottom: 30px;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
        }
        .comparison-table th {
            background: #1E64C8;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        .comparison-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        .comparison-table tr:nth-child(even) {
            background: #f5f5f5;
        }
        .comparison-table tr:hover {
            background: #e8f4f8;
        }
        @media (max-width: 768px) {
            .technique-content {
                grid-template-columns: 1fr;
            }
            .pros-cons {
                grid-template-columns: 1fr;
            }
            .content-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Header -->
        <div class="header">
            <div class="title">Dimensionality Reduction Techniques</div>
            <div class="subtitle">A Comprehensive Guide for Single-Cell RNA-seq Analysis</div>
        </div>

        <!-- Overview Section -->
        <div class="overview-section">
            <div class="content-grid">
                <div class="content-card">
                    <div class="card-title">PCA for scRNA-seq</div>
                    <div class="card-desc">Linear dimensionality reduction technique that identifies directions of maximum variance in high-dimensional data</div>
                </div>
                <div class="content-card">
                    <div class="card-title">t-SNE Principles</div>
                    <div class="card-desc">Non-linear technique that preserves local structure through probability distributions</div>
                </div>
                <div class="content-card">
                    <div class="card-title">UMAP Advantages</div>
                    <div class="card-desc">Fast manifold learning technique preserving both local and global data structure</div>
                </div>
                <div class="content-card">
                    <div class="card-title">Diffusion Maps</div>
                    <div class="card-desc">Captures continuous trajectories and developmental processes in biological data</div>
                </div>
                <div class="content-card">
                    <div class="card-title">Parameter Selection</div>
                    <div class="card-desc">Critical parameters like perplexity and n_neighbors significantly affect visualization results</div>
                </div>
            </div>

            <!-- Original Workflow Diagram -->
            <div style="display: flex; justify-content: center; margin-top: 30px;">
                <svg width="900" height="120" viewBox="0 0 900 120" xmlns="http://www.w3.org/2000/svg">
                    <!-- High dimensional data -->
                    <g id="high-dim">
                        <rect x="10" y="20" width="100" height="80" rx="6" fill="#E0E0E0" stroke="#666" stroke-width="2"/>
                        <text x="60" y="40" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#333" text-anchor="middle">High-D Data</text>
                        <text x="60" y="60" font-family="Arial, sans-serif" font-size="20" font-weight="700" fill="#1E64C8" text-anchor="middle">20k</text>
                        <text x="60" y="75" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">genes</text>
                        
                        <!-- Scatter dots representing high dimension -->
                        <circle cx="25" cy="85" r="2" fill="#1E64C8" opacity="0.5"/>
                        <circle cx="35" cy="88" r="2" fill="#1E64C8" opacity="0.5"/>
                        <circle cx="45" cy="82" r="2" fill="#1E64C8" opacity="0.5"/>
                        <circle cx="55" cy="90" r="2" fill="#1E64C8" opacity="0.5"/>
                        <circle cx="65" cy="84" r="2" fill="#1E64C8" opacity="0.5"/>
                        <circle cx="75" cy="89" r="2" fill="#1E64C8" opacity="0.5"/>
                        <circle cx="85" cy="86" r="2" fill="#1E64C8" opacity="0.5"/>
                        <circle cx="95" cy="83" r="2" fill="#1E64C8" opacity="0.5"/>
                    </g>
                    
                    <!-- Arrow to PCA -->
                    <path d="M 115 60 L 155 60" stroke="#1E64C8" stroke-width="3" fill="none"/>
                    <polygon points="155,60 148,56 148,64" fill="#1E64C8"/>
                    
                    <!-- PCA -->
                    <g id="pca">
                        <rect x="160" y="20" width="140" height="80" rx="6" fill="#BBDEFB" stroke="#1976D2" stroke-width="2"/>
                        <text x="230" y="40" font-family="Arial, sans-serif" font-size="12" font-weight="700" fill="#1E64C8" text-anchor="middle">PCA</text>
                        <text x="230" y="60" font-family="Arial, sans-serif" font-size="18" font-weight="700" fill="#1976D2" text-anchor="middle">50 PCs</text>
                        <text x="230" y="75" font-family="Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Linear projection</text>
                        
                        <!-- PC axes representation -->
                        <line x1="175" y1="90" x2="285" y2="90" stroke="#1976D2" stroke-width="1.5"/>
                        <line x1="175" y1="90" x2="175" y2="82" stroke="#1976D2" stroke-width="1.5"/>
                        <text x="175" y="98" font-family="Arial, sans-serif" font-size="8" fill="#666" text-anchor="middle">PC1</text>
                        
                        <line x1="200" y1="90" x2="200" y2="84" stroke="#1976D2" stroke-width="1.5" opacity="0.7"/>
                        <text x="200" y="98" font-family="Arial, sans-serif" font-size="8" fill="#666" text-anchor="middle">PC2</text>
                        
                        <line x1="225" y1="90" x2="225" y2="86" stroke="#1976D2" stroke-width="1.5" opacity="0.5"/>
                        <text x="225" y="98" font-family="Arial, sans-serif" font-size="8" fill="#666" text-anchor="middle">PC3</text>
                        
                        <text x="270" y="98" font-family="Arial, sans-serif" font-size="8" fill="#666" text-anchor="middle">...</text>
                    </g>
                    
                    <!-- Arrow to t-SNE -->
                    <path d="M 305 50 L 345 50" stroke="#1E64C8" stroke-width="2.5" fill="none"/>
                    <polygon points="345,50 338,46 338,54" fill="#1E64C8"/>
                    
                    <!-- t-SNE -->
                    <g id="tsne">
                        <rect x="350" y="20" width="140" height="35" rx="6" fill="#FFE0B2" stroke="#F57C00" stroke-width="2"/>
                        <text x="420" y="35" font-family="Arial, sans-serif" font-size="12" font-weight="700" fill="#E65100" text-anchor="middle">t-SNE</text>
                        <text x="420" y="48" font-family="Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Local structure</text>
                        
                        <!-- 2D clusters -->
                        <g transform="translate(360, 58)">
                            <circle cx="25" cy="15" r="3" fill="#4CAF50"/>
                            <circle cx="30" cy="20" r="3" fill="#4CAF50"/>
                            <circle cx="20" cy="22" r="3" fill="#4CAF50"/>
                            
                            <circle cx="60" cy="10" r="3" fill="#2196F3"/>
                            <circle cx="65" cy="15" r="3" fill="#2196F3"/>
                            <circle cx="70" cy="12" r="3" fill="#2196F3"/>
                            
                            <circle cx="100" cy="20" r="3" fill="#FF9800"/>
                            <circle cx="105" cy="25" r="3" fill="#FF9800"/>
                            <circle cx="110" cy="18" r="3" fill="#FF9800"/>
                        </g>
                    </g>
                    
                    <!-- Arrow to UMAP (parallel path) -->
                    <path d="M 305 70 L 345 70" stroke="#1E64C8" stroke-width="2.5" fill="none"/>
                    <polygon points="345,70 338,66 338,74" fill="#1E64C8"/>
                    
                    <!-- UMAP -->
                    <g id="umap">
                        <rect x="350" y="60" width="140" height="35" rx="6" fill="#C5E1A5" stroke="#7CB342" stroke-width="2"/>
                        <text x="420" y="75" font-family="Arial, sans-serif" font-size="12" font-weight="700" fill="#558B2F" text-anchor="middle">UMAP</text>
                        <text x="420" y="88" font-family="Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Global + local</text>
                    </g>
                    
                    <!-- Merge arrows -->
                    <path d="M 495 38 L 520 55" stroke="#1E64C8" stroke-width="2" fill="none"/>
                    <path d="M 495 78 L 520 65" stroke="#1E64C8" stroke-width="2" fill="none"/>
                    <polygon points="520,60 513,57 515,64" fill="#1E64C8"/>
                    
                    <!-- Final visualization -->
                    <g id="viz">
                        <rect x="525" y="30" width="140" height="70" rx="6" fill="#E1BEE7" stroke="#8E24AA" stroke-width="2"/>
                        <text x="595" y="50" font-family="Arial, sans-serif" font-size="13" font-weight="700" fill="#6A1B9A" text-anchor="middle">2D/3D Plot</text>
                        
                        <!-- Coordinate system -->
                        <line x1="545" y1="85" x2="645" y2="85" stroke="#8E24AA" stroke-width="1.5"/>
                        <line x1="545" y1="85" x2="545" y2="60" stroke="#8E24AA" stroke-width="1.5"/>
                        
                        <!-- Clustered points -->
                        <circle cx="560" cy="70" r="4" fill="#4CAF50"/>
                        <circle cx="565" cy="75" r="4" fill="#4CAF50"/>
                        <circle cx="570" cy="68" r="4" fill="#4CAF50"/>
                        
                        <circle cx="600" cy="65" r="4" fill="#2196F3"/>
                        <circle cx="605" cy="70" r="4" fill="#2196F3"/>
                        <circle cx="610" cy="63" r="4" fill="#2196F3"/>
                        
                        <circle cx="620" cy="75" r="4" fill="#FF9800"/>
                        <circle cx="625" cy="80" r="4" fill="#FF9800"/>
                        <circle cx="630" cy="73" r="4" fill="#FF9800"/>
                    </g>
                    
                    <!-- Comparison box -->
                    <g id="comparison">
                        <rect x="675" y="30" width="175" height="70" rx="6" fill="#f5f5f5" stroke="#1E64C8" stroke-width="2"/>
                        <text x="762" y="45" font-family="Arial, sans-serif" font-size="11" font-weight="700" fill="#1E64C8" text-anchor="middle">Key Differences</text>
                        
                        <text x="685" y="60" font-family="Arial, sans-serif" font-size="9" font-weight="600" fill="#E65100">t-SNE:</text>
                        <text x="730" y="60" font-family="Arial, sans-serif" font-size="9" fill="#666">Stochastic</text>
                        
                        <text x="685" y="72" font-family="Arial, sans-serif" font-size="9" font-weight="600" fill="#558B2F">UMAP:</text>
                        <text x="730" y="72" font-family="Arial, sans-serif" font-size="9" fill="#666">Deterministic</text>
                        
                        <text x="685" y="84" font-family="Arial, sans-serif" font-size="9" font-weight="600" fill="#1976D2">PCA:</text>
                        <text x="730" y="84" font-family="Arial, sans-serif" font-size="9" fill="#666">Linear, fast</text>
                        
                        <text x="685" y="95" font-family="Arial, sans-serif" font-size="9" font-weight="600" fill="#6A1B9A">Use:</text>
                        <text x="720" y="95" font-family="Arial, sans-serif" font-size="9" fill="#666">PCA→UMAP/t-SNE</text>
                    </g>
                </svg>
            </div>
        </div>

        <!-- Detailed Sections -->
        <div class="detailed-section">
            
            <!-- 1. PCA Section -->
            <div class="technique-container">
                <div class="technique-header">
                    <div class="technique-icon">PCA</div>
                    <div class="technique-title">Principal Component Analysis (PCA)</div>
                </div>
                
                <div class="technique-content">
                    <div>
                        <div class="description-box">
                            <div class="description-title">Overview</div>
                            <div class="description-text">
                                PCA is a linear dimensionality reduction technique that identifies orthogonal axes (principal components) along which the data shows maximum variance. In scRNA-seq analysis, PCA is typically the first step after normalization and feature selection, reducing thousands of genes to 10-50 principal components while preserving most biological variation.
                            </div>
                        </div>
                        
                        <div class="description-box" style="margin-top: 15px;">
                            <div class="description-title">Mathematical Foundation</div>
                            <div class="description-text">
                                PCA performs eigendecomposition of the covariance matrix or singular value decomposition (SVD) of the data matrix. Each PC is a linear combination of original features, with coefficients (loadings) indicating each gene's contribution to that component.
                            </div>
                        </div>

                        <div class="parameters-box">
                            <div class="param-title">Key Parameters</div>
                            <ul class="param-list">
                                <li class="param-item">n_components: Number of PCs to compute (typically 10-50)</li>
                                <li class="param-item">svd_solver: Algorithm choice ('auto', 'full', 'arpack', 'randomized')</li>
                                <li class="param-item">whiten: Whether to normalize PC scores</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="visual-box">
                        <svg width="400" height="300" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                            <!-- PCA Visualization -->
                            <text x="200" y="20" font-size="14" font-weight="600" text-anchor="middle" fill="#1E64C8">PCA Transformation</text>
                            
                            <!-- Original data cloud -->
                            <g transform="translate(100, 150)">
                                <ellipse cx="0" cy="0" rx="60" ry="40" fill="#E3F2FD" stroke="#1976D2" stroke-width="2" transform="rotate(30)"/>
                                <text x="0" y="-60" font-size="12" text-anchor="middle" fill="#666">Original Data</text>
                                
                                <!-- Data points -->
                                <circle cx="-20" cy="-10" r="3" fill="#1976D2"/>
                                <circle cx="10" cy="5" r="3" fill="#1976D2"/>
                                <circle cx="-5" cy="10" r="3" fill="#1976D2"/>
                                <circle cx="15" cy="-5" r="3" fill="#1976D2"/>
                                <circle cx="-15" cy="0" r="3" fill="#1976D2"/>
                                <circle cx="5" cy="-8" r="3" fill="#1976D2"/>
                                <circle cx="20" cy="8" r="3" fill="#1976D2"/>
                                <circle cx="-10" cy="12" r="3" fill="#1976D2"/>
                                
                                <!-- PC1 arrow -->
                                <arrow x1="0" y1="0" x2="50" y2="30" stroke="#FF5252" stroke-width="2.5"/>
                                <text x="55" y="35" font-size="11" fill="#FF5252">PC1</text>
                                
                                <!-- PC2 arrow -->
                                <arrow x1="0" y1="0" x2="-30" y2="50" stroke="#4CAF50" stroke-width="2.5"/>
                                <text x="-35" y="60" font-size="11" fill="#4CAF50">PC2</text>
                            </g>
                            
                            <!-- Arrow -->
                            <path d="M 180 150 L 220 150" stroke="#666" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
                            <polygon points="220,150 215,147 215,153" fill="#666"/>
                            
                            <!-- Transformed data -->
                            <g transform="translate(300, 150)">
                                <rect x="-60" y="-40" width="120" height="80" fill="none" stroke="#666" stroke-width="1" stroke-dasharray="3,3"/>
                                <text x="0" y="-60" font-size="12" text-anchor="middle" fill="#666">PC Space</text>
                                
                                <!-- Axes -->
                                <line x1="-50" y1="30" x2="50" y2="30" stroke="#FF5252" stroke-width="2"/>
                                <text x="55" y="35" font-size="11" fill="#FF5252">PC1</text>
                                
                                <line x1="-50" y1="30" x2="-50" y2="-30" stroke="#4CAF50" stroke-width="2"/>
                                <text x="-55" y="-35" font-size="11" fill="#4CAF50">PC2</text>
                                
                                <!-- Transformed points -->
                                <circle cx="-30" cy="10" r="3" fill="#1976D2"/>
                                <circle cx="20" cy="15" r="3" fill="#1976D2"/>
                                <circle cx="5" cy="-5" r="3" fill="#1976D2"/>
                                <circle cx="25" cy="5" r="3" fill="#1976D2"/>
                                <circle cx="-20" cy="0" r="3" fill="#1976D2"/>
                                <circle cx="10" cy="-10" r="3" fill="#1976D2"/>
                                <circle cx="30" cy="20" r="3" fill="#1976D2"/>
                                <circle cx="-10" cy="25" r="3" fill="#1976D2"/>
                            </g>
                            
                            <!-- Variance explanation -->
                            <g transform="translate(200, 250)">
                                <rect x="-80" y="0" width="160" height="30" fill="#FFF3E0" stroke="#FF6F00" stroke-width="1" rx="5"/>
                                <text x="0" y="20" font-size="11" text-anchor="middle" fill="#E65100">
                                    PC1: 35% variance | PC2: 20% variance
                                </text>
                            </g>
                        </svg>
                    </div>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <div class="pros-title">Advantages</div>
                        <div class="list-item">Computationally efficient for large datasets</div>
                        <div class="list-item">Mathematically well-understood</div>
                        <div class="list-item">Preserves global structure</div>
                        <div class="list-item">Deterministic results</div>
                    </div>
                    <div class="cons">
                        <div class="cons-title">Limitations</div>
                        <div class="list-item">Assumes linear relationships</div>
                        <div class="list-item">May miss non-linear patterns</div>
                        <div class="list-item">Sensitive to outliers</div>
                        <div class="list-item">Not ideal for visualization</div>
                    </div>
                </div>

                <div class="code-box">
                    <span class="code-comment"># Python example using Scanpy</span><br>
                    <span class="code-keyword">import</span> scanpy <span class="code-keyword">as</span> sc<br>
                    <br>
                    <span class="code-comment"># Perform PCA on normalized data</span><br>
                    sc.pp.pca(adata, n_comps=<span class="code-string">50</span>, svd_solver=<span class="code-string">'arpack'</span>)<br>
                    <br>
                    <span class="code-comment"># Visualize variance ratio</span><br>
                    sc.pl.pca_variance_ratio(adata, n_pcs=<span class="code-string">50</span>)<br>
                    <br>
                    <span class="code-comment"># Plot PCA results</span><br>
                    sc.pl.pca(adata, color=<span class="code-string">'cell_type'</span>, components=[<span class="code-string">'1,2'</span>, <span class="code-string">'2,3'</span>])
                </div>
            </div>

            <!-- 2. t-SNE Section -->
            <div class="technique-container">
                <div class="technique-header">
                    <div class="technique-icon">tSNE</div>
                    <div class="technique-title">t-Distributed Stochastic Neighbor Embedding (t-SNE)</div>
                </div>
                
                <div class="technique-content">
                    <div>
                        <div class="description-box">
                            <div class="description-title">Overview</div>
                            <div class="description-text">
                                t-SNE is a non-linear dimensionality reduction technique that models pairwise similarities between data points in high-dimensional space and iteratively adjusts their representation in low-dimensional space to preserve these similarities. It excels at revealing local structure and finding clusters in complex datasets.
                            </div>
                        </div>
                        
                        <div class="description-box" style="margin-top: 15px;">
                            <div class="description-title">Algorithm Process</div>
                            <div class="description-text">
                                t-SNE converts high-dimensional Euclidean distances into conditional probabilities representing similarities. It uses a Student t-distribution in the low-dimensional space to allow dissimilar objects to be modeled far apart, addressing the "crowding problem" of traditional SNE.
                            </div>
                        </div>

                        <div class="parameters-box">
                            <div class="param-title">Critical Parameters</div>
                            <ul class="param-list">
                                <li class="param-item">perplexity: Balance between local and global aspects (5-50)</li>
                                <li class="param-item">learning_rate: Step size for gradient descent (10-1000)</li>
                                <li class="param-item">n_iter: Number of iterations (250-1000)</li>
                                <li class="param-item">early_exaggeration: Factor for spacing clusters (4-12)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="visual-box">
                        <svg width="400" height="300" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                            <!-- t-SNE Visualization -->
                            <text x="200" y="20" font-size="14" font-weight="600" text-anchor="middle" fill="#F57C00">t-SNE Process</text>
                            
                            <!-- High dimensional representation -->
                            <g transform="translate(100, 100)">
                                <rect x="-50" y="-40" width="100" height="80" fill="#FFE0B2" stroke="#F57C00" stroke-width="2" rx="5"/>
                                <text x="0" y="-50" font-size="11" text-anchor="middle" fill="#666">High-D Space</text>
                                
                                <!-- Points with connections showing similarity -->
                                <circle cx="-20" cy="-10" r="4" fill="#FF5722"/>
                                <circle cx="-15" cy="10" r="4" fill="#FF5722"/>
                                <circle cx="20" cy="-5" r="4" fill="#2196F3"/>
                                <circle cx="25" cy="15" r="4" fill="#2196F3"/>
                                
                                <!-- Similarity connections -->
                                <line x1="-20" y1="-10" x2="-15" y2="10" stroke="#FF5722" stroke-width="1" opacity="0.5"/>
                                <line x1="20" y1="-5" x2="25" y2="15" stroke="#2196F3" stroke-width="1" opacity="0.5"/>
                            </g>
                            
                            <!-- Probability calculation -->
                            <g transform="translate(200, 100)">
                                <text x="0" y="-30" font-size="10" text-anchor="middle" fill="#666">P(j|i) calculation</text>
                                <text x="0" y="0" font-size="20" text-anchor="middle" fill="#F57C00">→</text>
                                <text x="0" y="30" font-size="10" text-anchor="middle" fill="#666">Q(j|i) optimization</text>
                            </g>
                            
                            <!-- Low dimensional result -->
                            <g transform="translate(300, 100)">
                                <rect x="-50" y="-40" width="100" height="80" fill="#FFE0B2" stroke="#F57C00" stroke-width="2" rx="5"/>
                                <text x="0" y="-50" font-size="11" text-anchor="middle" fill="#666">2D Space</text>
                                
                                <!-- Clustered points -->
                                <circle cx="-25" cy="-15" r="4" fill="#FF5722"/>
                                <circle cx="-20" cy="-8" r="4" fill="#FF5722"/>
                                <circle cx="-28" cy="-10" r="4" fill="#FF5722"/>
                                
                                <circle cx="20" cy="10" r="4" fill="#2196F3"/>
                                <circle cx="25" cy="15" r="4" fill="#2196F3"/>
                                <circle cx="18" cy="18" r="4" fill="#2196F3"/>
                            </g>
                            
                            <!-- Perplexity effect -->
                            <g transform="translate(200, 200)">
                                <text x="0" y="0" font-size="12" text-anchor="middle" fill="#666">Perplexity Effect</text>
                                
                                <!-- Low perplexity -->
                                <g transform="translate(-80, 20)">
                                    <rect x="-30" y="-15" width="60" height="30" fill="#FFF3E0" stroke="#FFB74D" stroke-width="1" rx="3"/>
                                    <text x="0" y="-20" font-size="9" text-anchor="middle" fill="#666">Perp=5</text>
                                    <circle cx="-10" cy="0" r="2" fill="#FF5722"/>
                                    <circle cx="-5" cy="3" r="2" fill="#FF5722"/>
                                    <circle cx="10" cy="-5" r="2" fill="#2196F3"/>
                                    <circle cx="5" cy="5" r="2" fill="#4CAF50"/>
                                </g>
                                
                                <!-- Medium perplexity -->
                                <g transform="translate(0, 20)">
                                    <rect x="-30" y="-15" width="60" height="30" fill="#FFF3E0" stroke="#FFB74D" stroke-width="1" rx="3"/>
                                    <text x="0" y="-20" font-size="9" text-anchor="middle" fill="#666">Perp=30</text>
                                    <circle cx="-12" cy="-2" r="2" fill="#FF5722"/>
                                    <circle cx="-8" cy="2" r="2" fill="#FF5722"/>
                                    <circle cx="8" cy="-3" r="2" fill="#2196F3"/>
                                    <circle cx="12" cy="3" r="2" fill="#2196F3"/>
                                </g>
                                
                                <!-- High perplexity -->
                                <g transform="translate(80, 20)">
                                    <rect x="-30" y="-15" width="60" height="30" fill="#FFF3E0" stroke="#FFB74D" stroke-width="1" rx="3"/>
                                    <text x="0" y="-20" font-size="9" text-anchor="middle" fill="#666">Perp=50</text>
                                    <circle cx="-15" cy="0" r="2" fill="#FF5722"/>
                                    <circle cx="-10" cy="0" r="2" fill="#FF5722"/>
                                    <circle cx="10" cy="0" r="2" fill="#2196F3"/>
                                    <circle cx="15" cy="0" r="2" fill="#2196F3"/>
                                </g>
                            </g>
                        </svg>
                    </div>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <div class="pros-title">Advantages</div>
                        <div class="list-item">Excellent for visualizing clusters</div>
                        <div class="list-item">Preserves local structure well</div>
                        <div class="list-item">Reveals complex patterns</div>
                        <div class="list-item">Good for exploratory analysis</div>
                    </div>
                    <div class="cons">
                        <div class="cons-title">Limitations</div>
                        <div class="list-item">Computationally expensive</div>
                        <div class="list-item">Non-deterministic (stochastic)</div>
                        <div class="list-item">Distorts global structure</div>
                        <div class="list-item">Cannot embed new data</div>
                    </div>
                </div>

                <div class="code-box">
                    <span class="code-comment"># Python example using Scanpy</span><br>
                    <span class="code-keyword">import</span> scanpy <span class="code-keyword">as</span> sc<br>
                    <br>
                    <span class="code-comment"># Run t-SNE on PCA results</span><br>
                    sc.tl.tsne(adata, <br>
                    &nbsp;&nbsp;&nbsp;&nbsp;perplexity=<span class="code-string">30</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;learning_rate=<span class="code-string">200</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;n_iter=<span class="code-string">1000</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;random_state=<span class="code-string">42</span>)<br>
                    <br>
                    <span class="code-comment"># Visualize results</span><br>
                    sc.pl.tsne(adata, color=[<span class="code-string">'cell_type'</span>, <span class="code-string">'n_genes'</span>])
                </div>
            </div>

            <!-- 3. UMAP Section -->
            <div class="technique-container">
                <div class="technique-header">
                    <div class="technique-icon">UMAP</div>
                    <div class="technique-title">Uniform Manifold Approximation and Projection (UMAP)</div>
                </div>
                
                <div class="technique-content">
                    <div>
                        <div class="description-box">
                            <div class="description-title">Overview</div>
                            <div class="description-text">
                                UMAP is a manifold learning technique based on Riemannian geometry and algebraic topology. It constructs a high-dimensional graph representation of the data and optimizes a low-dimensional graph to be as structurally similar as possible, preserving both local and global structure better than t-SNE.
                            </div>
                        </div>
                        
                        <div class="description-box" style="margin-top: 15px;">
                            <div class="description-title">Theoretical Foundation</div>
                            <div class="description-text">
                                UMAP assumes data is uniformly distributed on a Riemannian manifold and models the manifold with a fuzzy topological structure. The algorithm uses a novel fuzzy simplicial set representation and optimizes the cross-entropy between high and low-dimensional representations.
                            </div>
                        </div>

                        <div class="parameters-box">
                            <div class="param-title">Important Parameters</div>
                            <ul class="param-list">
                                <li class="param-item">n_neighbors: Size of local neighborhood (5-50)</li>
                                <li class="param-item">min_dist: Minimum distance between points (0.0-1.0)</li>
                                <li class="param-item">metric: Distance metric ('euclidean', 'manhattan', etc.)</li>
                                <li class="param-item">n_components: Output dimensions (typically 2 or 3)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="visual-box">
                        <svg width="400" height="300" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                            <!-- UMAP Visualization -->
                            <text x="200" y="20" font-size="14" font-weight="600" text-anchor="middle" fill="#7CB342">UMAP Architecture</text>
                            
                            <!-- Graph construction phase -->
                            <g transform="translate(100, 80)">
                                <text x="0" y="-10" font-size="11" text-anchor="middle" fill="#666">k-NN Graph</text>
                                <circle cx="0" cy="20" r="5" fill="#7CB342"/>
                                <circle cx="-30" cy="10" r="5" fill="#8BC34A"/>
                                <circle cx="30" cy="10" r="5" fill="#8BC34A"/>
                                <circle cx="-20" cy="40" r="5" fill="#8BC34A"/>
                                <circle cx="20" cy="40" r="5" fill="#8BC34A"/>
                                
                                <!-- Connections -->
                                <line x1="0" y1="20" x2="-30" y2="10" stroke="#7CB342" stroke-width="1.5" opacity="0.6"/>
                                <line x1="0" y1="20" x2="30" y2="10" stroke="#7CB342" stroke-width="1.5" opacity="0.6"/>
                                <line x1="0" y1="20" x2="-20" y2="40" stroke="#7CB342" stroke-width="1.5" opacity="0.6"/>
                                <line x1="0" y1="20" x2="20" y2="40" stroke="#7CB342" stroke-width="1.5" opacity="0.6"/>
                            </g>
                            
                            <!-- Fuzzy simplicial set -->
                            <g transform="translate(200, 80)">
                                <text x="0" y="-10" font-size="11" text-anchor="middle" fill="#666">Fuzzy Set</text>
                                <ellipse cx="0" cy="25" rx="40" ry="30" fill="#C5E1A5" fill-opacity="0.3" stroke="#7CB342" stroke-width="2"/>
                                <text x="0" y="25" font-size="20" text-anchor="middle" fill="#558B2F">⇒</text>
                            </g>
                            
                            <!-- Low-D optimization -->
                            <g transform="translate(300, 80)">
                                <text x="0" y="-10" font-size="11" text-anchor="middle" fill="#666">2D Layout</text>
                                <circle cx="-15" cy="15" r="5" fill="#7CB342"/>
                                <circle cx="-20" cy="30" r="5" fill="#8BC34A"/>
                                <circle cx="15" cy="20" r="5" fill="#8BC34A"/>
                                <circle cx="10" cy="35" r="5" fill="#8BC34A"/>
                                <circle cx="0" cy="25" r="5" fill="#7CB342"/>
                            </g>
                            
                            <!-- Parameter effects visualization -->
                            <g transform="translate(200, 180)">
                                <text x="0" y="0" font-size="12" text-anchor="middle" fill="#666">n_neighbors Effect</text>
                                
                                <!-- Small n_neighbors -->
                                <g transform="translate(-100, 20)">
                                    <rect x="-35" y="-15" width="70" height="40" fill="#E8F5E9" stroke="#4CAF50" stroke-width="1" rx="3"/>
                                    <text x="0" y="-20" font-size="9" text-anchor="middle" fill="#666">n=5</text>
                                    <circle cx="-15" cy="0" r="3" fill="#4CAF50"/>
                                    <circle cx="-10" cy="5" r="3" fill="#4CAF50"/>
                                    <circle cx="10" cy="-5" r="3" fill="#66BB6A"/>
                                    <circle cx="15" cy="0" r="3" fill="#66BB6A"/>
                                    <circle cx="0" cy="10" r="3" fill="#81C784"/>
                                    <text x="0" y="35" font-size="8" text-anchor="middle" fill="#666">Local detail</text>
                                </g>
                                
                                <!-- Large n_neighbors -->
                                <g transform="translate(100, 20)">
                                    <rect x="-35" y="-15" width="70" height="40" fill="#E8F5E9" stroke="#4CAF50" stroke-width="1" rx="3"/>
                                    <text x="0" y="-20" font-size="9" text-anchor="middle" fill="#666">n=50</text>
                                    <circle cx="-12" cy="2" r="3" fill="#4CAF50"/>
                                    <circle cx="-8" cy="0" r="3" fill="#4CAF50"/>
                                    <circle cx="8" cy="0" r="3" fill="#66BB6A"/>
                                    <circle cx="12" cy="2" r="3" fill="#66BB6A"/>
                                    <circle cx="0" cy="-2" r="3" fill="#81C784"/>
                                    <text x="0" y="35" font-size="8" text-anchor="middle" fill="#666">Global structure</text>
                                </g>
                            </g>
                        </svg>
                    </div>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <div class="pros-title">Advantages</div>
                        <div class="list-item">Faster than t-SNE</div>
                        <div class="list-item">Preserves global structure better</div>
                        <div class="list-item">More deterministic results</div>
                        <div class="list-item">Can handle larger datasets</div>
                        <div class="list-item">Supports various distance metrics</div>
                    </div>
                    <div class="cons">
                        <div class="cons-title">Limitations</div>
                        <div class="list-item">Newer, less established method</div>
                        <div class="list-item">Can create artificial connections</div>
                        <div class="list-item">Sensitive to hyperparameters</div>
                        <div class="list-item">Interpretation can be challenging</div>
                    </div>
                </div>

                <div class="code-box">
                    <span class="code-comment"># Python example using Scanpy</span><br>
                    <span class="code-keyword">import</span> scanpy <span class="code-keyword">as</span> sc<br>
                    <br>
                    <span class="code-comment"># Compute neighborhood graph</span><br>
                    sc.pp.neighbors(adata, n_neighbors=<span class="code-string">15</span>, n_pcs=<span class="code-string">50</span>)<br>
                    <br>
                    <span class="code-comment"># Run UMAP</span><br>
                    sc.tl.umap(adata, <br>
                    &nbsp;&nbsp;&nbsp;&nbsp;min_dist=<span class="code-string">0.3</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;spread=<span class="code-string">1.0</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;n_components=<span class="code-string">2</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;random_state=<span class="code-string">42</span>)<br>
                    <br>
                    <span class="code-comment"># Visualize with different parameters</span><br>
                    sc.pl.umap(adata, color=[<span class="code-string">'leiden'</span>, <span class="code-string">'n_counts'</span>], legend_loc=<span class="code-string">'on data'</span>)
                </div>
            </div>

            <!-- 4. Diffusion Maps Section -->
            <div class="technique-container">
                <div class="technique-header">
                    <div class="technique-icon">DM</div>
                    <div class="technique-title">Diffusion Maps</div>
                </div>
                
                <div class="technique-content">
                    <div>
                        <div class="description-box">
                            <div class="description-title">Overview</div>
                            <div class="description-text">
                                Diffusion Maps is a non-linear dimensionality reduction technique that models data as lying on a manifold and uses a diffusion process to discover its underlying geometry. It's particularly powerful for capturing continuous trajectories and branching processes in biological systems, making it ideal for developmental studies.
                            </div>
                        </div>
                        
                        <div class="description-box" style="margin-top: 15px;">
                            <div class="description-title">Mathematical Principle</div>
                            <div class="description-text">
                                The method constructs a Markov chain on the data, where transition probabilities reflect local geometry. Eigenvectors of the transition matrix provide coordinates that respect the manifold's intrinsic geometry, with diffusion distance capturing connectivity along the manifold rather than Euclidean distance.
                            </div>
                        </div>

                        <div class="parameters-box">
                            <div class="param-title">Key Parameters</div>
                            <ul class="param-list">
                                <li class="param-item">n_components: Number of diffusion components</li>
                                <li class="param-item">knn: Number of nearest neighbors for graph</li>
                                <li class="param-item">decay: Rate of kernel decay (bandwidth)</li>
                                <li class="param-item">t: Diffusion time parameter</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="visual-box">
                        <svg width="400" height="300" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                            <!-- Diffusion Maps Visualization -->
                            <text x="200" y="20" font-size="14" font-weight="600" text-anchor="middle" fill="#9C27B0">Diffusion Process</text>
                            
                            <!-- Trajectory visualization -->
                            <g transform="translate(200, 150)">
                                <!-- Main trajectory path -->
                                <path d="M -150,0 Q -100,-30 -50,-20 T 0,0 T 50,30 T 100,20 T 150,40" 
                                      stroke="#9C27B0" stroke-width="3" fill="none" opacity="0.6"/>
                                
                                <!-- Branch -->
                                <path d="M 50,30 Q 70,60 100,70" 
                                      stroke="#9C27B0" stroke-width="3" fill="none" opacity="0.6"/>
                                
                                <!-- Cell states along trajectory -->
                                <circle cx="-150" cy="0" r="8" fill="#E91E63"/>
                                <text x="-150" y="-15" font-size="10" text-anchor="middle" fill="#666">Stem</text>
                                
                                <circle cx="-100" cy="-30" r="6" fill="#EC407A"/>
                                <circle cx="-50" cy="-20" r="6" fill="#F06292"/>
                                <circle cx="0" cy="0" r="6" fill="#F48FB1"/>
                                
                                <circle cx="50" cy="30" r="8" fill="#BA68C8"/>
                                <text x="50" y="50" font-size="10" text-anchor="middle" fill="#666">Branch</text>
                                
                                <circle cx="100" cy="20" r="6" fill="#7B1FA2"/>
                                <circle cx="150" cy="40" r="8" fill="#4A148C"/>
                                <text x="150" y="60" font-size="10" text-anchor="middle" fill="#666">Fate A</text>
                                
                                <circle cx="100" cy="70" r="8" fill="#1976D2"/>
                                <text x="100" y="90" font-size="10" text-anchor="middle" fill="#666">Fate B</text>
                                
                                <!-- Diffusion connections -->
                                <g opacity="0.3">
                                    <line x1="-150" y1="0" x2="-100" y2="-30" stroke="#9C27B0" stroke-width="1"/>
                                    <line x1="-100" y1="-30" x2="-50" y2="-20" stroke="#9C27B0" stroke-width="1"/>
                                    <line x1="-50" y1="-20" x2="0" y2="0" stroke="#9C27B0" stroke-width="1"/>
                                    <line x1="0" y1="0" x2="50" y2="30" stroke="#9C27B0" stroke-width="1"/>
                                </g>
                            </g>
                            
                            <!-- Eigenvalue spectrum -->
                            <g transform="translate(200, 250)">
                                <text x="0" y="-5" font-size="11" text-anchor="middle" fill="#666">Eigenvalue Spectrum</text>
                                <rect x="-80" y="0" width="160" height="30" fill="#F3E5F5" stroke="#9C27B0" stroke-width="1" rx="3"/>
                                
                                <!-- Eigenvalues bars -->
                                <rect x="-70" y="5" width="8" height="20" fill="#9C27B0"/>
                                <rect x="-55" y="8" width="8" height="17" fill="#AB47BC"/>
                                <rect x="-40" y="12" width="8" height="13" fill="#BA68C8"/>
                                <rect x="-25" y="15" width="8" height="10" fill="#CE93D8"/>
                                <rect x="-10" y="18" width="8" height="7" fill="#E1BEE7"/>
                                
                                <text x="20" y="20" font-size="9" fill="#666">DC1 DC2 DC3...</text>
                            </g>
                        </svg>
                    </div>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <div class="pros-title">Advantages</div>
                        <div class="list-item">Captures continuous processes well</div>
                        <div class="list-item">Robust to noise</div>
                        <div class="list-item">Preserves branching structure</div>
                        <div class="list-item">Good for trajectory inference</div>
                        <div class="list-item">Respects data geometry</div>
                    </div>
                    <div class="cons">
                        <div class="cons-title">Limitations</div>
                        <div class="list-item">Computationally intensive</div>
                        <div class="list-item">Parameter selection crucial</div>
                        <div class="list-item">Less intuitive visualization</div>
                        <div class="list-item">May oversmooth data</div>
                    </div>
                </div>

                <div class="code-box">
                    <span class="code-comment"># Python example using Scanpy/Palantir</span><br>
                    <span class="code-keyword">import</span> scanpy <span class="code-keyword">as</span> sc<br>
                    <span class="code-keyword">import</span> palantir<br>
                    <br>
                    <span class="code-comment"># Compute diffusion maps</span><br>
                    sc.tl.diffmap(adata, n_comps=<span class="code-string">10</span>)<br>
                    <br>
                    <span class="code-comment"># Run Palantir for trajectory analysis</span><br>
                    dm_res = palantir.utils.run_diffusion_maps(adata.obsm[<span class="code-string">'X_pca'</span>], n_components=<span class="code-string">5</span>)<br>
                    <br>
                    <span class="code-comment"># Compute pseudotime</span><br>
                    pr_res = palantir.core.run_palantir(<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;dm_res[<span class="code-string">'EigenVectors'</span>],<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;start_cell,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;num_waypoints=<span class="code-string">500</span>)<br>
                    <br>
                    <span class="code-comment"># Visualize diffusion components</span><br>
                    sc.pl.diffmap(adata, color=<span class="code-string">'pseudotime'</span>, components=[<span class="code-string">'1,2'</span>, <span class="code-string">'2,3'</span>])
                </div>
            </div>

            <!-- 5. Parameter Selection Section -->
            <div class="technique-container">
                <div class="technique-header">
                    <div class="technique-icon">⚙️</div>
                    <div class="technique-title">Parameter Selection Guidelines</div>
                </div>
                
                <div class="technique-content">
                    <div>
                        <div class="description-box">
                            <div class="description-title">Overview</div>
                            <div class="description-text">
                                Proper parameter selection is crucial for meaningful dimensionality reduction results. Parameters control the balance between local and global structure preservation, computational efficiency, and biological interpretability. Understanding how parameters affect results helps avoid artifacts and reveals true biological patterns.
                            </div>
                        </div>
                        
                        <div class="description-box" style="margin-top: 15px;">
                            <div class="description-title">General Principles</div>
                            <div class="description-text">
                                Start with default parameters and systematically vary them to understand their effects. Consider your biological question: local structure (cell types) vs global structure (trajectories). Dataset size and sparsity influence optimal parameter choices. Always validate results using known markers and biological knowledge.
                            </div>
                        </div>

                        <div class="parameters-box">
                            <div class="param-title">Critical Decisions</div>
                            <ul class="param-list">
                                <li class="param-item">Number of PCs: Elbow plot, technical variance</li>
                                <li class="param-item">Perplexity (t-SNE): 5-50, scale with N^0.5</li>
                                <li class="param-item">n_neighbors (UMAP): 5-50, affects connectivity</li>
                                <li class="param-item">min_dist (UMAP): 0.0-1.0, cluster tightness</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="visual-box">
                        <svg width="400" height="300" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                            <!-- Parameter Effects Visualization -->
                            <text x="200" y="20" font-size="14" font-weight="600" text-anchor="middle" fill="#FF6F00">Parameter Impact Comparison</text>
                            
                            <!-- Grid showing different parameter effects -->
                            <g transform="translate(100, 60)">
                                <text x="0" y="-5" font-size="11" text-anchor="middle" fill="#666">Low Parameters</text>
                                
                                <!-- Low perplexity/n_neighbors -->
                                <rect x="-40" y="5" width="80" height="60" fill="#FFF3E0" stroke="#FFB74D" stroke-width="1" rx="3"/>
                                <g transform="translate(0, 35)">
                                    <!-- Fragmented clusters -->
                                    <circle cx="-20" cy="-10" r="3" fill="#FF5722"/>
                                    <circle cx="-15" cy="-5" r="3" fill="#FF5722"/>
                                    
                                    <circle cx="0" cy="-8" r="3" fill="#2196F3"/>
                                    
                                    <circle cx="15" cy="5" r="3" fill="#4CAF50"/>
                                    <circle cx="20" cy="10" r="3" fill="#4CAF50"/>
                                    
                                    <circle cx="-10" cy="10" r="3" fill="#9C27B0"/>
                                </g>
                                <text x="0" y="80" font-size="9" text-anchor="middle" fill="#666">Over-fragmented</text>
                            </g>
                            
                            <g transform="translate(200, 60)">
                                <text x="0" y="-5" font-size="11" text-anchor="middle" fill="#666">Optimal</text>
                                
                                <!-- Optimal parameters -->
                                <rect x="-40" y="5" width="80" height="60" fill="#E8F5E9" stroke="#4CAF50" stroke-width="1" rx="3"/>
                                <g transform="translate(0, 35)">
                                    <!-- Well-separated clusters -->
                                    <circle cx="-18" cy="-8" r="3" fill="#FF5722"/>
                                    <circle cx="-22" cy="-5" r="3" fill="#FF5722"/>
                                    <circle cx="-15" cy="-10" r="3" fill="#FF5722"/>
                                    
                                    <circle cx="15" cy="-8" r="3" fill="#2196F3"/>
                                    <circle cx="18" cy="-5" r="3" fill="#2196F3"/>
                                    <circle cx="20" cy="-10" r="3" fill="#2196F3"/>
                                    
                                    <circle cx="-5" cy="8" r="3" fill="#4CAF50"/>
                                    <circle cx="0" cy="10" r="3" fill="#4CAF50"/>
                                    <circle cx="5" cy="8" r="3" fill="#4CAF50"/>
                                </g>
                                <text x="0" y="80" font-size="9" text-anchor="middle" fill="#666">Clear structure</text>
                            </g>
                            
                            <g transform="translate(300, 60)">
                                <text x="0" y="-5" font-size="11" text-anchor="middle" fill="#666">High Parameters</text>
                                
                                <!-- High perplexity/n_neighbors -->
                                <rect x="-40" y="5" width="80" height="60" fill="#FFEBEE" stroke="#EF5350" stroke-width="1" rx="3"/>
                                <g transform="translate(0, 35)">
                                    <!-- Over-merged clusters -->
                                    <circle cx="-5" cy="0" r="3" fill="#FF5722"/>
                                    <circle cx="0" cy="-2" r="3" fill="#2196F3"/>
                                    <circle cx="5" cy="0" r="3" fill="#4CAF50"/>
                                    <circle cx="-2" cy="3" r="3" fill="#9C27B0"/>
                                    <circle cx="2" cy="4" r="3" fill="#FF9800"/>
                                </g>
                                <text x="0" y="80" font-size="9" text-anchor="middle" fill="#666">Over-merged</text>
                            </g>
                            
                            <!-- Decision tree -->
                            <g transform="translate(200, 180)">
                                <text x="0" y="-5" font-size="12" text-anchor="middle" fill="#666">Selection Strategy</text>
                                
                                <rect x="-60" y="5" width="120" height="25" fill="#E3F2FD" stroke="#1976D2" stroke-width="1" rx="3"/>
                                <text x="0" y="22" font-size="10" text-anchor="middle" fill="#1565C0">Dataset Size</text>
                                
                                <!-- Branches -->
                                <line x1="-30" y1="30" x2="-50" y2="50" stroke="#666" stroke-width="1"/>
                                <line x1="30" y1="30" x2="50" y2="50" stroke="#666" stroke-width="1"/>
                                
                                <rect x="-90" y="50" width="70" height="20" fill="#FFF3E0" stroke="#FFB74D" stroke-width="1" rx="3"/>
                                <text x="-55" y="63" font-size="9" text-anchor="middle" fill="#666">&lt;5000 cells</text>
                                <text x="-55" y="85" font-size="8" text-anchor="middle" fill="#E65100">perp: 5-30</text>
                                
                                <rect x="20" y="50" width="70" height="20" fill="#FFF3E0" stroke="#FFB74D" stroke-width="1" rx="3"/>
                                <text x="55" y="63" font-size="9" text-anchor="middle" fill="#666">&gt;10000 cells</text>
                                <text x="55" y="85" font-size="8" text-anchor="middle" fill="#E65100">perp: 30-100</text>
                            </g>
                        </svg>
                    </div>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <div class="pros-title">Best Practices</div>
                        <div class="list-item">Test multiple parameter sets</div>
                        <div class="list-item">Use biological validation</div>
                        <div class="list-item">Consider computational resources</div>
                        <div class="list-item">Document parameter choices</div>
                        <div class="list-item">Check stability across runs</div>
                    </div>
                    <div class="cons">
                        <div class="cons-title">Common Pitfalls</div>
                        <div class="list-item">Using default parameters blindly</div>
                        <div class="list-item">Over-interpreting distances</div>
                        <div class="list-item">Ignoring batch effects</div>
                        <div class="list-item">Not checking multiple seeds</div>
                        <div class="list-item">Forcing biological interpretation</div>
                    </div>
                </div>

                <div class="code-box">
                    <span class="code-comment"># Parameter optimization example</span><br>
                    <span class="code-keyword">import</span> scanpy <span class="code-keyword">as</span> sc<br>
                    <span class="code-keyword">import</span> numpy <span class="code-keyword">as</span> np<br>
                    <br>
                    <span class="code-comment"># Determine optimal number of PCs</span><br>
                    sc.pp.pca(adata, n_comps=<span class="code-string">100</span>)<br>
                    sc.pl.pca_variance_ratio(adata, n_pcs=<span class="code-string">100</span>, log=<span class="code-keyword">True</span>)<br>
                    <br>
                    <span class="code-comment"># Test different perplexity values for t-SNE</span><br>
                    perplexities = [<span class="code-string">5</span>, <span class="code-string">15</span>, <span class="code-string">30</span>, <span class="code-string">50</span>]<br>
                    <span class="code-keyword">for</span> perp <span class="code-keyword">in</span> perplexities:<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;sc.tl.tsne(adata, perplexity=perp, use_rep=<span class="code-string">'X_pca'</span>)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;adata.obsm[<span class="code-string">f'X_tsne_perp{perp}'</span>] = adata.obsm[<span class="code-string">'X_tsne'</span>].copy()<br>
                    <br>
                    <span class="code-comment"># Grid search for UMAP parameters</span><br>
                    n_neighbors_list = [<span class="code-string">5</span>, <span class="code-string">15</span>, <span class="code-string">30</span>, <span class="code-string">50</span>]<br>
                    min_dist_list = [<span class="code-string">0.0</span>, <span class="code-string">0.1</span>, <span class="code-string">0.3</span>, <span class="code-string">0.5</span>]<br>
                    <br>
                    <span class="code-keyword">for</span> nn <span class="code-keyword">in</span> n_neighbors_list:<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">for</span> md <span class="code-keyword">in</span> min_dist_list:<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.pp.neighbors(adata, n_neighbors=nn)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.tl.umap(adata, min_dist=md)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment"># Evaluate clustering quality</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sc.tl.leiden(adata)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment"># Calculate silhouette score or other metrics</span>
                </div>
            </div>
        </div>

        <!-- Comparison Table -->
        <div class="workflow-section">
            <div class="workflow-title">Method Comparison Matrix</div>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Type</th>
                        <th>Speed</th>
                        <th>Global Structure</th>
                        <th>Local Structure</th>
                        <th>Deterministic</th>
                        <th>Best Use Case</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>PCA</strong></td>
                        <td>Linear</td>
                        <td>Very Fast</td>
                        <td>Excellent</td>
                        <td>Poor</td>
                        <td>Yes</td>
                        <td>Initial reduction, QC</td>
                    </tr>
                    <tr>
                        <td><strong>t-SNE</strong></td>
                        <td>Non-linear</td>
                        <td>Slow</td>
                        <td>Poor</td>
                        <td>Excellent</td>
                        <td>No</td>
                        <td>Cluster visualization</td>
                    </tr>
                    <tr>
                        <td><strong>UMAP</strong></td>
                        <td>Non-linear</td>
                        <td>Fast</td>
                        <td>Good</td>
                        <td>Excellent</td>
                        <td>Mostly</td>
                        <td>General visualization</td>
                    </tr>
                    <tr>
                        <td><strong>Diffusion Maps</strong></td>
                        <td>Non-linear</td>
                        <td>Medium</td>
                        <td>Good</td>
                        <td>Good</td>
                        <td>Yes</td>
                        <td>Trajectory analysis</td>
                    </tr>
                    <tr>
                        <td><strong>Force Atlas 2</strong></td>
                        <td>Graph-based</td>
                        <td>Medium</td>
                        <td>Fair</td>
                        <td>Good</td>
                        <td>No</td>
                        <td>Network visualization</td>
                    </tr>
                </tbody>
            </table>
            
            <div style="margin-top: 30px; padding: 20px; background: #E3F2FD; border-left: 4px solid #1976D2; border-radius: 8px;">
                <div style="font-size: 18px; font-weight: 600; color: #1565C0; margin-bottom: 10px;">💡 Key Takeaways</div>
                <ul style="list-style: none; padding-left: 0;">
                    <li style="margin-bottom: 8px; padding-left: 20px; position: relative;">
                        <span style="position: absolute; left: 0; color: #1976D2;">▸</span>
                        <strong>Visualization ≠ Analysis:</strong> Use these methods for exploration, not quantitative conclusions
                    </li>
                    <li style="margin-bottom: 8px; padding-left: 20px; position: relative;">
                        <span style="position: absolute; left: 0; color: #1976D2;">▸</span>
                        <strong>Pipeline approach:</strong> PCA → Clustering → UMAP/t-SNE for visualization
                    </li>
                    <li style="margin-bottom: 8px; padding-left: 20px; position: relative;">
                        <span style="position: absolute; left: 0; color: #1976D2;">▸</span>
                        <strong>Validate findings:</strong> Always confirm patterns with known markers and biology
                    </li>
                    <li style="margin-bottom: 8px; padding-left: 20px; position: relative;">
                        <span style="position: absolute; left: 0; color: #1976D2;">▸</span>
                        <strong>Parameter sensitivity:</strong> Test multiple settings and report those used
                    </li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>