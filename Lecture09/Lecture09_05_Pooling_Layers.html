<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pooling Layers - Comprehensive Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Aptos, 'Segoe UI', sans-serif;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            width: 960px;
            padding: 35px 45px;
            background: white;
        }
        
        .title {
            font-size: 28px;
            font-weight: 600;
            color: #1E64C8;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .visual-comparison {
            background: #f8fbff;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .comparison-title {
            font-size: 18px;
            font-weight: 700;
            color: #1E64C8;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .pooling-types {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .pooling-card {
            background: white;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 18px;
            transition: all 0.3s;
        }
        
        .pooling-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(30, 100, 200, 0.2);
            background: #f8fbff;
        }
        
        .pooling-name {
            font-size: 18px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 10px;
        }
        
        .pooling-desc {
            font-size: 15px;
            color: #333;
            line-height: 1.5;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: 700;
            color: #1E64C8;
            margin: 40px 0 25px 0;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 3px solid #1E64C8;
        }
        
        .detailed-section {
            background: #f8fbff;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .detail-title {
            font-size: 20px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 15px;
        }
        
        .detail-description {
            font-size: 15px;
            color: #333;
            line-height: 1.7;
            margin-bottom: 20px;
        }
        
        .feature-list {
            background: white;
            border-radius: 8px;
            padding: 15px 20px;
            margin: 15px 0;
        }
        
        .feature-item {
            font-size: 14px;
            color: #333;
            line-height: 1.6;
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .feature-item:before {
            content: "▸";
            color: #1E64C8;
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        
        .formula-box {
            background: #e8f2ff;
            border: 2px solid #1E64C8;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            text-align: center;
        }
        
        .alternatives-box {
            background: #f0f5fc;
            border: 2px solid #1E64C8;
            border-radius: 8px;
            padding: 18px;
            margin-top: 30px;
        }
        
        .alternatives-title {
            font-size: 18px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .alternatives-content {
            font-size: 15px;
            color: #333;
            line-height: 1.6;
            text-align: center;
        }
        
        .use-case {
            background: #fff8e6;
            border-left: 4px solid #ffa500;
            padding: 12px 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .use-case-title {
            font-size: 14px;
            font-weight: 700;
            color: #cc8400;
            margin-bottom: 5px;
        }
        
        .use-case-text {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Pooling Layers - Comprehensive Guide</div>
        
        <div class="visual-comparison">
            <div class="comparison-title">Max vs Average Pooling Comparison</div>
            <svg width="880" height="180" viewBox="0 0 880 180">
                <!-- Input Matrix -->
                <text x="80" y="20" font-size="14" fill="#1E64C8" font-weight="600" text-anchor="middle">Input (4×4)</text>
                <g transform="translate(20, 30)">
                    <rect x="0" y="0" width="120" height="120" fill="none" stroke="#1E64C8" stroke-width="2"/>
                    <!-- Grid and values -->
                    <line x1="30" y1="0" x2="30" y2="120" stroke="#1E64C8" stroke-width="1"/>
                    <line x1="60" y1="0" x2="60" y2="120" stroke="#1E64C8" stroke-width="1"/>
                    <line x1="90" y1="0" x2="90" y2="120" stroke="#1E64C8" stroke-width="1"/>
                    <line x1="0" y1="30" x2="120" y2="30" stroke="#1E64C8" stroke-width="1"/>
                    <line x1="0" y1="60" x2="120" y2="60" stroke="#1E64C8" stroke-width="1"/>
                    <line x1="0" y1="90" x2="120" y2="90" stroke="#1E64C8" stroke-width="1"/>
                    
                    <!-- Values -->
                    <text x="15" y="20" font-size="12" fill="#333" text-anchor="middle">2</text>
                    <text x="45" y="20" font-size="12" fill="#333" text-anchor="middle">8</text>
                    <text x="75" y="20" font-size="12" fill="#333" text-anchor="middle">4</text>
                    <text x="105" y="20" font-size="12" fill="#333" text-anchor="middle">1</text>
                    
                    <text x="15" y="50" font-size="12" fill="#333" text-anchor="middle">5</text>
                    <text x="45" y="50" font-size="12" fill="#333" text-anchor="middle">3</text>
                    <text x="75" y="50" font-size="12" fill="#333" text-anchor="middle">9</text>
                    <text x="105" y="50" font-size="12" fill="#333" text-anchor="middle">2</text>
                    
                    <text x="15" y="80" font-size="12" fill="#333" text-anchor="middle">7</text>
                    <text x="45" y="80" font-size="12" fill="#333" text-anchor="middle">1</text>
                    <text x="75" y="80" font-size="12" fill="#333" text-anchor="middle">6</text>
                    <text x="105" y="80" font-size="12" fill="#333" text-anchor="middle">4</text>
                    
                    <text x="15" y="110" font-size="12" fill="#333" text-anchor="middle">3</text>
                    <text x="45" y="110" font-size="12" fill="#333" text-anchor="middle">2</text>
                    <text x="75" y="110" font-size="12" fill="#333" text-anchor="middle">5</text>
                    <text x="105" y="110" font-size="12" fill="#333" text-anchor="middle">8</text>
                    
                    <!-- Highlight 2×2 window -->
                    <rect x="0" y="0" width="60" height="60" fill="rgba(30, 100, 200, 0.1)" stroke="#1E64C8" stroke-width="2" stroke-dasharray="4,2"/>
                </g>
                
                <!-- Arrow -->
                <path d="M 160 90 L 200 90" stroke="#1E64C8" stroke-width="2" fill="none"/>
                <path d="M 200 90 L 193 85 L 193 95 Z" fill="#1E64C8"/>
                <text x="180" y="80" font-size="11" fill="#1E64C8" font-weight="600" text-anchor="middle">2×2 Pool</text>
                
                <!-- Max Pooling Output -->
                <text x="290" y="20" font-size="14" fill="#1E64C8" font-weight="600" text-anchor="middle">Max Pooling (2×2)</text>
                <g transform="translate(220, 30)">
                    <rect x="0" y="0" width="140" height="140" fill="#e8f2ff" stroke="#1E64C8" stroke-width="2"/>
                    <line x="70" y="0" x2="70" y2="140" stroke="#1E64C8" stroke-width="1"/>
                    <line x="0" y="70" x2="140" y2="70" stroke="#1E64C8" stroke-width="1"/>
                    
                    <!-- Max values -->
                    <text x="35" y="45" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">8</text>
                    <text x="105" y="45" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">9</text>
                    <text x="35" y="115" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">7</text>
                    <text x="105" y="115" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">8</text>
                    
                    <text x="70" y="165" font-size="11" fill="#666" text-anchor="middle">Takes maximum value</text>
                </g>
                
                <!-- Separator -->
                <line x1="440" y1="30" x2="440" y2="170" stroke="#ccc" stroke-width="1"/>
                
                <!-- Arrow for average -->
                <path d="M 530 90 L 570 90" stroke="#1E64C8" stroke-width="2" fill="none"/>
                <path d="M 570 90 L 563 85 L 563 95 Z" fill="#1E64C8"/>
                <text x="550" y="80" font-size="11" fill="#1E64C8" font-weight="600" text-anchor="middle">2×2 Pool</text>
                
                <!-- Input reference -->
                <text x="490" y="20" font-size="14" fill="#1E64C8" font-weight="600" text-anchor="middle">Same Input</text>
                <g transform="translate(450, 40)">
                    <rect x="0" y="0" width="80" height="80" fill="none" stroke="#1E64C8" stroke-width="1" opacity="0.3"/>
                    <text x="40" y="45" font-size="11" fill="#999" text-anchor="middle">4×4</text>
                    <text x="40" y="60" font-size="11" fill="#999" text-anchor="middle">matrix</text>
                </g>
                
                <!-- Average Pooling Output -->
                <text x="690" y="20" font-size="14" fill="#1E64C8" font-weight="600" text-anchor="middle">Average Pooling (2×2)</text>
                <g transform="translate(610, 30)">
                    <rect x="0" y="0" width="160" height="140" fill="#d4e7ff" stroke="#1E64C8" stroke-width="2"/>
                    <line x="80" y="0" x2="80" y2="140" stroke="#1E64C8" stroke-width="1"/>
                    <line x="0" y="70" x2="160" y2="70" stroke="#1E64C8" stroke-width="1"/>
                    
                    <!-- Average values -->
                    <text x="40" y="45" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">4.5</text>
                    <text x="120" y="45" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">4.0</text>
                    <text x="40" y="115" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">3.2</text>
                    <text x="120" y="115" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">5.8</text>
                    
                    <text x="80" y="165" font-size="11" fill="#666" text-anchor="middle">Computes average value</text>
                </g>
            </svg>
        </div>
        
        <div class="pooling-types">
            <div class="pooling-card">
                <div class="pooling-name">Max Pooling</div>
                <div class="pooling-desc">Selects maximum value from each window. Preserves strongest activations and provides translation invariance</div>
            </div>
            
            <div class="pooling-card">
                <div class="pooling-name">Average Pooling</div>
                <div class="pooling-desc">Computes average of values in each window. Smoother downsampling, often used before classification layers</div>
            </div>
            
            <div class="pooling-card">
                <div class="pooling-name">Global Pooling</div>
                <div class="pooling-desc">Reduces entire feature map to single value per channel. Eliminates need for fixed input sizes</div>
            </div>
            
            <div class="pooling-card">
                <div class="pooling-name">Adaptive Pooling</div>
                <div class="pooling-desc">Outputs fixed size regardless of input dimensions. Automatically adjusts pooling window and stride</div>
            </div>
        </div>
        
        <!-- Detailed Sections -->
        <div class="section-title">Detailed Explanations</div>
        
        <!-- Max Pooling Detail -->
        <div class="detailed-section">
            <div class="detail-title">1. Max Pooling</div>
            <div class="detail-description">
                Max pooling is the most commonly used pooling operation in CNNs. It performs downsampling by selecting the maximum value within each pooling window, effectively capturing the most prominent features detected by the preceding convolutional layers.
            </div>
            
            <svg width="870" height="220" viewBox="0 0 870 220">
                <!-- Step-by-step visualization -->
                <text x="435" y="20" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">Max Pooling Process</text>
                
                <!-- Input -->
                <text x="80" y="50" font-size="13" fill="#1E64C8" font-weight="600" text-anchor="middle">Input Feature Map</text>
                <g transform="translate(20, 60)">
                    <rect x="0" y="0" width="120" height="120" fill="#f0f8ff" stroke="#1E64C8" stroke-width="2"/>
                    <line x1="30" y1="0" x2="30" y2="120" stroke="#1E64C8" stroke-width="0.5"/>
                    <line x1="60" y1="0" x2="60" y2="120" stroke="#1E64C8" stroke-width="0.5"/>
                    <line x1="90" y1="0" x2="90" y2="120" stroke="#1E64C8" stroke-width="0.5"/>
                    <line x1="0" y1="30" x2="120" y2="30" stroke="#1E64C8" stroke-width="0.5"/>
                    <line x1="0" y1="60" x2="120" y2="60" stroke="#1E64C8" stroke-width="0.5"/>
                    <line x1="0" y1="90" x2="120" y2="90" stroke="#1E64C8" stroke-width="0.5"/>
                    
                    <text x="15" y="20" font-size="11" fill="#333" text-anchor="middle">1.2</text>
                    <text x="45" y="20" font-size="11" fill="#333" text-anchor="middle">3.7</text>
                    <text x="75" y="20" font-size="11" fill="#333" text-anchor="middle">2.1</text>
                    <text x="105" y="20" font-size="11" fill="#333" text-anchor="middle">0.8</text>
                    
                    <text x="15" y="50" font-size="11" fill="#333" text-anchor="middle">2.8</text>
                    <text x="45" y="50" font-size="11" fill="#333" text-anchor="middle">4.9</text>
                    <text x="75" y="50" font-size="11" fill="#333" text-anchor="middle">1.5</text>
                    <text x="105" y="50" font-size="11" fill="#333" text-anchor="middle">3.2</text>
                    
                    <text x="15" y="80" font-size="11" fill="#333" text-anchor="middle">0.9</text>
                    <text x="45" y="80" font-size="11" fill="#333" text-anchor="middle">2.3</text>
                    <text x="75" y="80" font-size="11" fill="#333" text-anchor="middle">4.6</text>
                    <text x="105" y="80" font-size="11" fill="#333" text-anchor="middle">2.7</text>
                    
                    <text x="15" y="110" font-size="11" fill="#333" text-anchor="middle">1.7</text>
                    <text x="45" y="110" font-size="11" fill="#333" text-anchor="middle">3.1</text>
                    <text x="75" y="110" font-size="11" fill="#333" text-anchor="middle">1.9</text>
                    <text x="105" y="110" font-size="11" fill="#333" text-anchor="middle">5.3</text>
                    
                    <!-- Window 1 -->
                    <rect x="0" y="0" width="60" height="60" fill="rgba(255, 100, 100, 0.2)" stroke="#ff6464" stroke-width="2"/>
                    <text x="30" y="-5" font-size="10" fill="#ff6464" font-weight="700" text-anchor="middle">max=4.9</text>
                </g>
                
                <path d="M 160 120 L 200 120" stroke="#1E64C8" stroke-width="2" fill="none"/>
                <path d="M 200 120 L 193 115 L 193 125 Z" fill="#1E64C8"/>
                
                <!-- Window detail -->
                <text x="310" y="50" font-size="13" fill="#1E64C8" font-weight="600" text-anchor="middle">Window Analysis</text>
                <g transform="translate(230, 60)">
                    <rect x="0" y="0" width="160" height="80" fill="#fff5f5" stroke="#ff6464" stroke-width="2" rx="8"/>
                    <text x="10" y="20" font-size="11" fill="#333">Values: [1.2, 3.7, 2.8, 4.9]</text>
                    <text x="10" y="40" font-size="11" fill="#333">Operation: max(values)</text>
                    <text x="10" y="60" font-size="12" fill="#ff6464" font-weight="700">Result: 4.9</text>
                </g>
                
                <path d="M 410 120 L 450 120" stroke="#1E64C8" stroke-width="2" fill="none"/>
                <path d="M 450 120 L 443 115 L 443 125 Z" fill="#1E64C8"/>
                
                <!-- Output -->
                <text x="560" y="50" font-size="13" fill="#1E64C8" font-weight="600" text-anchor="middle">Output (2×2)</text>
                <g transform="translate(480, 60)">
                    <rect x="0" y="0" width="160" height="120" fill="#e8f2ff" stroke="#1E64C8" stroke-width="2"/>
                    <line x="80" y="0" x2="80" y2="120" stroke="#1E64C8" stroke-width="1"/>
                    <line x="0" y="60" x2="160" y2="60" stroke="#1E64C8" stroke-width="1"/>
                    
                    <text x="40" y="40" font-size="15" fill="#1E64C8" font-weight="700" text-anchor="middle">4.9</text>
                    <text x="120" y="40" font-size="15" fill="#1E64C8" font-weight="700" text-anchor="middle">3.2</text>
                    <text x="40" y="100" font-size="15" fill="#1E64C8" font-weight="700" text-anchor="middle">3.1</text>
                    <text x="120" y="100" font-size="15" fill="#1E64C8" font-weight="700" text-anchor="middle">5.3</text>
                </g>
                
                <!-- Properties -->
                <text x="750" y="50" font-size="13" fill="#1E64C8" font-weight="600" text-anchor="middle">Properties</text>
                <g transform="translate(660, 60)">
                    <rect x="0" y="0" width="200" height="120" fill="#f0f8ff" stroke="#1E64C8" stroke-width="1.5" rx="8"/>
                    <text x="10" y="25" font-size="11" fill="#333">✓ Sparse activation</text>
                    <text x="10" y="45" font-size="11" fill="#333">✓ Translation invariant</text>
                    <text x="10" y="65" font-size="11" fill="#333">✓ Captures dominant</text>
                    <text x="15" y="80" font-size="11" fill="#333">  features</text>
                    <text x="10" y="100" font-size="11" fill="#333">✓ No learnable params</text>
                </g>
            </svg>
            
            <div class="formula-box">
                y[i,j] = max(x[i×s:i×s+k, j×s:j×s+k])<br>
                where k = kernel size, s = stride
            </div>
            
            <div class="feature-list">
                <div class="feature-item"><strong>Translation Invariance:</strong> Small shifts in input don't significantly affect output, making the network robust to minor positional variations</div>
                <div class="feature-item"><strong>Feature Preservation:</strong> Retains the strongest activations, ensuring important features are not lost during downsampling</div>
                <div class="feature-item"><strong>Computational Efficiency:</strong> Reduces spatial dimensions without learnable parameters, decreasing memory and computation requirements</div>
                <div class="feature-item"><strong>Noise Reduction:</strong> Suppresses weaker activations that may represent noise or less relevant features</div>
            </div>
            
            <div class="use-case">
                <div class="use-case-title">Common Use Cases:</div>
                <div class="use-case-text">Image classification (VGG, ResNet), object detection networks, feature extraction in early CNN layers, any task requiring translation invariance</div>
            </div>
        </div>
        
        <!-- Average Pooling Detail -->
        <div class="detailed-section">
            <div class="detail-title">2. Average Pooling</div>
            <div class="detail-description">
                Average pooling computes the mean of all values within the pooling window. It provides a smoother downsampling operation compared to max pooling, preserving more spatial information while still reducing dimensionality.
            </div>
            
            <svg width="870" height="220" viewBox="0 0 870 220">
                <text x="435" y="20" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">Average Pooling Process</text>
                
                <!-- Input -->
                <text x="80" y="50" font-size="13" fill="#1E64C8" font-weight="600" text-anchor="middle">Input Feature Map</text>
                <g transform="translate(20, 60)">
                    <rect x="0" y="0" width="120" height="120" fill="#f0fff0" stroke="#1E64C8" stroke-width="2"/>
                    <line x1="30" y1="0" x2="30" y2="120" stroke="#1E64C8" stroke-width="0.5"/>
                    <line x1="60" y1="0" x2="60" y2="120" stroke="#1E64C8" stroke-width="0.5"/>
                    <line x1="90" y1="0" x2="90" y2="120" stroke="#1E64C8" stroke-width="0.5"/>
                    <line x1="0" y1="30" x2="120" y2="30" stroke="#1E64C8" stroke-width="0.5"/>
                    <line x1="0" y1="60" x2="120" y2="60" stroke="#1E64C8" stroke-width="0.5"/>
                    <line x1="0" y1="90" x2="120" y2="90" stroke="#1E64C8" stroke-width="0.5"/>
                    
                    <text x="15" y="20" font-size="11" fill="#333" text-anchor="middle">2.0</text>
                    <text x="45" y="20" font-size="11" fill="#333" text-anchor="middle">4.0</text>
                    <text x="75" y="20" font-size="11" fill="#333" text-anchor="middle">1.5</text>
                    <text x="105" y="20" font-size="11" fill="#333" text-anchor="middle">3.5</text>
                    
                    <text x="15" y="50" font-size="11" fill="#333" text-anchor="middle">6.0</text>
                    <text x="45" y="50" font-size="11" fill="#333" text-anchor="middle">8.0</text>
                    <text x="75" y="50" font-size="11" fill="#333" text-anchor="middle">2.5</text>
                    <text x="105" y="50" font-size="11" fill="#333" text-anchor="middle">4.5</text>
                    
                    <text x="15" y="80" font-size="11" fill="#333" text-anchor="middle">3.0</text>
                    <text x="45" y="80" font-size="11" fill="#333" text-anchor="middle">5.0</text>
                    <text x="75" y="80" font-size="11" fill="#333" text-anchor="middle">7.0</text>
                    <text x="105" y="80" font-size="11" fill="#333" text-anchor="middle">1.0</text>
                    
                    <text x="15" y="110" font-size="11" fill="#333" text-anchor="middle">1.0</text>
                    <text x="45" y="110" font-size="11" fill="#333" text-anchor="middle">2.0</text>
                    <text x="75" y="110" font-size="11" fill="#333" text-anchor="middle">4.0</text>
                    <text x="105" y="110" font-size="11" fill="#333" text-anchor="middle">6.0</text>
                    
                    <!-- Window 1 -->
                    <rect x="0" y="0" width="60" height="60" fill="rgba(100, 200, 100, 0.2)" stroke="#64c864" stroke-width="2"/>
                    <text x="30" y="-5" font-size="10" fill="#64c864" font-weight="700" text-anchor="middle">avg=5.0</text>
                </g>
                
                <path d="M 160 120 L 200 120" stroke="#1E64C8" stroke-width="2" fill="none"/>
                <path d="M 200 120 L 193 115 L 193 125 Z" fill="#1E64C8"/>
                
                <!-- Calculation detail -->
                <text x="310" y="50" font-size="13" fill="#1E64C8" font-weight="600" text-anchor="middle">Calculation Steps</text>
                <g transform="translate(220, 60)">
                    <rect x="0" y="0" width="180" height="100" fill="#f5fff5" stroke="#64c864" stroke-width="2" rx="8"/>
                    <text x="10" y="20" font-size="11" fill="#333">Values: [2.0, 4.0, 6.0, 8.0]</text>
                    <text x="10" y="40" font-size="11" fill="#333">Sum: 2.0+4.0+6.0+8.0 = 20.0</text>
                    <text x="10" y="60" font-size="11" fill="#333">Count: 4 elements</text>
                    <text x="10" y="80" font-size="12" fill="#64c864" font-weight="700">Result: 20.0 / 4 = 5.0</text>
                </g>
                
                <path d="M 420 120 L 460 120" stroke="#1E64C8" stroke-width="2" fill="none"/>
                <path d="M 460 120 L 453 115 L 453 125 Z" fill="#1E64C8"/>
                
                <!-- Output -->
                <text x="570" y="50" font-size="13" fill="#1E64C8" font-weight="600" text-anchor="middle">Output (2×2)</text>
                <g transform="translate(490, 60)">
                    <rect x="0" y="0" width="160" height="120" fill="#d4e7ff" stroke="#1E64C8" stroke-width="2"/>
                    <line x="80" y="0" x2="80" y2="120" stroke="#1E64C8" stroke-width="1"/>
                    <line x="0" y="60" x2="160" y2="60" stroke="#1E64C8" stroke-width="1"/>
                    
                    <text x="40" y="40" font-size="15" fill="#1E64C8" font-weight="700" text-anchor="middle">5.0</text>
                    <text x="120" y="40" font-size="15" fill="#1E64C8" font-weight="700" text-anchor="middle">2.9</text>
                    <text x="40" y="100" font-size="15" fill="#1E64C8" font-weight="700" text-anchor="middle">2.8</text>
                    <text x="120" y="100" font-size="15" fill="#1E64C8" font-weight="700" text-anchor="middle">4.5</text>
                </g>
                
                <!-- Properties -->
                <text x="760" y="50" font-size="13" fill="#1E64C8" font-weight="600" text-anchor="middle">Properties</text>
                <g transform="translate(670, 60)">
                    <rect x="0" y="0" width="190" height="120" fill="#f0fff0" stroke="#1E64C8" stroke-width="1.5" rx="8"/>
                    <text x="10" y="25" font-size="11" fill="#333">✓ Smooth reduction</text>
                    <text x="10" y="45" font-size="11" fill="#333">✓ Preserves overall</text>
                    <text x="15" y="60" font-size="11" fill="#333">  information</text>
                    <text x="10" y="80" font-size="11" fill="#333">✓ Less aggressive</text>
                    <text x="10" y="100" font-size="11" fill="#333">✓ Good for global</text>
                    <text x="15" y="115" font-size="11" fill="#333">  features</text>
                </g>
            </svg>
            
            <div class="formula-box">
                y[i,j] = (1/k²) × Σ x[i×s:i×s+k, j×s:j×s+k]<br>
                where k = kernel size, s = stride
            </div>
            
            <div class="feature-list">
                <div class="feature-item"><strong>Smooth Downsampling:</strong> Considers all values in the window, providing a more gradual transition between feature maps</div>
                <div class="feature-item"><strong>Background Preservation:</strong> Unlike max pooling, it doesn't completely discard weaker activations that might contain useful contextual information</div>
                <div class="feature-item"><strong>Reduced Overfitting:</strong> The averaging operation acts as a form of regularization, potentially improving generalization</div>
                <div class="feature-item"><strong>Global Context:</strong> Better at preserving overall spatial patterns and texture information</div>
            </div>
            
            <div class="use-case">
                <div class="use-case-title">Common Use Cases:</div>
                <div class="use-case-text">Final layers before classification (often as Global Average Pooling), texture analysis, semantic segmentation, networks requiring smooth feature transitions</div>
            </div>
        </div>
        
        <!-- Global Pooling Detail -->
        <div class="detailed-section">
            <div class="detail-title">3. Global Pooling</div>
            <div class="detail-description">
                Global pooling reduces each entire feature map to a single value per channel, eliminating all spatial dimensions. This operation is particularly useful for creating fixed-size representations from variable-sized inputs and reducing the number of parameters.
            </div>
            
            <svg width="870" height="280" viewBox="0 0 870 280">
                <text x="435" y="20" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">Global Pooling Architecture</text>
                
                <!-- Input volume -->
                <text x="100" y="50" font-size="13" fill="#1E64C8" font-weight="600" text-anchor="middle">Input: 3D Feature Maps</text>
                <g transform="translate(20, 60)">
                    <!-- Channel 1 -->
                    <rect x="0" y="0" width="60" height="60" fill="#ffe6e6" stroke="#ff6464" stroke-width="2"/>
                    <line x1="15" y1="0" x2="15" y2="60" stroke="#ff6464" stroke-width="0.5"/>
                    <line x1="30" y1="0" x2="30" y2="60" stroke="#ff6464" stroke-width="0.5"/>
                    <line x1="45" y1="0" x2="45" y2="60" stroke="#ff6464" stroke-width="0.5"/>
                    <line x1="0" y1="15" x2="60" y2="15" stroke="#ff6464" stroke-width="0.5"/>
                    <line x1="0" y1="30" x2="60" y2="30" stroke="#ff6464" stroke-width="0.5"/>
                    <line x1="0" y1="45" x2="60" y2="45" stroke="#ff6464" stroke-width="0.5"/>
                    <text x="30" y="35" font-size="10" fill="#333" text-anchor="middle">Ch 1</text>
                    <text x="30" y="75" font-size="9" fill="#333" text-anchor="middle">4×4×1</text>
                    
                    <!-- Channel 2 -->
                    <rect x="70" y="0" width="60" height="60" fill="#e6f7ff" stroke="#64c8ff" stroke-width="2"/>
                    <line x1="85" y1="0" x2="85" y2="60" stroke="#64c8ff" stroke-width="0.5"/>
                    <line x1="100" y1="0" x2="100" y2="60" stroke="#64c8ff" stroke-width="0.5"/>
                    <line x1="115" y1="0" x2="115" y2="60" stroke="#64c8ff" stroke-width="0.5"/>
                    <line x1="70" y1="15" x2="130" y2="15" stroke="#64c8ff" stroke-width="0.5"/>
                    <line x1="70" y1="30" x2="130" y2="30" stroke="#64c8ff" stroke-width="0.5"/>
                    <line x1="70" y1="45" x2="130" y2="45" stroke="#64c8ff" stroke-width="0.5"/>
                    <text x="100" y="35" font-size="10" fill="#333" text-anchor="middle">Ch 2</text>
                    <text x="100" y="75" font-size="9" fill="#333" text-anchor="middle">4×4×1</text>
                    
                    <!-- Channel 3 -->
                    <rect x="140" y="0" width="60" height="60" fill="#e6ffe6" stroke="#64c864" stroke-width="2"/>
                    <line x1="155" y1="0" x2="155" y2="60" stroke="#64c864" stroke-width="0.5"/>
                    <line x1="170" y1="0" x2="170" y2="60" stroke="#64c864" stroke-width="0.5"/>
                    <line x1="185" y1="0" x2="185" y2="60" stroke="#64c864" stroke-width="0.5"/>
                    <line x1="140" y1="15" x2="200" y2="15" stroke="#64c864" stroke-width="0.5"/>
                    <line x1="140" y1="30" x2="200" y2="30" stroke="#64c864" stroke-width="0.5"/>
                    <line x1="140" y1="45" x2="200" y2="45" stroke="#64c864" stroke-width="0.5"/>
                    <text x="170" y="35" font-size="10" fill="#333" text-anchor="middle">Ch 3</text>
                    <text x="170" y="75" font-size="9" fill="#333" text-anchor="middle">4×4×1</text>
                    
                    <text x="100" y="95" font-size="12" fill="#1E64C8" font-weight="600" text-anchor="middle">H × W × C</text>
                </g>
                
                <!-- Global Max Pooling -->
                <g transform="translate(0, 170)">
                    <text x="100" y="0" font-size="14" fill="#ff6464" font-weight="600" text-anchor="middle">Global Max Pooling</text>
                    
                    <path d="M 100 10 L 100 40" stroke="#ff6464" stroke-width="2" fill="none"/>
                    <path d="M 100 40 L 95 33 L 105 33 Z" fill="#ff6464"/>
                    
                    <g transform="translate(30, 50)">
                        <rect x="0" y="0" width="140" height="50" fill="#ffe6e6" stroke="#ff6464" stroke-width="2" rx="8"/>
                        <text x="70" y="25" font-size="11" fill="#333" text-anchor="middle">Takes max value from</text>
                        <text x="70" y="40" font-size="11" fill="#333" text-anchor="middle">entire feature map</text>
                    </g>
                </g>
                
                <!-- Global Average Pooling -->
                <g transform="translate(230, 170)">
                    <text x="100" y="0" font-size="14" fill="#64c8ff" font-weight="600" text-anchor="middle">Global Average Pooling</text>
                    
                    <path d="M 100 10 L 100 40" stroke="#64c8ff" stroke-width="2" fill="none"/>
                    <path d="M 100 40 L 95 33 L 105 33 Z" fill="#64c8ff"/>
                    
                    <g transform="translate(20, 50)">
                        <rect x="0" y="0" width="160" height="50" fill="#e6f7ff" stroke="#64c8ff" stroke-width="2" rx="8"/>
                        <text x="80" y="25" font-size="11" fill="#333" text-anchor="middle">Computes average of all</text>
                        <text x="80" y="40" font-size="11" fill="#333" text-anchor="middle">values in feature map</text>
                    </g>
                </g>
                
                <!-- Output -->
                <g transform="translate(600, 60)">
                    <text x="120" y="-10" font-size="13" fill="#1E64C8" font-weight="600" text-anchor="middle">Output: 1D Vector</text>
                    
                    <rect x="40" y="0" width="40" height="120" fill="#ffd4d4" stroke="#ff6464" stroke-width="2"/>
                    <text x="60" y="65" font-size="11" fill="#333" font-weight="600" text-anchor="middle">v₁</text>
                    
                    <rect x="90" y="0" width="40" height="120" fill="#d4e7ff" stroke="#64c8ff" stroke-width="2"/>
                    <text x="110" y="65" font-size="11" fill="#333" font-weight="600" text-anchor="middle">v₂</text>
                    
                    <rect x="140" y="0" width="40" height="120" fill="#d4ffd4" stroke="#64c864" stroke-width="2"/>
                    <text x="160" y="65" font-size="11" fill="#333" font-weight="600" text-anchor="middle">v₃</text>
                    
                    <text x="120" y="140" font-size="12" fill="#1E64C8" font-weight="600" text-anchor="middle">1 × 1 × C</text>
                    <text x="120" y="160" font-size="10" fill="#666" text-anchor="middle">(C values total)</text>
                </g>
                
                <!-- Arrow from input to output -->
                <path d="M 250 120 L 620 120" stroke="#1E64C8" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
                <path d="M 620 120 L 613 115 L 613 125 Z" fill="#1E64C8"/>
                <text x="435" y="110" font-size="11" fill="#1E64C8" font-weight="600" text-anchor="middle">Spatial dims eliminated</text>
            </svg>
            
            <div class="formula-box">
                Global Max: y[c] = max(x[:,:,c])<br>
                Global Average: y[c] = mean(x[:,:,c])<br>
                Output shape: 1 × 1 × C (C = number of channels)
            </div>
            
            <div class="feature-list">
                <div class="feature-item"><strong>Eliminates Fully Connected Layers:</strong> Can directly connect feature maps to output classes, drastically reducing parameters and preventing overfitting</div>
                <div class="feature-item"><strong>Variable Input Size:</strong> Accepts images of any spatial dimensions since output size depends only on channel count</div>
                <div class="feature-item"><strong>Regularization Effect:</strong> Acts as a structural regularizer by forcing the network to learn more robust features</div>
                <div class="feature-item"><strong>Interpretability:</strong> Each output value directly corresponds to a feature map, making network behavior more interpretable</div>
            </div>
            
            <div class="use-case">
                <div class="use-case-title">Common Use Cases:</div>
                <div class="use-case-text">Network-in-Network architectures, ResNet final layer, image classification without dense layers, fully convolutional networks, transfer learning scenarios</div>
            </div>
        </div>
        
        <!-- Adaptive Pooling Detail -->
        <div class="detailed-section">
            <div class="detail-title">4. Adaptive Pooling</div>
            <div class="detail-description">
                Adaptive pooling automatically determines the window size and stride to produce a specified output size regardless of input dimensions. This flexibility makes it invaluable for handling variable-sized inputs while maintaining consistent architecture.
            </div>
            
            <svg width="870" height="260" viewBox="0 0 870 260">
                <text x="435" y="20" font-size="16" fill="#1E64C8" font-weight="700" text-anchor="middle">Adaptive Pooling Flexibility</text>
                
                <!-- Different input sizes -->
                <text x="435" y="45" font-size="13" fill="#666" text-anchor="middle">Different Inputs → Same Output Size</text>
                
                <!-- Input 1: 8x8 -->
                <text x="100" y="75" font-size="12" fill="#1E64C8" font-weight="600" text-anchor="middle">Input: 8×8</text>
                <g transform="translate(40, 85)">
                    <rect x="0" y="0" width="120" height="120" fill="#fff0e6" stroke="#ff9933" stroke-width="2"/>
                    <!-- Grid -->
                    <line x1="15" y1="0" x2="15" y2="120" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="30" y1="0" x2="30" y2="120" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="45" y1="0" x2="45" y2="120" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="60" y1="0" x2="60" y2="120" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="75" y1="0" x2="75" y2="120" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="90" y1="0" x2="90" y2="120" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="105" y1="0" x2="105" y2="120" stroke="#ff9933" stroke-width="0.3"/>
                    
                    <line x1="0" y1="15" x2="120" y2="15" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="0" y1="30" x2="120" y2="30" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="0" y1="45" x2="120" y2="45" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="0" y1="60" x2="120" y2="60" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="0" y1="75" x2="120" y2="75" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="0" y1="90" x2="120" y2="90" stroke="#ff9933" stroke-width="0.3"/>
                    <line x1="0" y1="105" x2="120" y2="105" stroke="#ff9933" stroke-width="0.3"/>
                    
                    <!-- Adaptive window -->
                    <rect x="0" y="0" width="60" height="60" fill="rgba(255, 153, 51, 0.2)" stroke="#ff9933" stroke-width="2"/>
                    <text x="30" y="85" font-size="9" fill="#ff9933" font-weight="600" text-anchor="middle">4×4 window</text>
                </g>
                
                <path d="M 180 145 L 230 145" stroke="#1E64C8" stroke-width="2" fill="none"/>
                <path d="M 230 145 L 223 140 L 223 150 Z" fill="#1E64C8"/>
                <text x="205" y="135" font-size="9" fill="#1E64C8" font-weight="600" text-anchor="middle">Adapt</text>
                
                <!-- Input 2: 6x6 -->
                <text x="100" y="75" font-size="12" fill="#1E64C8" font-weight="600" text-anchor="middle" transform="translate(200, 0)">Input: 6×6</text>
                <g transform="translate(250, 85)">
                    <rect x="0" y="0" width="90" height="90" fill="#e6f7ff" stroke="#64c8ff" stroke-width="2"/>
                    <!-- Grid -->
                    <line x1="15" y1="0" x2="15" y2="90" stroke="#64c8ff" stroke-width="0.3"/>
                    <line x1="30" y1="0" x2="30" y2="90" stroke="#64c8ff" stroke-width="0.3"/>
                    <line x1="45" y1="0" x2="45" y2="90" stroke="#64c8ff" stroke-width="0.3"/>
                    <line x1="60" y1="0" x2="60" y2="90" stroke="#64c8ff" stroke-width="0.3"/>
                    <line x1="75" y1="0" x2="75" y2="90" stroke="#64c8ff" stroke-width="0.3"/>
                    
                    <line x1="0" y1="15" x2="90" y2="15" stroke="#64c8ff" stroke-width="0.3"/>
                    <line x1="0" y1="30" x2="90" y2="30" stroke="#64c8ff" stroke-width="0.3"/>
                    <line x1="0" y1="45" x2="90" y2="45" stroke="#64c8ff" stroke-width="0.3"/>
                    <line x1="0" y1="60" x2="90" y2="60" stroke="#64c8ff" stroke-width="0.3"/>
                    <line x1="0" y1="75" x2="90" y2="75" stroke="#64c8ff" stroke-width="0.3"/>
                    
                    <!-- Adaptive window -->
                    <rect x="0" y="0" width="45" height="45" fill="rgba(100, 200, 255, 0.2)" stroke="#64c8ff" stroke-width="2"/>
                    <text x="22.5" y="63" font-size="9" fill="#64c8ff" font-weight="600" text-anchor="middle">3×3 window</text>
                </g>
                
                <path d="M 360 130 L 410 130" stroke="#1E64C8" stroke-width="2" fill="none"/>
                <path d="M 410 130 L 403 125 L 403 135 Z" fill="#1E64C8"/>
                <text x="385" y="120" font-size="9" fill="#1E64C8" font-weight="600" text-anchor="middle">Adapt</text>
                
                <!-- Input 3: 10x10 -->
                <text x="100" y="75" font-size="12" fill="#1E64C8" font-weight="600" text-anchor="middle" transform="translate(360, 0)">Input: 10×10</text>
                <g transform="translate(420, 85)">
                    <rect x="0" y="0" width="150" height="150" fill="#f0ffe6" stroke="#64c864" stroke-width="2"/>
                    <!-- Simplified grid -->
                    <line x1="30" y1="0" x2="30" y2="150" stroke="#64c864" stroke-width="0.3"/>
                    <line x1="60" y1="0" x2="60" y2="150" stroke="#64c864" stroke-width="0.3"/>
                    <line x1="90" y1="0" x2="90" y2="150" stroke="#64c864" stroke-width="0.3"/>
                    <line x1="120" y1="0" x2="120" y2="150" stroke="#64c864" stroke-width="0.3"/>
                    
                    <line x1="0" y1="30" x2="150" y2="30" stroke="#64c864" stroke-width="0.3"/>
                    <line x1="0" y1="60" x2="150" y2="60" stroke="#64c864" stroke-width="0.3"/>
                    <line x1="0" y1="90" x2="150" y2="90" stroke="#64c864" stroke-width="0.3"/>
                    <line x1="0" y1="120" x2="150" y2="120" stroke="#64c864" stroke-width="0.3"/>
                    
                    <!-- Adaptive window -->
                    <rect x="0" y="0" width="75" height="75" fill="rgba(100, 200, 100, 0.2)" stroke="#64c864" stroke-width="2"/>
                    <text x="37.5" y="95" font-size="9" fill="#64c864" font-weight="600" text-anchor="middle">5×5 window</text>
                </g>
                
                <path d="M 590 160 L 640 160" stroke="#1E64C8" stroke-width="2" fill="none"/>
                <path d="M 640 160 L 633 155 L 633 165 Z" fill="#1E64C8"/>
                <text x="615" y="150" font-size="9" fill="#1E64C8" font-weight="600" text-anchor="middle">Adapt</text>
                
                <!-- Common output -->
                <text x="730" y="100" font-size="12" fill="#1E64C8" font-weight="600" text-anchor="middle">Output: 2×2</text>
                <g transform="translate(670, 110)">
                    <rect x="0" y="0" width="120" height="120" fill="#e8f2ff" stroke="#1E64C8" stroke-width="3"/>
                    <line x="60" y="0" x2="60" y2="120" stroke="#1E64C8" stroke-width="2"/>
                    <line x="0" y="60" x2="120" y2="60" stroke="#1E64C8" stroke-width="2"/>
                    
                    <text x="60" y="75" font-size="13" fill="#1E64C8" font-weight="700" text-anchor="middle">Same</text>
                    <text x="60" y="90" font-size="13" fill="#1E64C8" font-weight="700" text-anchor="middle">Output</text>
                    <text x="60" y="105" font-size="13" fill="#1E64C8" font-weight="700" text-anchor="middle">Size!</text>
                </g>
            </svg>
            
            <div class="formula-box">
                Window size: ⌊input_size / output_size⌋<br>
                Stride: ⌊input_size / output_size⌋<br>
                Automatically computed to achieve target output dimensions
            </div>
            
            <div class="feature-list">
                <div class="feature-item"><strong>Input Size Independence:</strong> Handles any input dimension while producing consistent output size, critical for networks processing varied image sizes</div>
                <div class="feature-item"><strong>Architecture Flexibility:</strong> Eliminates the need to design different networks for different input resolutions</div>
                <div class="feature-item"><strong>Multi-Scale Processing:</strong> Enables processing of image pyramids or multi-resolution inputs in a unified framework</div>
                <div class="feature-item"><strong>ROI Pooling Foundation:</strong> Forms the basis for Region of Interest pooling in object detection networks</div>
            </div>
            
            <div class="use-case">
                <div class="use-case-title">Common Use Cases:</div>
                <div class="use-case-text">Object detection (Faster R-CNN, YOLO), semantic segmentation, spatial pyramid pooling, multi-scale feature extraction, handling variable input dimensions</div>
            </div>
        </div>
        
        <div class="alternatives-box">
            <div class="alternatives-title">Modern Alternatives to Pooling</div>
            <div class="alternatives-content">
                Recent architectures increasingly replace traditional pooling with strided convolutions, which learn optimal downsampling patterns during training. Vision Transformers eliminate pooling entirely by using attention mechanisms. Some networks (like DenseNet) minimize or completely remove pooling layers, relying on architectural innovations for dimension reduction. However, pooling remains valuable for its computational efficiency, simplicity, and proven effectiveness in many applications.
            </div>
        </div>
    </div>
</body>
</html>