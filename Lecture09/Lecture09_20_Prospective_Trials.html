<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prospective Trials - Detailed Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Aptos, 'Segoe UI', sans-serif;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            width: 960px;
            padding: 35px 45px;
            background: white;
        }
        
        .title {
            font-size: 28px;
            font-weight: 600;
            color: #1E64C8;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .trial-process {
            background: #f8fbff;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .process-title {
            font-size: 18px;
            font-weight: 700;
            color: #1E64C8;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .concept-card {
            background: white;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 18px;
            transition: all 0.3s;
            min-height: 140px;
        }
        
        .concept-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(30, 100, 200, 0.2);
            background: #f8fbff;
        }
        
        .concept-name {
            font-size: 18px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 10px;
        }
        
        .concept-desc {
            font-size: 15px;
            color: #333;
            line-height: 1.5;
        }

        .detailed-section {
            margin-top: 50px;
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 30px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 3px solid #1E64C8;
        }

        .detail-card {
            background: #f8fbff;
            border: 2.5px solid #1E64C8;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 35px;
        }

        .detail-title {
            font-size: 22px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .detail-title::before {
            content: "‚óè";
            margin-right: 12px;
            font-size: 18px;
        }

        .detail-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .detail-text {
            font-size: 15px;
            color: #333;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .key-points {
            background: #e8f2ff;
            padding: 15px 20px;
            border-radius: 8px;
            border-left: 4px solid #1E64C8;
            margin-top: 15px;
        }

        .key-points-title {
            font-size: 16px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 10px;
        }

        .key-points ul {
            margin-left: 20px;
        }

        .key-points li {
            font-size: 14px;
            color: #333;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .diagram-container {
            background: white;
            padding: 25px;
            border-radius: 10px;
            border: 2px solid #d4e7ff;
            margin-top: 20px;
            text-align: center;
        }

        .diagram-title {
            font-size: 14px;
            font-weight: 600;
            color: #1E64C8;
            margin-bottom: 15px;
        }

        .example-box {
            background: #fff9e6;
            padding: 15px 20px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            margin-top: 15px;
        }

        .example-title {
            font-size: 15px;
            font-weight: 700;
            color: #d68000;
            margin-bottom: 10px;
        }

        .example-text {
            font-size: 14px;
            color: #333;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Prospective Trials: Comprehensive Guide</div>
        
        <div class="trial-process">
            <div class="process-title">Prospective Clinical Trial Workflow</div>
            <svg width="880" height="280" viewBox="0 0 880 280">
                <!-- Phase 1: Protocol Development -->
                <g transform="translate(30, 20)">
                    <rect x="0" y="0" width="180" height="100" rx="10" fill="#e8f2ff" stroke="#1E64C8" stroke-width="2.5"/>
                    <text x="90" y="20" font-size="13" fill="#1E64C8" font-weight="700" text-anchor="middle">1. Protocol Development</text>
                    
                    <g transform="translate(15, 30)">
                        <circle cx="0" cy="0" r="3" fill="#1E64C8"/>
                        <text x="8" y="4" font-size="9" fill="#666">Define hypotheses</text>
                        
                        <circle cx="0" cy="15" r="3" fill="#1E64C8"/>
                        <text x="8" y="19" font-size="9" fill="#666">Primary endpoints</text>
                        
                        <circle cx="0" cy="30" r="3" fill="#1E64C8"/>
                        <text x="8" y="34" font-size="9" fill="#666">Inclusion/exclusion</text>
                        
                        <circle cx="0" cy="45" r="3" fill="#1E64C8"/>
                        <text x="8" y="49" font-size="9" fill="#666">Sample size calc</text>
                    </g>
                    
                    <rect x="60" y="80" width="60" height="12" rx="6" fill="#ffc107" opacity="0.7"/>
                    <text x="90" y="89" font-size="8" fill="#333" text-anchor="middle">3-6 months</text>
                </g>
                
                <!-- Arrow 1 -->
                <path d="M 210 70 L 240 70" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- Phase 2: Registration -->
                <g transform="translate(240, 20)">
                    <rect x="0" y="0" width="180" height="100" rx="10" fill="#d4e7ff" stroke="#1E64C8" stroke-width="2.5"/>
                    <text x="90" y="20" font-size="13" fill="#1E64C8" font-weight="700" text-anchor="middle">2. Registration & Ethics</text>
                    
                    <g transform="translate(15, 30)">
                        <circle cx="0" cy="0" r="3" fill="#1E64C8"/>
                        <text x="8" y="4" font-size="9" fill="#666">ClinicalTrials.gov</text>
                        
                        <circle cx="0" cy="15" r="3" fill="#1E64C8"/>
                        <text x="8" y="19" font-size="9" fill="#666">IRB approval</text>
                        
                        <circle cx="0" cy="30" r="3" fill="#1E64C8"/>
                        <text x="8" y="34" font-size="9" fill="#666">Informed consent</text>
                        
                        <circle cx="0" cy="45" r="3" fill="#1E64C8"/>
                        <text x="8" y="49" font-size="9" fill="#666">Data management</text>
                    </g>
                    
                    <rect x="60" y="80" width="60" height="12" rx="6" fill="#17a2b8" opacity="0.7"/>
                    <text x="90" y="89" font-size="8" fill="#333" text-anchor="middle">2-3 months</text>
                </g>
                
                <!-- Arrow 2 -->
                <path d="M 420 70 L 450 70" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- Phase 3: Recruitment -->
                <g transform="translate(450, 20)">
                    <rect x="0" y="0" width="180" height="100" rx="10" fill="#b3d7ff" stroke="#1E64C8" stroke-width="2.5"/>
                    <text x="90" y="20" font-size="13" fill="#1E64C8" font-weight="700" text-anchor="middle">3. Patient Recruitment</text>
                    
                    <g transform="translate(15, 30)">
                        <circle cx="0" cy="0" r="3" fill="#1E64C8"/>
                        <text x="8" y="4" font-size="9" fill="#666">Multi-center setup</text>
                        
                        <circle cx="0" cy="15" r="3" fill="#1E64C8"/>
                        <text x="8" y="19" font-size="9" fill="#666">Screening process</text>
                        
                        <circle cx="0" cy="30" r="3" fill="#1E64C8"/>
                        <text x="8" y="34" font-size="9" fill="#666">Randomization</text>
                        
                        <circle cx="0" cy="45" r="3" fill="#1E64C8"/>
                        <text x="8" y="49" font-size="9" fill="#666">Baseline data</text>
                    </g>
                    
                    <rect x="60" y="80" width="60" height="12" rx="6" fill="#dc3545" opacity="0.7"/>
                    <text x="90" y="89" font-size="8" fill="#333" text-anchor="middle">6-12 months</text>
                </g>
                
                <!-- Arrow 3 -->
                <path d="M 630 70 L 660 70" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- Phase 4: Intervention -->
                <g transform="translate(660, 20)">
                    <rect x="0" y="0" width="180" height="100" rx="10" fill="#9ec5ff" stroke="#1E64C8" stroke-width="2.5"/>
                    <text x="90" y="20" font-size="13" fill="#1E64C8" font-weight="700" text-anchor="middle">4. Intervention Phase</text>
                    
                    <g transform="translate(15, 30)">
                        <circle cx="0" cy="0" r="3" fill="#1E64C8"/>
                        <text x="8" y="4" font-size="9" fill="#666">AI deployment</text>
                        
                        <circle cx="0" cy="15" r="3" fill="#1E64C8"/>
                        <text x="8" y="19" font-size="9" fill="#666">Control arm care</text>
                        
                        <circle cx="0" cy="30" r="3" fill="#1E64C8"/>
                        <text x="8" y="34" font-size="9" fill="#666">Data collection</text>
                        
                        <circle cx="0" cy="45" r="3" fill="#1E64C8"/>
                        <text x="8" y="49" font-size="9" fill="#666">Safety monitoring</text>
                    </g>
                    
                    <rect x="60" y="80" width="60" height="12" rx="6" fill="#28a745" opacity="0.7"/>
                    <text x="90" y="89" font-size="8" fill="#333" text-anchor="middle">12-24 months</text>
                </g>
                
                <!-- Randomization Diagram -->
                <g transform="translate(30, 140)">
                    <rect x="0" y="0" width="400" height="120" rx="10" fill="#fff9e6" stroke="#1E64C8" stroke-width="2"/>
                    <text x="200" y="18" font-size="12" fill="#1E64C8" font-weight="700" text-anchor="middle">Randomization Strategy</text>
                    
                    <!-- Patient Pool -->
                    <rect x="20" y="30" width="80" height="40" rx="5" fill="#e8f2ff" stroke="#1E64C8" stroke-width="1.5"/>
                    <text x="60" y="50" font-size="9" fill="#666" text-anchor="middle">Eligible</text>
                    <text x="60" y="62" font-size="9" fill="#666" text-anchor="middle">Patients</text>
                    
                    <!-- Randomization -->
                    <circle cx="150" cy="50" r="20" fill="#1E64C8" opacity="0.2" stroke="#1E64C8" stroke-width="2"/>
                    <text x="150" y="48" font-size="9" fill="#1E64C8" font-weight="600" text-anchor="middle">Random</text>
                    <text x="150" y="58" font-size="9" fill="#1E64C8" font-weight="600" text-anchor="middle">Assign</text>
                    
                    <!-- Arms -->
                    <rect x="200" y="25" width="80" height="25" rx="5" fill="#28a745" opacity="0.3" stroke="#1E64C8" stroke-width="1.5"/>
                    <text x="240" y="40" font-size="9" fill="#333" text-anchor="middle">AI-Assisted</text>
                    
                    <rect x="200" y="55" width="80" height="25" rx="5" fill="#dc3545" opacity="0.3" stroke="#1E64C8" stroke-width="1.5"/>
                    <text x="240" y="70" font-size="9" fill="#333" text-anchor="middle">Standard Care</text>
                    
                    <!-- Outcomes -->
                    <rect x="300" y="30" width="80" height="40" rx="5" fill="#e8ffe8" stroke="#1E64C8" stroke-width="1.5"/>
                    <text x="340" y="45" font-size="9" fill="#666" text-anchor="middle">Compare</text>
                    <text x="340" y="57" font-size="9" fill="#666" text-anchor="middle">Outcomes</text>
                    
                    <!-- Arrows -->
                    <path d="M 100 50 L 130 50" stroke="#1E64C8" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                    <path d="M 170 40 L 200 37.5" stroke="#1E64C8" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                    <path d="M 170 60 L 200 67.5" stroke="#1E64C8" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                    <path d="M 280 37.5 L 300 40" stroke="#1E64C8" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                    <path d="M 280 67.5 L 300 60" stroke="#1E64C8" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                    
                    <!-- Blinding note -->
                    <text x="200" y="100" font-size="9" fill="#1E64C8" font-weight="600" text-anchor="middle">‚ö†Ô∏è Blinding challenges with AI interventions</text>
                </g>
                
                <!-- Analysis Plan -->
                <g transform="translate(460, 140)">
                    <rect x="0" y="0" width="390" height="120" rx="10" fill="#e6f3ff" stroke="#1E64C8" stroke-width="2"/>
                    <text x="195" y="18" font-size="12" fill="#1E64C8" font-weight="700" text-anchor="middle">Statistical Analysis Plan</text>
                    
                    <!-- Primary Analysis -->
                    <rect x="15" y="28" width="180" height="40" rx="5" fill="white" stroke="#1E64C8" stroke-width="1.5"/>
                    <text x="105" y="42" font-size="10" fill="#1E64C8" font-weight="600" text-anchor="middle">Primary Analysis</text>
                    <text x="105" y="54" font-size="9" fill="#666" text-anchor="middle">‚Ä¢ Intention-to-treat (ITT)</text>
                    <text x="105" y="64" font-size="9" fill="#666" text-anchor="middle">‚Ä¢ Pre-specified endpoints</text>
                    
                    <!-- Secondary Analysis -->
                    <rect x="205" y="28" width="170" height="40" rx="5" fill="white" stroke="#1E64C8" stroke-width="1.5"/>
                    <text x="290" y="42" font-size="10" fill="#1E64C8" font-weight="600" text-anchor="middle">Secondary Analysis</text>
                    <text x="290" y="54" font-size="9" fill="#666" text-anchor="middle">‚Ä¢ Per-protocol</text>
                    <text x="290" y="64" font-size="9" fill="#666" text-anchor="middle">‚Ä¢ Subgroup analysis</text>
                    
                    <!-- Power Calculation -->
                    <rect x="15" y="75" width="360" height="35" rx="5" fill="#f0f5fc" stroke="#1E64C8" stroke-width="1"/>
                    <text x="195" y="88" font-size="9" fill="#1E64C8" font-weight="600" text-anchor="middle">Sample Size: N=500 (250 per arm)</text>
                    <text x="195" y="100" font-size="8" fill="#666" text-anchor="middle">Power: 80% | Alpha: 0.05 | Effect size: 10% improvement | Dropout: 15%</text>
                </g>
                
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#1E64C8" />
                    </marker>
                </defs>
            </svg>
        </div>
        
        <div class="concept-grid">
            <div class="concept-card">
                <div class="concept-name">Trial Protocols</div>
                <div class="concept-desc">Pre-specified hypotheses and endpoints. Registered in clinicaltrials.gov</div>
            </div>
        
            <div class="concept-card">
                <div class="concept-name">Endpoint Selection</div>
                <div class="concept-desc">Diagnostic accuracy vs clinical outcomes. Hard outcomes (mortality) vs surrogate markers</div>
            </div>
        
            <div class="concept-card">
                <div class="concept-name">Sample Size</div>
                <div class="concept-desc">Power analysis for adequate statistical power. Account for prevalence and effect size</div>
            </div>
        
            <div class="concept-card">
                <div class="concept-name">Randomization</div>
                <div class="concept-desc">AI-assisted vs standard of care. Cluster randomization by site to avoid contamination</div>
            </div>
        
            <div class="concept-card">
                <div class="concept-name">Analysis Plans</div>
                <div class="concept-desc">Pre-specified statistical analysis. ITT vs per-protocol analysis</div>
            </div>
        
        </div>

        <!-- Detailed Sections Start Here -->
        <div class="detailed-section">
            <div class="section-title">Detailed Explanations & Examples</div>

            <!-- 1. Trial Protocols -->
            <div class="detail-card">
                <div class="detail-title">1. Trial Protocols</div>
                
                <div class="detail-content">
                    <div class="detail-text">
                        A trial protocol is a comprehensive document that serves as the blueprint for conducting a prospective clinical trial. It defines the study objectives, design, methodology, statistical considerations, and organization of the trial. For AI/ML medical devices, protocols must be particularly rigorous as they establish the scientific validity and regulatory compliance framework.
                    </div>
                    
                    <div class="detail-text">
                        <strong>Registration requirement:</strong> All clinical trials must be registered in publicly accessible databases (e.g., ClinicalTrials.gov) before patient enrollment begins. This promotes transparency, prevents selective reporting, and allows the scientific community to track ongoing research. The registration must include key information such as the primary hypothesis, study design, eligibility criteria, interventions, and primary outcomes.
                    </div>

                    <div class="key-points">
                        <div class="key-points-title">Key Components of Trial Protocols:</div>
                        <ul>
                            <li><strong>Study Objectives:</strong> Clear statement of primary and secondary hypotheses</li>
                            <li><strong>Study Design:</strong> Randomized controlled trial (RCT), parallel-group, crossover, or adaptive design</li>
                            <li><strong>Eligibility Criteria:</strong> Inclusion and exclusion criteria defining the target population</li>
                            <li><strong>Intervention Description:</strong> Detailed specification of the AI system and control intervention</li>
                            <li><strong>Primary Endpoints:</strong> Main outcomes to be measured (must be clinically relevant)</li>
                            <li><strong>Data Management:</strong> Procedures for data collection, quality control, and security</li>
                            <li><strong>Ethical Considerations:</strong> Informed consent process and patient protection measures</li>
                        </ul>
                    </div>

                    <div class="diagram-container">
                        <div class="diagram-title">Protocol Development Timeline</div>
                        <svg width="800" height="200" viewBox="0 0 800 200">
                            <!-- Timeline -->
                            <line x1="50" y1="100" x2="750" y2="100" stroke="#1E64C8" stroke-width="3"/>
                            
                            <!-- Stage 1 -->
                            <circle cx="100" cy="100" r="8" fill="#1E64C8"/>
                            <text x="100" y="130" font-size="11" fill="#333" text-anchor="middle" font-weight="600">Literature</text>
                            <text x="100" y="145" font-size="11" fill="#333" text-anchor="middle" font-weight="600">Review</text>
                            <text x="100" y="70" font-size="10" fill="#666" text-anchor="middle">Week 1-2</text>
                            
                            <!-- Stage 2 -->
                            <circle cx="250" cy="100" r="8" fill="#1E64C8"/>
                            <text x="250" y="130" font-size="11" fill="#333" text-anchor="middle" font-weight="600">Hypothesis</text>
                            <text x="250" y="145" font-size="11" fill="#333" text-anchor="middle" font-weight="600">Formation</text>
                            <text x="250" y="70" font-size="10" fill="#666" text-anchor="middle">Week 3-4</text>
                            
                            <!-- Stage 3 -->
                            <circle cx="400" cy="100" r="8" fill="#1E64C8"/>
                            <text x="400" y="130" font-size="11" fill="#333" text-anchor="middle" font-weight="600">Protocol</text>
                            <text x="400" y="145" font-size="11" fill="#333" text-anchor="middle" font-weight="600">Drafting</text>
                            <text x="400" y="70" font-size="10" fill="#666" text-anchor="middle">Week 5-12</text>
                            
                            <!-- Stage 4 -->
                            <circle cx="550" cy="100" r="8" fill="#1E64C8"/>
                            <text x="550" y="130" font-size="11" fill="#333" text-anchor="middle" font-weight="600">Stakeholder</text>
                            <text x="550" y="145" font-size="11" fill="#333" text-anchor="middle" font-weight="600">Review</text>
                            <text x="550" y="70" font-size="10" fill="#666" text-anchor="middle">Week 13-16</text>
                            
                            <!-- Stage 5 -->
                            <circle cx="700" cy="100" r="8" fill="#28a745"/>
                            <text x="700" y="130" font-size="11" fill="#333" text-anchor="middle" font-weight="600">Registration</text>
                            <text x="700" y="145" font-size="11" fill="#333" text-anchor="middle" font-weight="600">& Approval</text>
                            <text x="700" y="70" font-size="10" fill="#666" text-anchor="middle">Week 17-20</text>
                        </svg>
                    </div>

                    <div class="example-box">
                        <div class="example-title">üîç Example: AI-Assisted Lung Cancer Detection Trial</div>
                        <div class="example-text">
                            <strong>Study Title:</strong> "Prospective Randomized Trial of AI-Assisted CT Interpretation for Early Detection of Lung Nodules"<br><br>
                            <strong>Primary Hypothesis:</strong> AI assistance will increase the detection rate of lung nodules ‚â•6mm compared to standard radiologist interpretation alone.<br><br>
                            <strong>Design:</strong> Multi-center, parallel-group RCT with 1:1 randomization<br><br>
                            <strong>Registration:</strong> NCT12345678 (ClinicalTrials.gov)<br><br>
                            <strong>Primary Endpoint:</strong> Sensitivity for detecting nodules ‚â•6mm confirmed by follow-up CT at 3 months
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. Endpoint Selection -->
            <div class="detail-card">
                <div class="detail-title">2. Endpoint Selection</div>
                
                <div class="detail-content">
                    <div class="detail-text">
                        Endpoint selection is one of the most critical decisions in trial design. The choice between different types of endpoints can dramatically affect the trial's feasibility, duration, cost, and ultimately its clinical impact. For AI medical devices, there is often a tension between using technical performance metrics (e.g., diagnostic accuracy) versus patient-centered clinical outcomes (e.g., mortality reduction).
                    </div>
                    
                    <div class="detail-text">
                        <strong>Hierarchy of Endpoints:</strong> Clinical outcomes such as mortality, morbidity, and quality of life are considered the gold standard but require larger sample sizes and longer follow-up. Surrogate endpoints (e.g., detection rates, time to diagnosis) are more feasible but require validation that improvements in these measures translate to clinical benefits.
                    </div>

                    <div class="key-points">
                        <div class="key-points-title">Types of Endpoints:</div>
                        <ul>
                            <li><strong>Hard Clinical Outcomes:</strong> Death, myocardial infarction, stroke, hospital admission</li>
                            <li><strong>Surrogate Markers:</strong> Detection sensitivity, specificity, time to diagnosis, treatment initiation</li>
                            <li><strong>Process Measures:</strong> Reading time, diagnostic confidence, inter-reader agreement</li>
                            <li><strong>Patient-Reported Outcomes:</strong> Quality of life, satisfaction, anxiety levels</li>
                            <li><strong>Economic Outcomes:</strong> Cost-effectiveness, resource utilization, length of stay</li>
                        </ul>
                    </div>

                    <div class="diagram-container">
                        <div class="diagram-title">Endpoint Hierarchy and Trade-offs</div>
                        <svg width="800" height="300" viewBox="0 0 800 300">
                            <!-- Pyramid structure -->
                            <defs>
                                <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#28a745;stop-opacity:0.3" />
                                    <stop offset="100%" style="stop-color:#28a745;stop-opacity:0.7" />
                                </linearGradient>
                                <linearGradient id="grad2" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#ffc107;stop-opacity:0.3" />
                                    <stop offset="100%" style="stop-color:#ffc107;stop-opacity:0.7" />
                                </linearGradient>
                                <linearGradient id="grad3" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#dc3545;stop-opacity:0.3" />
                                    <stop offset="100%" style="stop-color:#dc3545;stop-opacity:0.7" />
                                </linearGradient>
                            </defs>
                            
                            <!-- Level 3: Hard Outcomes (Top) -->
                            <polygon points="400,30 300,100 500,100" fill="url(#grad1)" stroke="#28a745" stroke-width="2"/>
                            <text x="400" y="65" font-size="13" fill="#333" font-weight="600" text-anchor="middle">Hard Clinical</text>
                            <text x="400" y="82" font-size="13" fill="#333" font-weight="600" text-anchor="middle">Outcomes</text>
                            
                            <!-- Level 2: Surrogate (Middle) -->
                            <polygon points="300,100 250,170 550,170" fill="url(#grad2)" stroke="#ffc107" stroke-width="2"/>
                            <text x="400" y="130" font-size="13" fill="#333" font-weight="600" text-anchor="middle">Surrogate</text>
                            <text x="400" y="147" font-size="13" fill="#333" font-weight="600" text-anchor="middle">Endpoints</text>
                            
                            <!-- Level 1: Technical (Bottom) -->
                            <polygon points="250,170 150,240 650,240" fill="url(#grad3)" stroke="#dc3545" stroke-width="2"/>
                            <text x="400" y="200" font-size="13" fill="#333" font-weight="600" text-anchor="middle">Technical</text>
                            <text x="400" y="217" font-size="13" fill="#333" font-weight="600" text-anchor="middle">Performance</text>
                            
                            <!-- Labels on right side -->
                            <g transform="translate(680, 60)">
                                <text x="0" y="0" font-size="11" fill="#28a745" font-weight="600">‚úì Most Clinically Relevant</text>
                                <text x="0" y="15" font-size="10" fill="#666">‚úó Requires large N</text>
                                <text x="0" y="28" font-size="10" fill="#666">‚úó Long follow-up</text>
                            </g>
                            
                            <g transform="translate(680, 130)">
                                <text x="0" y="0" font-size="11" fill="#ffc107" font-weight="600">~ Moderate Relevance</text>
                                <text x="0" y="15" font-size="10" fill="#666">~ Moderate N needed</text>
                                <text x="0" y="28" font-size="10" fill="#666">~ Shorter follow-up</text>
                            </g>
                            
                            <g transform="translate(680, 200)">
                                <text x="0" y="0" font-size="11" fill="#dc3545" font-weight="600">‚úó Limited Clinical Impact</text>
                                <text x="0" y="15" font-size="10" fill="#666">‚úì Small N sufficient</text>
                                <text x="0" y="28" font-size="10" fill="#666">‚úì Quick results</text>
                            </g>
                            
                            <!-- Bottom labels -->
                            <text x="150" y="265" font-size="11" fill="#1E64C8" font-weight="600">‚Üê Easier to measure</text>
                            <text x="550" y="265" font-size="11" fill="#1E64C8" font-weight="600" text-anchor="end">Higher clinical value ‚Üí</text>
                        </svg>
                    </div>

                    <div class="example-box">
                        <div class="example-title">üîç Example: Diabetic Retinopathy AI Screening</div>
                        <div class="example-text">
                            <strong>Primary Endpoint Options:</strong><br><br>
                            <strong>Option A (Technical):</strong> Sensitivity and specificity for detecting referable diabetic retinopathy<br>
                            ‚Üí Fast, requires N=200-500, results in 6 months<br><br>
                            <strong>Option B (Surrogate):</strong> Proportion of patients receiving timely ophthalmology referral<br>
                            ‚Üí Moderate duration, requires N=1,000-2,000, results in 12-18 months<br><br>
                            <strong>Option C (Hard Outcome):</strong> Incidence of vision loss at 2 years<br>
                            ‚Üí Long duration, requires N=5,000-10,000, results in 30+ months<br><br>
                            <strong>Selected Approach:</strong> Primary endpoint = referral rates (surrogate), with vision outcomes as long-term secondary endpoint
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. Sample Size -->
            <div class="detail-card">
                <div class="detail-title">3. Sample Size Calculation</div>
                
                <div class="detail-content">
                    <div class="detail-text">
                        Sample size determination is crucial for ensuring adequate statistical power to detect clinically meaningful differences while avoiding unnecessarily large and costly trials. The calculation depends on the expected effect size, baseline event rates, desired statistical power (typically 80-90%), and significance level (typically Œ±=0.05). For AI trials, special considerations include the prevalence of the target condition and expected improvement over standard care.
                    </div>
                    
                    <div class="detail-text">
                        <strong>Power Analysis Components:</strong> The statistical power of a trial represents the probability of detecting a true effect when it exists. Underpowered studies risk missing real benefits (Type II error), while overpowered studies waste resources. Sample size calculations must also account for expected dropout rates, protocol violations, and crossover between study arms.
                    </div>

                    <div class="key-points">
                        <div class="key-points-title">Sample Size Calculation Factors:</div>
                        <ul>
                            <li><strong>Effect Size:</strong> Minimum clinically important difference (MCID) to detect</li>
                            <li><strong>Statistical Power:</strong> Typically 80% (Œ≤=0.20) or 90% (Œ≤=0.10)</li>
                            <li><strong>Significance Level:</strong> Usually Œ±=0.05 (two-sided) or Œ±=0.025 (one-sided)</li>
                            <li><strong>Disease Prevalence:</strong> Proportion of population with target condition</li>
                            <li><strong>Baseline Performance:</strong> Expected performance of control group</li>
                            <li><strong>Dropout Rate:</strong> Expected loss to follow-up (typically 10-20%)</li>
                            <li><strong>Study Design:</strong> Parallel vs crossover, clustering effects</li>
                        </ul>
                    </div>

                    <div class="diagram-container">
                        <div class="diagram-title">Sample Size Calculation Example</div>
                        <svg width="800" height="400" viewBox="0 0 800 400">
                            <!-- Formula Box -->
                            <rect x="50" y="20" width="700" height="80" rx="10" fill="#e8f2ff" stroke="#1E64C8" stroke-width="2"/>
                            <text x="400" y="45" font-size="14" fill="#1E64C8" font-weight="700" text-anchor="middle">Sample Size Formula (Two Proportions)</text>
                            
                            <text x="400" y="70" font-size="13" fill="#333" text-anchor="middle">n = 2 √ó [Z</text>
                            <text x="430" y="73" font-size="9" fill="#333">Œ±/2</text>
                            <text x="445" y="70" font-size="13" fill="#333">+ Z</text>
                            <text x="463" y="73" font-size="9" fill="#333">Œ≤</text>
                            <text x="472" y="70" font-size="13" fill="#333">]¬≤ √ó pÃÑ(1-pÃÑ) / (p</text>
                            <text x="550" y="73" font-size="9" fill="#333">1</text>
                            <text x="560" y="70" font-size="13" fill="#333">- p</text>
                            <text x="580" y="73" font-size="9" fill="#333">2</text>
                            <text x="588" y="70" font-size="13" fill="#333">)¬≤</text>
                            
                            <text x="400" y="90" font-size="10" fill="#666" text-anchor="middle">where pÃÑ = (p‚ÇÅ + p‚ÇÇ) / 2</text>
                            
                            <!-- Example Calculation -->
                            <rect x="50" y="120" width="340" height="260" rx="10" fill="#fff9e6" stroke="#ffc107" stroke-width="2"/>
                            <text x="220" y="145" font-size="13" fill="#d68000" font-weight="700" text-anchor="middle">Example Calculation</text>
                            
                            <g transform="translate(70, 160)">
                                <text x="0" y="0" font-size="11" fill="#333" font-weight="600">Given Parameters:</text>
                                <text x="0" y="18" font-size="10" fill="#333">‚Ä¢ Control sensitivity (p‚ÇÇ) = 75%</text>
                                <text x="0" y="33" font-size="10" fill="#333">‚Ä¢ AI sensitivity (p‚ÇÅ) = 85%</text>
                                <text x="0" y="48" font-size="10" fill="#333">‚Ä¢ Effect size = 10% improvement</text>
                                <text x="0" y="63" font-size="10" fill="#333">‚Ä¢ Power (1-Œ≤) = 80%</text>
                                <text x="0" y="78" font-size="10" fill="#333">‚Ä¢ Alpha (Œ±) = 0.05 (two-sided)</text>
                                <text x="0" y="93" font-size="10" fill="#333">‚Ä¢ Dropout rate = 15%</text>
                                
                                <line x1="0" y1="105" x2="300" y2="105" stroke="#d68000" stroke-width="1"/>
                                
                                <text x="0" y="122" font-size="11" fill="#333" font-weight="600">Calculation:</text>
                                <text x="0" y="140" font-size="10" fill="#333">Z</text>
                                <text x="10" y="143" font-size="8" fill="#333">Œ±/2</text>
                                <text x="30" y="140" font-size="10" fill="#333">= 1.96 (for Œ±=0.05)</text>
                                <text x="0" y="155" font-size="10" fill="#333">Z</text>
                                <text x="10" y="158" font-size="8" fill="#333">Œ≤</text>
                                <text x="20" y="155" font-size="10" fill="#333">= 0.84 (for power=80%)</text>
                                <text x="0" y="170" font-size="10" fill="#333">pÃÑ = (0.85 + 0.75) / 2 = 0.80</text>
                                
                                <text x="0" y="190" font-size="10" fill="#333">n = 2 √ó (1.96 + 0.84)¬≤ √ó 0.80 √ó 0.20</text>
                                <text x="20" y="205" font-size="10" fill="#333">/ (0.85 - 0.75)¬≤</text>
                                <text x="0" y="220" font-size="10" fill="#333">n ‚âà 251 per group</text>
                                <text x="0" y="235" font-size="10" fill="#333">Adjusted for dropout: 251 / 0.85</text>
                                <text x="0" y="250" font-size="10" fill="#333" font-weight="700">Final: N = 296 per group</text>
                            </g>
                            
                            <!-- Impact visualization -->
                            <rect x="410" y="120" width="340" height="260" rx="10" fill="#e6f3ff" stroke="#1E64C8" stroke-width="2"/>
                            <text x="580" y="145" font-size="13" fill="#1E64C8" font-weight="700" text-anchor="middle">Effect Size Impact</text>
                            
                            <!-- Bar chart showing sample size vs effect size -->
                            <g transform="translate(440, 165)">
                                <!-- Axis -->
                                <line x1="0" y1="180" x2="280" y2="180" stroke="#333" stroke-width="1"/>
                                <line x1="0" y1="0" x2="0" y2="180" stroke="#333" stroke-width="1"/>
                                
                                <!-- Y-axis labels -->
                                <text x="-10" y="5" font-size="9" fill="#666" text-anchor="end">1000</text>
                                <text x="-10" y="95" font-size="9" fill="#666" text-anchor="end">500</text>
                                <text x="-10" y="185" font-size="9" fill="#666" text-anchor="end">0</text>
                                
                                <!-- Bars -->
                                <rect x="20" y="18" width="50" height="162" fill="#dc3545" opacity="0.7"/>
                                <text x="45" y="195" font-size="9" fill="#333" text-anchor="middle">5%</text>
                                <text x="45" y="10" font-size="9" fill="#333" font-weight="600" text-anchor="middle">940</text>
                                
                                <rect x="90" y="54" width="50" height="126" fill="#ffc107" opacity="0.7"/>
                                <text x="115" y="195" font-size="9" fill="#333" text-anchor="middle">10%</text>
                                <text x="115" y="46" font-size="9" fill="#333" font-weight="600" text-anchor="middle">296</text>
                                
                                <rect x="160" y="108" width="50" height="72" fill="#28a745" opacity="0.7"/>
                                <text x="185" y="195" font-size="9" fill="#333" text-anchor="middle">15%</text>
                                <text x="185" y="100" font-size="9" fill="#333" font-weight="600" text-anchor="middle">144</text>
                                
                                <rect x="230" y="144" width="50" height="36" fill="#1E64C8" opacity="0.7"/>
                                <text x="255" y="195" font-size="9" fill="#333" text-anchor="middle">20%</text>
                                <text x="255" y="136" font-size="9" fill="#333" font-weight="600" text-anchor="middle">88</text>
                                
                                <!-- Labels -->
                                <text x="140" y="215" font-size="10" fill="#1E64C8" font-weight="600" text-anchor="middle">Effect Size</text>
                                <text x="-30" y="90" font-size="10" fill="#1E64C8" font-weight="600" text-anchor="middle" transform="rotate(-90 -30 90)">Sample Size per Group</text>
                            </g>
                        </svg>
                    </div>

                    <div class="example-box">
                        <div class="example-title">üîç Example: AI-Based Stroke Detection</div>
                        <div class="example-text">
                            <strong>Clinical Scenario:</strong> Emergency department AI system for rapid large vessel occlusion (LVO) detection on non-contrast CT<br><br>
                            <strong>Parameters:</strong><br>
                            ‚Ä¢ Expected LVO prevalence in suspected stroke patients: 15%<br>
                            ‚Ä¢ Standard radiologist sensitivity: 82%<br>
                            ‚Ä¢ Targeted AI-assisted sensitivity: 92% (10% absolute improvement)<br>
                            ‚Ä¢ Power: 90%, Alpha: 0.05 (two-sided)<br>
                            ‚Ä¢ Expected dropout/protocol violations: 10%<br><br>
                            <strong>Calculation Result:</strong><br>
                            ‚Ä¢ Required sample with LVO: 350 patients<br>
                            ‚Ä¢ Total patients to screen: 350 / 0.15 = 2,334 patients<br>
                            ‚Ä¢ Adjusted for dropout: 2,334 / 0.90 = 2,593 patients<br>
                            ‚Ä¢ Per site (10 centers): ~260 patients over 12 months
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4. Randomization -->
            <div class="detail-card">
                <div class="detail-title">4. Randomization Strategies</div>
                
                <div class="detail-content">
                    <div class="detail-text">
                        Randomization is the cornerstone of prospective trials, ensuring that treatment groups are comparable at baseline and that observed differences can be attributed to the intervention rather than confounding factors. For AI medical device trials, proper randomization methods help mitigate selection bias, ensure balanced groups, and maintain the scientific validity of results. However, AI interventions present unique challenges for randomization and blinding.
                    </div>
                    
                    <div class="detail-text">
                        <strong>Randomization Levels:</strong> Randomization can occur at different levels - patient level, provider level, or site level. For AI trials, cluster randomization (by site or provider) is often preferred to prevent contamination, where knowledge of AI recommendations might influence the control group's management. Each approach has distinct advantages and statistical considerations.
                    </div>

                    <div class="key-points">
                        <div class="key-points-title">Randomization Methods:</div>
                        <ul>
                            <li><strong>Simple Randomization:</strong> Pure random assignment (like coin flip), may result in imbalanced groups</li>
                            <li><strong>Block Randomization:</strong> Ensures balance over blocks of patients (e.g., blocks of 4 or 6)</li>
                            <li><strong>Stratified Randomization:</strong> Separate randomization within important subgroups (e.g., by disease severity)</li>
                            <li><strong>Cluster Randomization:</strong> Randomize entire sites or providers to avoid contamination</li>
                            <li><strong>Adaptive Randomization:</strong> Adjust allocation ratios based on accumulating data</li>
                            <li><strong>Minimization:</strong> Balance multiple prognostic factors simultaneously</li>
                        </ul>
                    </div>

                    <div class="diagram-container">
                        <div class="diagram-title">Randomization Methods Comparison</div>
                        <svg width="800" height="450" viewBox="0 0 800 450">
                            <!-- Individual Randomization -->
                            <g transform="translate(50, 20)">
                                <rect x="0" y="0" width="330" height="200" rx="10" fill="#e8f2ff" stroke="#1E64C8" stroke-width="2"/>
                                <text x="165" y="25" font-size="13" fill="#1E64C8" font-weight="700" text-anchor="middle">Individual Randomization</text>
                                
                                <!-- Patients -->
                                <circle cx="40" cy="60" r="8" fill="#666"/>
                                <circle cx="70" cy="60" r="8" fill="#666"/>
                                <circle cx="100" cy="60" r="8" fill="#666"/>
                                <circle cx="130" cy="60" r="8" fill="#666"/>
                                <circle cx="40" cy="85" r="8" fill="#666"/>
                                <circle cx="70" cy="85" r="8" fill="#666"/>
                                <circle cx="100" cy="85" r="8" fill="#666"/>
                                <circle cx="130" cy="85" r="8" fill="#666"/>
                                
                                <!-- Randomization -->
                                <path d="M 170 72 L 200 65 M 170 72 L 200 80" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowhead)"/>
                                <text x="185" y="95" font-size="10" fill="#1E64C8" font-weight="600" text-anchor="middle">Random</text>
                                
                                <!-- Arms -->
                                <rect x="210" y="50" width="100" height="25" rx="5" fill="#28a745" opacity="0.3" stroke="#28a745" stroke-width="2"/>
                                <text x="260" y="67" font-size="10" fill="#333" text-anchor="middle">AI Group</text>
                                <circle cx="230" cy="95" r="6" fill="#28a745"/>
                                <circle cx="250" cy="95" r="6" fill="#28a745"/>
                                <circle cx="270" cy="95" r="6" fill="#28a745"/>
                                <circle cx="290" cy="95" r="6" fill="#28a745"/>
                                
                                <rect x="210" y="110" width="100" height="25" rx="5" fill="#dc3545" opacity="0.3" stroke="#dc3545" stroke-width="2"/>
                                <text x="260" y="127" font-size="10" fill="#333" text-anchor="middle">Control</text>
                                <circle cx="230" cy="155" r="6" fill="#dc3545"/>
                                <circle cx="250" cy="155" r="6" fill="#dc3545"/>
                                <circle cx="270" cy="155" r="6" fill="#dc3545"/>
                                <circle cx="290" cy="155" r="6" fill="#dc3545"/>
                                
                                <!-- Pros/Cons -->
                                <text x="10" y="180" font-size="9" fill="#28a745" font-weight="600">‚úì Simple, balanced</text>
                                <text x="165" y="180" font-size="9" fill="#dc3545" font-weight="600">‚úó Risk of contamination</text>
                            </g>
                            
                            <!-- Cluster Randomization -->
                            <g transform="translate(420, 20)">
                                <rect x="0" y="0" width="330" height="200" rx="10" fill="#fff9e6" stroke="#ffc107" stroke-width="2"/>
                                <text x="165" y="25" font-size="13" fill="#d68000" font-weight="700" text-anchor="middle">Cluster Randomization</text>
                                
                                <!-- Site 1 -->
                                <rect x="20" y="45" width="70" height="50" rx="5" fill="#e8f2ff" stroke="#1E64C8" stroke-width="1.5"/>
                                <text x="55" y="60" font-size="9" fill="#666" text-anchor="middle">Site A</text>
                                <circle cx="35" cy="75" r="4" fill="#666"/>
                                <circle cx="50" cy="75" r="4" fill="#666"/>
                                <circle cx="65" cy="75" r="4" fill="#666"/>
                                <circle cx="75" cy="75" r="4" fill="#666"/>
                                
                                <!-- Site 2 -->
                                <rect x="20" y="105" width="70" height="50" rx="5" fill="#e8f2ff" stroke="#1E64C8" stroke-width="1.5"/>
                                <text x="55" y="120" font-size="9" fill="#666" text-anchor="middle">Site B</text>
                                <circle cx="35" cy="135" r="4" fill="#666"/>
                                <circle cx="50" cy="135" r="4" fill="#666"/>
                                <circle cx="65" cy="135" r="4" fill="#666"/>
                                <circle cx="75" cy="135" r="4" fill="#666"/>
                                
                                <!-- Randomization -->
                                <path d="M 100 70 L 150 65 M 100 130 L 150 135" stroke="#ffc107" stroke-width="2"/>
                                <text x="125" y="95" font-size="10" fill="#d68000" font-weight="600" text-anchor="middle">Random</text>
                                <text x="125" y="108" font-size="10" fill="#d68000" font-weight="600" text-anchor="middle">by Site</text>
                                
                                <!-- Assigned Sites -->
                                <rect x="160" y="45" width="70" height="50" rx="5" fill="#28a745" opacity="0.3" stroke="#28a745" stroke-width="2"/>
                                <text x="195" y="60" font-size="9" fill="#333" text-anchor="middle">AI Site</text>
                                <circle cx="175" cy="75" r="4" fill="#28a745"/>
                                <circle cx="190" cy="75" r="4" fill="#28a745"/>
                                <circle cx="205" cy="75" r="4" fill="#28a745"/>
                                <circle cx="215" cy="75" r="4" fill="#28a745"/>
                                
                                <rect x="240" y="105" width="70" height="50" rx="5" fill="#dc3545" opacity="0.3" stroke="#dc3545" stroke-width="2"/>
                                <text x="275" y="120" font-size="9" fill="#333" text-anchor="middle">Control Site</text>
                                <circle cx="255" cy="135" r="4" fill="#dc3545"/>
                                <circle cx="270" cy="135" r="4" fill="#dc3545"/>
                                <circle cx="285" cy="135" r="4" fill="#dc3545"/>
                                <circle cx="295" cy="135" r="4" fill="#dc3545"/>
                                
                                <!-- Pros/Cons -->
                                <text x="10" y="180" font-size="9" fill="#28a745" font-weight="600">‚úì Prevents contamination</text>
                                <text x="165" y="180" font-size="9" fill="#dc3545" font-weight="600">‚úó Requires larger N</text>
                            </g>
                            
                            <!-- Stratified Randomization -->
                            <g transform="translate(50, 240)">
                                <rect x="0" y="0" width="700" height="190" rx="10" fill="#e6f3ff" stroke="#1E64C8" stroke-width="2"/>
                                <text x="350" y="25" font-size="13" fill="#1E64C8" font-weight="700" text-anchor="middle">Stratified Randomization (by Disease Severity)</text>
                                
                                <!-- Stratum 1: Mild -->
                                <rect x="20" y="40" width="200" height="60" rx="5" fill="#e8ffe8" stroke="#28a745" stroke-width="1.5"/>
                                <text x="120" y="55" font-size="11" fill="#28a745" font-weight="600" text-anchor="middle">Mild Cases (Stratum 1)</text>
                                <circle cx="40" cy="75" r="5" fill="#666"/>
                                <circle cx="60" cy="75" r="5" fill="#666"/>
                                <circle cx="80" cy="75" r="5" fill="#666"/>
                                <circle cx="100" cy="75" r="5" fill="#666"/>
                                
                                <path d="M 120 80 L 140 70 M 120 80 L 140 90" stroke="#28a745" stroke-width="1.5"/>
                                
                                <circle cx="160" cy="70" r="5" fill="#28a745"/>
                                <circle cx="180" cy="70" r="5" fill="#28a745"/>
                                <circle cx="160" cy="90" r="5" fill="#dc3545"/>
                                <circle cx="180" cy="90" r="5" fill="#dc3545"/>
                                
                                <!-- Stratum 2: Moderate -->
                                <rect x="250" y="40" width="200" height="60" rx="5" fill="#fff9e6" stroke="#ffc107" stroke-width="1.5"/>
                                <text x="350" y="55" font-size="11" fill="#d68000" font-weight="600" text-anchor="middle">Moderate (Stratum 2)</text>
                                <circle cx="270" cy="75" r="5" fill="#666"/>
                                <circle cx="290" cy="75" r="5" fill="#666"/>
                                <circle cx="310" cy="75" r="5" fill="#666"/>
                                <circle cx="330" cy="75" r="5" fill="#666"/>
                                
                                <path d="M 350 80 L 370 70 M 350 80 L 370 90" stroke="#ffc107" stroke-width="1.5"/>
                                
                                <circle cx="390" cy="70" r="5" fill="#28a745"/>
                                <circle cx="410" cy="70" r="5" fill="#28a745"/>
                                <circle cx="390" cy="90" r="5" fill="#dc3545"/>
                                <circle cx="410" cy="90" r="5" fill="#dc3545"/>
                                
                                <!-- Stratum 3: Severe -->
                                <rect x="480" y="40" width="200" height="60" rx="5" fill="#ffe8e8" stroke="#dc3545" stroke-width="1.5"/>
                                <text x="580" y="55" font-size="11" fill="#dc3545" font-weight="600" text-anchor="middle">Severe (Stratum 3)</text>
                                <circle cx="500" cy="75" r="5" fill="#666"/>
                                <circle cx="520" cy="75" r="5" fill="#666"/>
                                <circle cx="540" cy="75" r="5" fill="#666"/>
                                <circle cx="560" cy="75" r="5" fill="#666"/>
                                
                                <path d="M 580 80 L 600 70 M 580 80 L 600 90" stroke="#dc3545" stroke-width="1.5"/>
                                
                                <circle cx="620" cy="70" r="5" fill="#28a745"/>
                                <circle cx="640" cy="70" r="5" fill="#28a745"/>
                                <circle cx="620" cy="90" r="5" fill="#dc3545"/>
                                <circle cx="640" cy="90" r="5" fill="#dc3545"/>
                                
                                <!-- Legend -->
                                <rect x="20" y="120" width="15" height="15" fill="#28a745" opacity="0.5"/>
                                <text x="40" y="132" font-size="10" fill="#333">AI Group</text>
                                
                                <rect x="120" y="120" width="15" height="15" fill="#dc3545" opacity="0.5"/>
                                <text x="140" y="132" font-size="10" fill="#333">Control Group</text>
                                
                                <!-- Benefits -->
                                <text x="20" y="160" font-size="10" fill="#1E64C8" font-weight="600">Benefits:</text>
                                <text x="20" y="175" font-size="9" fill="#333">‚Ä¢ Ensures balance across important prognostic factors</text>
                            </g>
                        </svg>
                    </div>

                    <div class="example-box">
                        <div class="example-title">üîç Example: Multi-Center Sepsis Prediction AI Trial</div>
                        <div class="example-text">
                            <strong>Study Design:</strong> Cluster-randomized trial with stratification<br><br>
                            <strong>Randomization Approach:</strong><br>
                            1. <strong>Unit of randomization:</strong> ICU wards (cluster randomization)<br>
                            2. <strong>Stratification factors:</strong><br>
                            &nbsp;&nbsp;&nbsp;‚Ä¢ Hospital size (Small <200 beds, Medium 200-400, Large >400)<br>
                            &nbsp;&nbsp;&nbsp;‚Ä¢ Academic vs community hospital<br>
                            &nbsp;&nbsp;&nbsp;‚Ä¢ Baseline sepsis mortality rate<br>
                            3. <strong>Allocation:</strong> 20 ICUs total, 10 randomized to AI-assisted care, 10 to standard care<br>
                            4. <strong>Blinding:</strong> Outcome assessors blinded to group assignment<br>
                            5. <strong>Crossover consideration:</strong> None - contamination risk too high<br><br>
                            <strong>Rationale:</strong> Cluster randomization prevents contamination where clinicians aware of AI predictions might alter care in control patients. Stratification ensures balance across hospital characteristics that affect baseline sepsis outcomes.
                        </div>
                    </div>
                </div>
            </div>

            <!-- 5. Analysis Plans -->
            <div class="detail-card">
                <div class="detail-title">5. Statistical Analysis Plans</div>
                
                <div class="detail-content">
                    <div class="detail-text">
                        A comprehensive Statistical Analysis Plan (SAP) must be developed and finalized before any outcome data is examined. This pre-specification is essential to maintain the scientific integrity of the trial and prevent data dredging or p-hacking. The SAP defines all analysis methods, handling of missing data, sensitivity analyses, and subgroup analyses. For AI trials, the analysis plan must address both the primary efficacy question and important safety and implementation considerations.
                    </div>
                    
                    <div class="detail-text">
                        <strong>Analysis Populations:</strong> The Intention-to-Treat (ITT) principle requires analyzing all randomized patients in their assigned groups regardless of protocol adherence. This preserves randomization benefits and reflects real-world effectiveness. Per-protocol analysis (only patients who completed the protocol) addresses efficacy under ideal conditions but risks bias. Both analyses provide complementary information about the intervention's impact.
                    </div>

                    <div class="key-points">
                        <div class="key-points-title">Key Components of Analysis Plans:</div>
                        <ul>
                            <li><strong>Primary Analysis:</strong> Pre-specified statistical test for primary endpoint (e.g., chi-square, t-test, survival analysis)</li>
                            <li><strong>Intention-to-Treat (ITT):</strong> All randomized patients analyzed in assigned groups</li>
                            <li><strong>Per-Protocol (PP):</strong> Only patients completing protocol per specification</li>
                            <li><strong>Missing Data:</strong> Methods for handling dropouts and missing values (e.g., multiple imputation)</li>
                            <li><strong>Sensitivity Analysis:</strong> Testing robustness of results under different assumptions</li>
                            <li><strong>Subgroup Analysis:</strong> Pre-specified exploratory analyses in patient subsets</li>
                            <li><strong>Interim Analysis:</strong> Planned data looks during trial with adjusted significance levels</li>
                            <li><strong>Multiple Testing:</strong> Adjustment for multiple comparisons (e.g., Bonferroni correction)</li>
                        </ul>
                    </div>

                    <div class="diagram-container">
                        <div class="diagram-title">Analysis Populations and Flow</div>
                        <svg width="800" height="500" viewBox="0 0 800 500">
                            <!-- Patient Flow Diagram -->
                            <g transform="translate(50, 20)">
                                <!-- Randomized -->
                                <rect x="0" y="0" width="200" height="50" rx="8" fill="#e8f2ff" stroke="#1E64C8" stroke-width="2"/>
                                <text x="100" y="25" font-size="12" fill="#1E64C8" font-weight="600" text-anchor="middle">Randomized</text>
                                <text x="100" y="40" font-size="11" fill="#666" text-anchor="middle">N = 600</text>
                                
                                <!-- Arrow down and split -->
                                <path d="M 100 50 L 100 80" stroke="#1E64C8" stroke-width="2"/>
                                <path d="M 100 80 L 50 80 L 50 110 M 100 80 L 150 80 L 150 110" stroke="#1E64C8" stroke-width="2"/>
                                
                                <!-- AI Group -->
                                <rect x="-50" y="110" width="150" height="50" rx="8" fill="#d4e7ff" stroke="#28a745" stroke-width="2"/>
                                <text x="25" y="130" font-size="11" fill="#28a745" font-weight="600" text-anchor="middle">AI-Assisted</text>
                                <text x="25" y="145" font-size="10" fill="#666" text-anchor="middle">Allocated: n = 300</text>
                                
                                <!-- Control Group -->
                                <rect x="100" y="110" width="150" height="50" rx="8" fill="#d4e7ff" stroke="#dc3545" stroke-width="2"/>
                                <text x="175" y="130" font-size="11" fill="#dc3545" font-weight="600" text-anchor="middle">Standard Care</text>
                                <text x="175" y="145" font-size="10" fill="#666" text-anchor="middle">Allocated: n = 300</text>
                                
                                <!-- Dropouts AI -->
                                <path d="M 25 160 L 25 200" stroke="#28a745" stroke-width="2"/>
                                <rect x="-50" y="200" width="150" height="40" rx="8" fill="#fff9e6" stroke="#ffc107" stroke-width="1.5"/>
                                <text x="25" y="217" font-size="10" fill="#d68000" font-weight="600" text-anchor="middle">Discontinued: n = 30</text>
                                <text x="25" y="230" font-size="9" fill="#666" text-anchor="middle">Lost to follow-up: 15</text>
                                <text x="25" y="242" font-size="9" fill="#666" text-anchor="middle">Withdrew consent: 15</text>
                                
                                <!-- Dropouts Control -->
                                <path d="M 175 160 L 175 200" stroke="#dc3545" stroke-width="2"/>
                                <rect x="100" y="200" width="150" height="40" rx="8" fill="#fff9e6" stroke="#ffc107" stroke-width="1.5"/>
                                <text x="175" y="217" font-size="10" fill="#d68000" font-weight="600" text-anchor="middle">Discontinued: n = 35</text>
                                <text x="175" y="230" font-size="9" fill="#666" text-anchor="middle">Lost to follow-up: 20</text>
                                <text x="175" y="242" font-size="9" fill="#666" text-anchor="middle">Withdrew consent: 15</text>
                                
                                <!-- ITT Analysis -->
                                <path d="M 25 240 L 25 280 M 175 240 L 175 280" stroke="#1E64C8" stroke-width="2"/>
                                <rect x="-100" y="280" width="350" height="60" rx="8" fill="#e8ffe8" stroke="#28a745" stroke-width="2"/>
                                <text x="75" y="300" font-size="12" fill="#28a745" font-weight="700" text-anchor="middle">Intention-to-Treat (ITT) Analysis</text>
                                <text x="75" y="318" font-size="10" fill="#333" text-anchor="middle">AI: n = 300 | Control: n = 300</text>
                                <text x="75" y="332" font-size="9" fill="#666" text-anchor="middle">All randomized patients included</text>
                                
                                <!-- PP Analysis -->
                                <path d="M 25 340 L 25 370 M 175 340 L 175 370" stroke="#1E64C8" stroke-width="2"/>
                                <rect x="-100" y="370" width="350" height="60" rx="8" fill="#ffe8e8" stroke="#dc3545" stroke-width="2"/>
                                <text x="75" y="390" font-size="12" fill="#dc3545" font-weight="700" text-anchor="middle">Per-Protocol (PP) Analysis</text>
                                <text x="75" y="408" font-size="10" fill="#333" text-anchor="middle">AI: n = 270 | Control: n = 265</text>
                                <text x="75" y="422" font-size="9" fill="#666" text-anchor="middle">Only protocol-compliant patients</text>
                            </g>
                            
                            <!-- Analysis Methods Table -->
                            <g transform="translate(350, 20)">
                                <rect x="0" y="0" width="400" height="460" rx="10" fill="#f8fbff" stroke="#1E64C8" stroke-width="2"/>
                                <text x="200" y="25" font-size="13" fill="#1E64C8" font-weight="700" text-anchor="middle">Statistical Methods</text>
                                
                                <!-- Primary Analysis -->
                                <rect x="15" y="40" width="370" height="80" rx="5" fill="white" stroke="#1E64C8" stroke-width="1.5"/>
                                <text x="200" y="58" font-size="11" fill="#1E64C8" font-weight="600" text-anchor="middle">Primary Endpoint Analysis</text>
                                <text x="20" y="75" font-size="10" fill="#333">Endpoint: 30-day mortality (binary)</text>
                                <text x="20" y="90" font-size="10" fill="#333">Method: Chi-square test (or logistic regression)</text>
                                <text x="20" y="105" font-size="10" fill="#333">Population: ITT (primary), PP (sensitivity)</text>
                                
                                <!-- Secondary Analyses -->
                                <rect x="15" y="130" width="370" height="100" rx="5" fill="white" stroke="#1E64C8" stroke-width="1.5"/>
                                <text x="200" y="148" font-size="11" fill="#1E64C8" font-weight="600" text-anchor="middle">Secondary Endpoints</text>
                                <text x="20" y="165" font-size="10" fill="#333">‚Ä¢ Length of stay: t-test or Mann-Whitney U</text>
                                <text x="20" y="180" font-size="10" fill="#333">‚Ä¢ Time to event: Kaplan-Meier, log-rank test</text>
                                <text x="20" y="195" font-size="10" fill="#333">‚Ä¢ Adverse events: Fisher's exact test</text>
                                <text x="20" y="210" font-size="10" fill="#333">‚Ä¢ Cost-effectiveness: Bootstrap methods</text>
                                
                                <!-- Missing Data -->
                                <rect x="15" y="240" width="370" height="80" rx="5" fill="white" stroke="#ffc107" stroke-width="1.5"/>
                                <text x="200" y="258" font-size="11" fill="#d68000" font-weight="600" text-anchor="middle">Missing Data Handling</text>
                                <text x="20" y="275" font-size="10" fill="#333">Primary: Multiple imputation (m=50)</text>
                                <text x="20" y="290" font-size="10" fill="#333">Sensitivity 1: Complete case analysis</text>
                                <text x="20" y="305" font-size="10" fill="#333">Sensitivity 2: Worst-case scenario</text>
                                
                                <!-- Subgroup Analysis -->
                                <rect x="15" y="330" width="370" height="80" rx="5" fill="white" stroke="#17a2b8" stroke-width="1.5"/>
                                <text x="200" y="348" font-size="11" fill="#17a2b8" font-weight="600" text-anchor="middle">Pre-specified Subgroups</text>
                                <text x="20" y="365" font-size="10" fill="#333">‚Ä¢ Age: <65 vs ‚â•65 years</text>
                                <text x="20" y="380" font-size="10" fill="#333">‚Ä¢ Disease severity: APACHE II score</text>
                                <text x="20" y="395" font-size="10" fill="#333">‚Ä¢ Test for interaction with treatment</text>
                                
                                <!-- Multiple Testing -->
                                <rect x="15" y="420" width="370" height="30" rx="5" fill="#e8ffe8" stroke="#28a745" stroke-width="1.5"/>
                                <text x="20" y="438" font-size="10" fill="#333">Multiplicity: Bonferroni correction (Œ± = 0.05/3 = 0.0167)</text>
                            </g>
                        </svg>
                    </div>

                    <div class="example-box">
                        <div class="example-title">üîç Example: Cardiac Arrest Prediction Algorithm</div>
                        <div class="example-text">
                            <strong>Statistical Analysis Plan Summary:</strong><br><br>
                            <strong>Primary Analysis:</strong><br>
                            ‚Ä¢ Endpoint: Incidence of in-hospital cardiac arrest (binary)<br>
                            ‚Ä¢ Method: Generalized estimating equations (GEE) accounting for clustering by hospital<br>
                            ‚Ä¢ Population: ITT including all randomized patients<br>
                            ‚Ä¢ Significance: Two-sided Œ± = 0.05<br><br>
                            <strong>Secondary Analyses:</strong><br>
                            ‚Ä¢ Time to cardiac arrest: Cox proportional hazards model<br>
                            ‚Ä¢ ICU transfer rates: Poisson regression<br>
                            ‚Ä¢ Rapid response team activations: Negative binomial regression<br><br>
                            <strong>Missing Data:</strong><br>
                            ‚Ä¢ Primary outcome has 100% ascertainment (administrative data)<br>
                            ‚Ä¢ Secondary outcomes: Multiple imputation using chained equations<br><br>
                            <strong>Sensitivity Analyses:</strong><br>
                            1. Per-protocol analysis excluding sites with <80% AI adherence<br>
                            2. As-treated analysis based on actual AI exposure<br>
                            3. Analysis excluding COVID-19 pandemic period<br><br>
                            <strong>Subgroup Analyses:</strong><br>
                            ‚Ä¢ Hospital size (tertiles)<br>
                            ‚Ä¢ Baseline cardiac arrest rate (above/below median)<br>
                            ‚Ä¢ Academic vs community hospitals<br>
                            ‚Ä¢ Interaction tests for all subgroups with Bonferroni correction
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>