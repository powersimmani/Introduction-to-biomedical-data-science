<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Activation Maps (CAM)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Aptos, 'Segoe UI', sans-serif;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            width: 960px;
            padding: 35px 45px;
            background: white;
        }
        
        .title {
            font-size: 28px;
            font-weight: 600;
            color: #1E64C8;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .cam-process {
            background: #f8fbff;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .process-title {
            font-size: 18px;
            font-weight: 700;
            color: #1E64C8;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .concept-card {
            background: white;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 18px;
            transition: all 0.3s;
            min-height: 140px;
        }
        
        .concept-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(30, 100, 200, 0.2);
            background: #f8fbff;
        }
        
        .concept-name {
            font-size: 18px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 10px;
        }
        
        .concept-desc {
            font-size: 15px;
            color: #333;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Class Activation Maps (CAM)</div>
        
        <div class="cam-process">
            <div class="process-title">CAM Generation Pipeline: From CNN to Heatmap</div>
            <svg width="880" height="280" viewBox="0 0 880 280">
                <!-- Input Image -->
                <g transform="translate(30, 60)">
                    <text x="50" y="-10" font-size="12" fill="#1E64C8" font-weight="700" text-anchor="middle">Input Image</text>
                    <rect x="0" y="0" width="100" height="100" fill="#e8f2ff" stroke="#1E64C8" stroke-width="2.5"/>
                    
                    <!-- Chest X-ray representation -->
                    <ellipse cx="50" cy="50" rx="30" ry="38" fill="white" stroke="#1E64C8" stroke-width="1.5" opacity="0.7"/>
                    <ellipse cx="35" cy="40" rx="10" ry="12" fill="#d4e7ff" stroke="#1E64C8" stroke-width="1"/>
                    <ellipse cx="65" cy="40" rx="10" ry="12" fill="#d4e7ff" stroke="#1E64C8" stroke-width="1"/>
                    <rect x="45" y="35" width="10" height="30" fill="#b3d7ff" opacity="0.5"/>
                    <!-- Lesion indicator -->
                    <circle cx="65" cy="55" r="8" fill="#ff6b6b" opacity="0.5" stroke="#dc3545" stroke-width="1.5"/>
                </g>
                
                <!-- CNN Feature Extraction -->
                <g transform="translate(180, 30)">
                    <text x="80" y="-10" font-size="12" fill="#1E64C8" font-weight="700" text-anchor="middle">CNN Backbone</text>
                    
                    <!-- Conv layers visualization -->
                    <rect x="0" y="10" width="25" height="120" fill="#b3d7ff" stroke="#1E64C8" stroke-width="1.5" opacity="0.9"/>
                    <text x="12.5" y="70" font-size="8" fill="white" font-weight="600" text-anchor="middle" transform="rotate(-90 12.5 70)">Conv1</text>
                    
                    <rect x="30" y="20" width="25" height="100" fill="#9ec5ff" stroke="#1E64C8" stroke-width="1.5" opacity="0.8"/>
                    <text x="42.5" y="70" font-size="8" fill="white" font-weight="600" text-anchor="middle" transform="rotate(-90 42.5 70)">Conv2</text>
                    
                    <rect x="60" y="30" width="25" height="80" fill="#80b3ff" stroke="#1E64C8" stroke-width="1.5" opacity="0.7"/>
                    <text x="72.5" y="70" font-size="8" fill="white" font-weight="600" text-anchor="middle" transform="rotate(-90 72.5 70)">Conv3</text>
                    
                    <rect x="90" y="40" width="25" height="60" fill="#6699ff" stroke="#1E64C8" stroke-width="1.5" opacity="0.6"/>
                    <text x="102.5" y="70" font-size="8" fill="white" font-weight="600" text-anchor="middle" transform="rotate(-90 102.5 70)">Conv4</text>
                    
                    <rect x="120" y="50" width="25" height="40" fill="#4d88ff" stroke="#1E64C8" stroke-width="1.5" opacity="0.5"/>
                    <text x="132.5" y="70" font-size="8" fill="white" font-weight="600" text-anchor="middle" transform="rotate(-90 132.5 70)">Conv5</text>
                </g>
                
                <!-- Feature Maps -->
                <g transform="translate(360, 50)">
                    <text x="50" y="-10" font-size="12" fill="#1E64C8" font-weight="700" text-anchor="middle">Feature Maps</text>
                    
                    <!-- Multiple feature maps stacked -->
                    <rect x="0" y="5" width="40" height="40" fill="#ffe6e6" stroke="#1E64C8" stroke-width="1" opacity="0.4"/>
                    <rect x="5" y="10" width="40" height="40" fill="#fff0e6" stroke="#1E64C8" stroke-width="1" opacity="0.5"/>
                    <rect x="10" y="15" width="40" height="40" fill="#fff9e6" stroke="#1E64C8" stroke-width="1" opacity="0.6"/>
                    <rect x="15" y="20" width="40" height="40" fill="#e6ffe6" stroke="#1E64C8" stroke-width="1" opacity="0.7"/>
                    <rect x="20" y="25" width="40" height="40" fill="#e6f3ff" stroke="#1E64C8" stroke-width="1.5" opacity="0.8"/>
                    
                    <text x="40" y="48" font-size="9" fill="#666" text-anchor="middle">N channels</text>
                    <text x="40" y="78" font-size="8" fill="#666" text-anchor="middle">7×7×512</text>
                </g>
                
                <!-- GAP -->
                <g transform="translate(480, 50)">
                    <rect x="0" y="20" width="70" height="60" rx="8" fill="#fff9e6" stroke="#1E64C8" stroke-width="2"/>
                    <text x="35" y="15" font-size="10" fill="#1E64C8" font-weight="700" text-anchor="middle">GAP</text>
                    <text x="35" y="42" font-size="9" fill="#666" text-anchor="middle">Global Avg</text>
                    <text x="35" y="55" font-size="9" fill="#666" text-anchor="middle">Pooling</text>
                    <text x="35" y="70" font-size="8" fill="#333" text-anchor="middle">→ 512×1</text>
                </g>
                
                <!-- FC Layer -->
                <g transform="translate(590, 50)">
                    <rect x="0" y="20" width="80" height="60" rx="8" fill="#d4e7ff" stroke="#1E64C8" stroke-width="2"/>
                    <text x="40" y="15" font-size="10" fill="#1E64C8" font-weight="700" text-anchor="middle">FC Layer</text>
                    <text x="40" y="42" font-size="9" fill="#666" text-anchor="middle">Class Weights</text>
                    <text x="40" y="55" font-size="9" fill="#666" text-anchor="middle">W_c</text>
                    
                    <!-- Weight visualization -->
                    <rect x="15" y="62" width="50" height="10" fill="#28a745" opacity="0.7"/>
                    <text x="40" y="70" font-size="7" fill="white" text-anchor="middle">Pneumonia: 0.92</text>
                </g>
                
                <!-- CAM Generation Process -->
                <g transform="translate(360, 150)">
                    <text x="150" y="0" font-size="12" fill="#1E64C8" font-weight="700" text-anchor="middle">CAM Computation</text>
                    
                    <!-- Formula -->
                    <rect x="0" y="10" width="300" height="40" rx="8" fill="#f0f5fc" stroke="#1E64C8" stroke-width="2"/>
                    <text x="150" y="28" font-size="11" fill="#1E64C8" font-weight="600" text-anchor="middle">CAM = Σ(w_k × f_k)</text>
                    <text x="150" y="42" font-size="9" fill="#666" text-anchor="middle">w_k: weight for feature k, f_k: activation of feature map k</text>
                </g>
                
                <!-- Result Heatmap -->
                <g transform="translate(30, 180)">
                    <text x="50" y="-5" font-size="12" fill="#1E64C8" font-weight="700" text-anchor="middle">Result</text>
                    <rect x="0" y="5" width="100" height="80" fill="#e8f2ff" stroke="#1E64C8" stroke-width="2.5"/>
                    
                    <!-- Original image with heatmap overlay -->
                    <ellipse cx="50" cy="45" rx="30" ry="38" fill="white" stroke="#1E64C8" stroke-width="1.5" opacity="0.3"/>
                    <ellipse cx="35" cy="35" rx="10" ry="12" fill="#d4e7ff" stroke="#1E64C8" stroke-width="1" opacity="0.3"/>
                    <ellipse cx="65" cy="35" rx="10" ry="12" fill="#d4e7ff" stroke="#1E64C8" stroke-width="1" opacity="0.3"/>
                    
                    <!-- Heatmap overlay -->
                    <defs>
                        <radialGradient id="heatmap">
                            <stop offset="0%" style="stop-color:#ff0000;stop-opacity:0.8" />
                            <stop offset="50%" style="stop-color:#ff6600;stop-opacity:0.5" />
                            <stop offset="100%" style="stop-color:#ffff00;stop-opacity:0.1" />
                        </radialGradient>
                    </defs>
                    <ellipse cx="65" cy="50" rx="20" ry="25" fill="url(#heatmap)"/>
                    
                    <text x="50" y="98" font-size="9" fill="#666" text-anchor="middle">Attention Heatmap</text>
                </g>
                
                <!-- Grad-CAM Variant -->
                <g transform="translate(700, 20)">
                    <rect x="0" y="0" width="160" height="240" rx="10" fill="#ffe6f0" stroke="#1E64C8" stroke-width="2"/>
                    <text x="80" y="20" font-size="12" fill="#1E64C8" font-weight="700" text-anchor="middle">Grad-CAM</text>
                    
                    <text x="80" y="40" font-size="9" fill="#666" text-anchor="middle">Gradient-based</text>
                    
                    <!-- Process steps -->
                    <g transform="translate(15, 50)">
                        <rect x="0" y="0" width="130" height="30" rx="5" fill="white" stroke="#1E64C8" stroke-width="1"/>
                        <text x="65" y="12" font-size="9" fill="#666" text-anchor="middle">1. Forward pass</text>
                        <text x="65" y="23" font-size="8" fill="#333" text-anchor="middle">Get prediction</text>
                        
                        <path d="M 65 30 L 65 40" stroke="#1E64C8" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                        
                        <rect x="0" y="40" width="130" height="30" rx="5" fill="white" stroke="#1E64C8" stroke-width="1"/>
                        <text x="65" y="52" font-size="9" fill="#666" text-anchor="middle">2. Backprop gradients</text>
                        <text x="65" y="63" font-size="8" fill="#333" text-anchor="middle">∂y_c/∂A_k</text>
                        
                        <path d="M 65 70 L 65 80" stroke="#1E64C8" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                        
                        <rect x="0" y="80" width="130" height="30" rx="5" fill="white" stroke="#1E64C8" stroke-width="1"/>
                        <text x="65" y="92" font-size="9" fill="#666" text-anchor="middle">3. Global average</text>
                        <text x="65" y="103" font-size="8" fill="#333" text-anchor="middle">α_k = GAP(gradients)</text>
                        
                        <path d="M 65 110 L 65 120" stroke="#1E64C8" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                        
                        <rect x="0" y="120" width="130" height="30" rx="5" fill="white" stroke="#1E64C8" stroke-width="1"/>
                        <text x="65" y="132" font-size="9" fill="#666" text-anchor="middle">4. Weighted sum</text>
                        <text x="65" y="143" font-size="8" fill="#333" text-anchor="middle">L = ReLU(Σα_k A_k)</text>
                    </g>
                    
                    <text x="80" y="220" font-size="9" fill="#28a745" font-weight="600" text-anchor="middle">✓ Works with any CNN</text>
                    <text x="80" y="232" font-size="9" fill="#28a745" font-weight="600" text-anchor="middle">✓ No re-training needed</text>
                </g>
                
                <!-- Arrows -->
                <path d="M 130 110 L 180 90" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowhead)"/>
                <path d="M 325 90 L 360 85" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowhead)"/>
                <path d="M 420 80 L 480 80" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowhead)"/>
                <path d="M 550 80 L 590 80" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- Backward arrow for CAM -->
                <path d="M 630 90 Q 630 120, 510 120 Q 400 120, 400 100" stroke="#dc3545" stroke-width="2" stroke-dasharray="4,3" marker-end="url(#arrowhead-red)"/>
                <text x="515" y="135" font-size="9" fill="#dc3545" font-weight="600" text-anchor="middle">Apply weights</text>
                
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#1E64C8" />
                    </marker>
                    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#dc3545" />
                    </marker>
                </defs>
            </svg>
        </div>
        
        <div class="concept-grid">
            <div class="concept-card">
                <div class="concept-name">CAM Principles</div>
                <div class="concept-desc">Visualize important regions for classification. Linear combination of feature maps weighted by class weights</div>
            </div>
        
            <div class="concept-card">
                <div class="concept-name">Grad-CAM</div>
                <div class="concept-desc">Gradient-based localization. Works with any CNN architecture without modification</div>
            </div>
        
            <div class="concept-card">
                <div class="concept-name">Grad-CAM++</div>
                <div class="concept-desc">Improved weighted combination. Better localization for multiple objects and weak activations</div>
            </div>
        
            <div class="concept-card">
                <div class="concept-name">Score-CAM</div>
                <div class="concept-desc">Gradient-free approach using forward passes. More stable and cleaner visualizations</div>
            </div>
        
            <div class="concept-card">
                <div class="concept-name">Clinical Interpretation</div>
                <div class="concept-desc">Essential for model validation and trust building. Helps radiologists understand AI decisions</div>
            </div>
        
        </div>
    </div>
</body>
</html>