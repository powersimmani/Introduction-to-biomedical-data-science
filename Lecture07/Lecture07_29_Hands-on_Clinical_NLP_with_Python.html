<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hands-on: Clinical NLP with Python</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Aptos, 'Segoe UI', sans-serif;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            width: 960px;
            padding: 35px 45px;
            background: white;
        }
        
        .title {
            font-size: 32px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 35px;
            text-align: center;
        }
        
        .section-title {
            font-size: 28px;
            font-weight: 700;
            color: #1E64C8;
            margin: 40px 0 25px 0;
            text-align: center;
            border-bottom: 3px solid #1E64C8;
            padding-bottom: 10px;
        }
        
        .code-example-diagram {
            margin-bottom: 25px;
            background: #f8fbff;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 20px;
        }
        
        .content-grid-4 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .content-card {
            background: #f8fbff;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .content-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(30, 100, 200, 0.2);
        }
        
        .content-title {
            font-size: 19px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .content-list {
            font-size: 16px;
            color: #333;
            line-height: 1.7;
        }
        
        .bullet {
            display: flex;
            align-items: flex-start;
            margin-bottom: 6px;
        }
        
        .bullet::before {
            content: "‚Ä¢";
            color: #1E64C8;
            font-weight: bold;
            margin-right: 8px;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .code-block {
            background: #263238;
            color: #aed581;
            padding: 12px;
            border-radius: 5px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 11px;
            overflow-x: auto;
            margin: 8px 0;
        }
        
        .code-comment {
            color: #546e7a;
        }
        
        .code-keyword {
            color: #ff5370;
        }
        
        .code-string {
            color: #ffb74d;
        }
        
        .code-function {
            color: #82b1ff;
        }
        
        .detailed-section {
            margin: 30px 0;
            background: #ffffff;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 25px;
        }
        
        .detailed-title {
            font-size: 24px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .description {
            font-size: 16px;
            color: #333;
            line-height: 1.8;
            margin-bottom: 20px;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-box {
            background: #f0f7ff;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #1E64C8;
        }
        
        .feature-box-title {
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 8px;
            font-size: 15px;
        }
        
        .feature-box-text {
            color: #555;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .diagram-container {
            background: #fafafa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #ddd;
        }
        
        .use-case {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #2874d8;
        }
        
        .use-case-title {
            font-weight: 700;
            color: #2874d8;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Hands-on: Clinical NLP with Python</div>
        
        <!-- Code Example with Pipeline -->
        <div class="code-example-diagram">
            <div style="text-align: center; margin-bottom: 15px;">
                <span style="color: #1E64C8; font-size: 14px; font-weight: bold;">Clinical NLP Pipeline Example</span>
            </div>
            
            <!-- scispaCy Example -->
            <div class="code-block">
<span class="code-comment"># Install: pip install scispacy</span>
<span class="code-keyword">import</span> spacy
<span class="code-keyword">import</span> scispacy
<span class="code-keyword">from</span> scispacy.linking <span class="code-keyword">import</span> EntityLinker

<span class="code-comment"># Load clinical model</span>
nlp = spacy.<span class="code-function">load</span>(<span class="code-string">"en_core_sci_md"</span>)
nlp.<span class="code-function">add_pipe</span>(<span class="code-string">"scispacy_linker"</span>, config={<span class="code-string">"resolve_abbreviations"</span>: <span class="code-keyword">True</span>})

<span class="code-comment"># Process clinical text</span>
text = <span class="code-string">"Patient prescribed metformin 500mg for T2DM. HbA1c was 7.2%"</span>
doc = <span class="code-function">nlp</span>(text)

<span class="code-comment"># Extract entities</span>
<span class="code-keyword">for</span> ent <span class="code-keyword">in</span> doc.ents:
    <span class="code-function">print</span>(f<span class="code-string">"{ent.text} ‚Üí {ent.label_}"</span>)
    <span class="code-keyword">if</span> ent._.kb_ents:
        cui = ent._.kb_ents[0][0]  <span class="code-comment"># UMLS CUI</span>
        <span class="code-function">print</span>(f<span class="code-string">"  UMLS: {cui}"</span>)
            </div>
            
            <!-- BioBERT Example -->
            <div class="code-block" style="margin-top: 15px;">
<span class="code-comment"># BioBERT for NER using Transformers</span>
<span class="code-keyword">from</span> transformers <span class="code-keyword">import</span> AutoTokenizer, AutoModelForTokenClassification
<span class="code-keyword">import</span> torch

<span class="code-comment"># Load BioBERT model</span>
tokenizer = AutoTokenizer.<span class="code-function">from_pretrained</span>(<span class="code-string">"dmis-lab/biobert-v1.1"</span>)
model = AutoModelForTokenClassification.<span class="code-function">from_pretrained</span>(
    <span class="code-string">"dmis-lab/biobert-v1.1"</span>
)

<span class="code-comment"># Tokenize and predict</span>
inputs = <span class="code-function">tokenizer</span>(text, return_tensors=<span class="code-string">"pt"</span>)
outputs = <span class="code-function">model</span>(**inputs)
predictions = torch.argmax(outputs.logits, dim=2)
            </div>
        </div>
        
        <!-- Visual Pipeline Flow -->
        <div class="code-example-diagram" style="padding: 15px;">
            <svg width="100%" height="100" viewBox="0 0 870 100">
                <text x="435" y="20" text-anchor="middle" fill="#1E64C8" font-size="14" font-weight="bold">NLP Pipeline Flow</text>
                
                <!-- Pipeline Steps -->
                <rect x="30" y="35" width="120" height="50" fill="#1E64C8" rx="5"/>
                <text x="90" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">1. Load Text</text>
                <text x="90" y="70" text-anchor="middle" fill="white" font-size="9">Clinical notes</text>
                
                <rect x="180" y="35" width="120" height="50" fill="#2874d8" rx="5"/>
                <text x="240" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">2. Preprocess</text>
                <text x="240" y="70" text-anchor="middle" fill="white" font-size="9">Clean, tokenize</text>
                
                <rect x="330" y="35" width="120" height="50" fill="#5088d4" rx="5"/>
                <text x="390" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">3. NER</text>
                <text x="390" y="70" text-anchor="middle" fill="white" font-size="9">Extract entities</text>
                
                <rect x="480" y="35" width="120" height="50" fill="#6ba3e0" rx="5"/>
                <text x="540" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">4. Link</text>
                <text x="540" y="70" text-anchor="middle" fill="white" font-size="9">UMLS CUIs</text>
                
                <rect x="630" y="35" width="120" height="50" fill="#66bb6a" rx="5"/>
                <text x="690" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">5. Output</text>
                <text x="690" y="70" text-anchor="middle" fill="white" font-size="9">Structured data</text>
                
                <!-- Progress indicator -->
                <rect x="780" y="35" width="70" height="50" fill="#ff9800" rx="5"/>
                <text x="815" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Evaluate</text>
                <text x="815" y="70" text-anchor="middle" fill="white" font-size="9">F1 score</text>
                
                <!-- Arrows -->
                <defs>
                    <marker id="arrow9" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                        <polygon points="0 0, 8 3, 0 6" fill="#1E64C8" />
                    </marker>
                </defs>
                
                <line x1="150" y1="60" x2="180" y2="60" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrow9)"/>
                <line x1="300" y1="60" x2="330" y2="60" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrow9)"/>
                <line x1="450" y1="60" x2="480" y2="60" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrow9)"/>
                <line x1="600" y1="60" x2="630" y2="60" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrow9)"/>
                <line x1="750" y1="60" x2="780" y2="60" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrow9)"/>
            </svg>
        </div>
        
        <div class="content-grid-4">
            <div class="content-card">
                <div class="content-title">üî¨ scispaCy</div>
                <div class="content-list">
                    <div class="bullet">pip install scispacy</div>
                    <div class="bullet">Biomedical NER models</div>
                    <div class="bullet">UMLS entity linking</div>
                    <div class="bullet">Abbreviation detection</div>
                    <div class="bullet">Negation with NegEx</div>
                </div>
            </div>
            <div class="content-card">
                <div class="content-title">üè• MedCAT</div>
                <div class="content-list">
                    <div class="bullet">Medical Concept Annotation</div>
                    <div class="bullet">Unsupervised learning</div>
                    <div class="bullet">Active learning interface</div>
                    <div class="bullet">Context detection</div>
                    <div class="bullet">SNOMED/UMLS linking</div>
                </div>
            </div>
            <div class="content-card">
                <div class="content-title">ü§ñ BioBERT/ClinicalBERT</div>
                <div class="content-list">
                    <div class="bullet">Pretrained on PubMed/MIMIC</div>
                    <div class="bullet">Fine-tuning for NER</div>
                    <div class="bullet">Relation extraction</div>
                    <div class="bullet">Question answering</div>
                    <div class="bullet">Hugging Face integration</div>
                </div>
            </div>
            <div class="content-card">
                <div class="content-title">üìä Evaluation Metrics</div>
                <div class="content-list">
                    <div class="bullet">Precision: correct/predicted</div>
                    <div class="bullet">Recall: correct/actual</div>
                    <div class="bullet">F1 score: harmonic mean</div>
                    <div class="bullet">Entity vs token level</div>
                    <div class="bullet">Cross-validation</div>
                </div>
            </div>
        </div>

        <!-- DETAILED SECTIONS START HERE -->
        
        <div class="section-title">Detailed Framework Explanations</div>

        <!-- 1. scispaCy Detailed Section -->
        <div class="detailed-section">
            <div class="detailed-title">
                <span style="font-size: 28px;">üî¨</span> scispaCy: Scientific spaCy for Biomedical Text
            </div>
            
            <div class="description">
                <strong>scispaCy</strong> is a Python package built on top of spaCy, specifically designed for processing biomedical and clinical text. It provides specialized models trained on scientific literature and includes tools for named entity recognition, entity linking to standardized vocabularies like UMLS, and abbreviation detection.
            </div>

            <div class="diagram-container">
                <svg width="100%" height="280" viewBox="0 0 870 280">
                    <text x="435" y="25" text-anchor="middle" fill="#1E64C8" font-size="16" font-weight="bold">scispaCy Architecture</text>
                    
                    <!-- Input -->
                    <rect x="50" y="50" width="180" height="60" fill="#f0f7ff" stroke="#1E64C8" stroke-width="2" rx="5"/>
                    <text x="140" y="75" text-anchor="middle" fill="#1E64C8" font-size="13" font-weight="bold">Clinical Text Input</text>
                    <text x="140" y="95" text-anchor="middle" fill="#333" font-size="11">"Patient has HTN and DM"</text>
                    
                    <!-- Arrow -->
                    <defs>
                        <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" fill="#1E64C8" />
                        </marker>
                    </defs>
                    <line x1="230" y1="80" x2="280" y2="80" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    
                    <!-- scispaCy Processing -->
                    <rect x="280" y="50" width="180" height="60" fill="#1E64C8" stroke="#1E64C8" stroke-width="2" rx="5"/>
                    <text x="370" y="70" text-anchor="middle" fill="white" font-size="13" font-weight="bold">scispaCy Models</text>
                    <text x="370" y="88" text-anchor="middle" fill="white" font-size="10">en_core_sci_md</text>
                    <text x="370" y="102" text-anchor="middle" fill="white" font-size="10">en_ner_bc5cdr_md</text>
                    
                    <!-- Arrow -->
                    <line x1="460" y1="80" x2="510" y2="80" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    
                    <!-- Entity Recognition -->
                    <rect x="510" y="50" width="180" height="60" fill="#66bb6a" stroke="#66bb6a" stroke-width="2" rx="5"/>
                    <text x="600" y="70" text-anchor="middle" fill="white" font-size="13" font-weight="bold">Entity Recognition</text>
                    <text x="600" y="88" text-anchor="middle" fill="white" font-size="10">HTN ‚Üí DISEASE</text>
                    <text x="600" y="102" text-anchor="middle" fill="white" font-size="10">DM ‚Üí DISEASE</text>
                    
                    <!-- Entity Linking Branch -->
                    <line x1="600" y1="110" x2="600" y2="140" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    
                    <rect x="510" y="140" width="180" height="60" fill="#ff9800" stroke="#ff9800" stroke-width="2" rx="5"/>
                    <text x="600" y="160" text-anchor="middle" fill="white" font-size="13" font-weight="bold">UMLS Linking</text>
                    <text x="600" y="178" text-anchor="middle" fill="white" font-size="10">HTN ‚Üí C0020538</text>
                    <text x="600" y="192" text-anchor="middle" fill="white" font-size="10">DM ‚Üí C0diabetes</text>
                    
                    <!-- Abbreviation Detection Branch -->
                    <line x1="370" y1="110" x2="370" y2="140" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    
                    <rect x="280" y="140" width="180" height="60" fill="#9c27b0" stroke="#9c27b0" stroke-width="2" rx="5"/>
                    <text x="370" y="160" text-anchor="middle" fill="white" font-size="13" font-weight="bold">Abbreviation Detection</text>
                    <text x="370" y="178" text-anchor="middle" fill="white" font-size="10">HTN = Hypertension</text>
                    <text x="370" y="192" text-anchor="middle" fill="white" font-size="10">DM = Diabetes Mellitus</text>
                    
                    <!-- Output -->
                    <line x1="600" y1="200" x2="600" y2="230" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    <line x1="370" y1="200" x2="370" y2="220" stroke="#1E64C8" stroke-width="2"/>
                    <line x1="370" y1="220" x2="600" y2="220" stroke="#1E64C8" stroke-width="2"/>
                    
                    <rect x="510" y="230" width="180" height="40" fill="#f0f7ff" stroke="#1E64C8" stroke-width="2" rx="5"/>
                    <text x="600" y="250" text-anchor="middle" fill="#1E64C8" font-size="12" font-weight="bold">Structured Output</text>
                    <text x="600" y="264" text-anchor="middle" fill="#333" font-size="9">Entities + CUIs + Expansions</text>
                </svg>
            </div>

            <div class="feature-grid">
                <div class="feature-box">
                    <div class="feature-box-title">üéØ Pretrained Models</div>
                    <div class="feature-box-text">
                        Multiple specialized models trained on biomedical literature: en_core_sci_sm, en_core_sci_md, en_core_sci_lg for general scientific text, and en_ner_bc5cdr_md for chemical and disease entities.
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">üîó Entity Linking</div>
                    <div class="feature-box-text">
                        Automatic linking to UMLS, MeSH, RxNorm, Gene Ontology, and other knowledge bases. Maps recognized entities to standardized concept unique identifiers (CUIs).
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">üìù Abbreviation Detection</div>
                    <div class="feature-box-text">
                        Detects and expands medical abbreviations using a specialized component. Handles both explicit definitions and implicit abbreviations in clinical text.
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">üö´ Negation Detection</div>
                    <div class="feature-box-text">
                        Integration with NegEx algorithm to detect negated medical concepts. Essential for understanding "patient denies chest pain" vs "patient has chest pain".
                    </div>
                </div>
            </div>

            <div class="use-case">
                <div class="use-case-title">üí° Use Case Example</div>
                <div class="feature-box-text">
                    <strong>Clinical Note Processing:</strong> A hospital wants to extract structured information from discharge summaries. scispaCy can identify diseases (ICD codes), medications (RxNorm), procedures, and link them to standardized vocabularies for downstream analytics and quality reporting.
                </div>
            </div>

            <div class="code-block">
<span class="code-comment"># Complete scispaCy workflow</span>
<span class="code-keyword">import</span> spacy
<span class="code-keyword">from</span> scispacy.abbreviation <span class="code-keyword">import</span> AbbreviationDetector
<span class="code-keyword">from</span> scispacy.linking <span class="code-keyword">import</span> EntityLinker

nlp = spacy.<span class="code-function">load</span>(<span class="code-string">"en_core_sci_sm"</span>)
nlp.<span class="code-function">add_pipe</span>(<span class="code-string">"abbreviation_detector"</span>)
nlp.<span class="code-function">add_pipe</span>(<span class="code-string">"scispacy_linker"</span>, config={<span class="code-string">"resolve_abbreviations"</span>: <span class="code-keyword">True</span>, 
                                        <span class="code-string">"linker_name"</span>: <span class="code-string">"umls"</span>})

text = <span class="code-string">"Patient with CHF presents with dyspnea. Started on furosemide."</span>
doc = <span class="code-function">nlp</span>(text)

<span class="code-keyword">for</span> ent <span class="code-keyword">in</span> doc.ents:
    <span class="code-function">print</span>(f<span class="code-string">"Entity: {ent.text}, Label: {ent.label_}"</span>)
    <span class="code-keyword">for</span> umls_ent <span class="code-keyword">in</span> ent._.kb_ents:
        <span class="code-function">print</span>(f<span class="code-string">"  UMLS CUI: {umls_ent[0]}, Score: {umls_ent[1]}"</span>)
            </div>
        </div>

        <!-- 2. MedCAT Detailed Section -->
        <div class="detailed-section">
            <div class="detailed-title">
                <span style="font-size: 28px;">üè•</span> MedCAT: Medical Concept Annotation Tool
            </div>
            
            <div class="description">
                <strong>MedCAT</strong> is an advanced NLP framework designed for medical concept annotation in clinical text. It uses unsupervised learning to create medical concept models and provides an active learning interface for continuous model improvement. MedCAT excels at handling context, negation, and temporal information.
            </div>

            <div class="diagram-container">
                <svg width="100%" height="320" viewBox="0 0 870 320">
                    <text x="435" y="25" text-anchor="middle" fill="#1E64C8" font-size="16" font-weight="bold">MedCAT Workflow</text>
                    
                    <!-- Training Phase -->
                    <rect x="30" y="50" width="250" height="120" fill="#fff3e0" stroke="#ff9800" stroke-width="2" rx="5"/>
                    <text x="155" y="70" text-anchor="middle" fill="#ff9800" font-size="14" font-weight="bold">Training Phase</text>
                    
                    <rect x="50" y="85" width="210" height="30" fill="#ffe0b2" stroke="#ff9800" stroke-width="1" rx="3"/>
                    <text x="155" y="105" text-anchor="middle" fill="#333" font-size="11">1. Unsupervised concept extraction</text>
                    
                    <rect x="50" y="120" width="210" height="30" fill="#ffe0b2" stroke="#ff9800" stroke-width="1" rx="3"/>
                    <text x="155" y="140" text-anchor="middle" fill="#333" font-size="11">2. Context vector learning</text>
                    
                    <!-- Arrow to Active Learning -->
                    <line x1="280" y1="110" x2="310" y2="110" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    
                    <!-- Active Learning -->
                    <rect x="310" y="50" width="250" height="120" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" rx="5"/>
                    <text x="435" y="70" text-anchor="middle" fill="#9c27b0" font-size="14" font-weight="bold">Active Learning Loop</text>
                    
                    <rect x="330" y="85" width="210" height="30" fill="#e1bee7" stroke="#9c27b0" stroke-width="1" rx="3"/>
                    <text x="435" y="105" text-anchor="middle" fill="#333" font-size="11">Human annotation feedback</text>
                    
                    <rect x="330" y="120" width="210" height="30" fill="#e1bee7" stroke="#9c27b0" stroke-width="1" rx="3"/>
                    <text x="435" y="140" text-anchor="middle" fill="#333" font-size="11">Model refinement</text>
                    
                    <!-- Arrow to Annotation -->
                    <line x1="560" y1="110" x2="590" y2="110" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    
                    <!-- Annotation Engine -->
                    <rect x="590" y="50" width="250" height="120" fill="#e8f5e9" stroke="#66bb6a" stroke-width="2" rx="5"/>
                    <text x="715" y="70" text-anchor="middle" fill="#66bb6a" font-size="14" font-weight="bold">Annotation Engine</text>
                    
                    <rect x="610" y="85" width="210" height="30" fill="#c8e6c9" stroke="#66bb6a" stroke-width="1" rx="3"/>
                    <text x="715" y="105" text-anchor="middle" fill="#333" font-size="11">Entity recognition + linking</text>
                    
                    <rect x="610" y="120" width="210" height="30" fill="#c8e6c9" stroke="#66bb6a" stroke-width="1" rx="3"/>
                    <text x="715" y="140" text-anchor="middle" fill="#333" font-size="11">Context understanding</text>
                    
                    <!-- Clinical Text Input -->
                    <rect x="310" y="195" width="250" height="50" fill="#e3f2fd" stroke="#1E64C8" stroke-width="2" rx="5"/>
                    <text x="435" y="215" text-anchor="middle" fill="#1E64C8" font-size="12" font-weight="bold">Clinical Text</text>
                    <text x="435" y="232" text-anchor="middle" fill="#333" font-size="10">"No evidence of MI. Patient stable."</text>
                    
                    <!-- Arrow up to annotation -->
                    <line x1="715" y1="170" x2="715" y2="195" stroke="#1E64C8" stroke-width="2"/>
                    <line x1="560" y1="195" x2="715" y2="195" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    
                    <!-- Output Analysis -->
                    <rect x="310" y="265" width="250" height="50" fill="#fff9c4" stroke="#fbc02d" stroke-width="2" rx="5"/>
                    <text x="435" y="282" text-anchor="middle" fill="#f57c00" font-size="12" font-weight="bold">Structured Output</text>
                    <text x="435" y="297" text-anchor="middle" fill="#333" font-size="9">Entity: MI | CUI: C0027051 | Negated: True</text>
                    <text x="435" y="310" text-anchor="middle" fill="#333" font-size="9">Context: Absence | Certainty: Definite</text>
                    
                    <!-- Arrow down to output -->
                    <line x1="435" y1="245" x2="435" y2="265" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                </svg>
            </div>

            <div class="feature-grid">
                <div class="feature-box">
                    <div class="feature-box-title">ü§ñ Unsupervised Learning</div>
                    <div class="feature-box-text">
                        MedCAT can learn medical concepts from unlabeled text using context-based embeddings. It builds vocabulary and concept relationships automatically from large clinical corpora without manual annotation.
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">üéØ Context Detection</div>
                    <div class="feature-box-text">
                        Advanced context analysis detects negation, temporality (past/present/future), experiencer (patient/family), and certainty. Understands "no history of diabetes" vs "diagnosed with diabetes".
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">üë®‚Äç‚öïÔ∏è Active Learning Interface</div>
                    <div class="feature-box-text">
                        MedCAT Trainer provides a web-based annotation interface where clinicians can correct and improve models. The system learns from corrections and improves over time.
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">üîó Multi-Ontology Support</div>
                    <div class="feature-box-text">
                        Links entities to SNOMED CT, UMLS, ICD-10, and custom ontologies. Supports hierarchical relationships and allows navigation of medical concept taxonomies.
                    </div>
                </div>
            </div>

            <div class="use-case">
                <div class="use-case-title">üí° Use Case Example</div>
                <div class="feature-box-text">
                    <strong>Clinical Decision Support:</strong> A healthcare system deploys MedCAT to extract structured data from clinical notes in real-time. The system identifies diagnoses, their context (confirmed, suspected, ruled out), and links them to SNOMED CT codes for clinical decision support and automated quality measures.
                </div>
            </div>

            <div class="code-block">
<span class="code-comment"># MedCAT implementation example</span>
<span class="code-keyword">from</span> medcat.cat <span class="code-keyword">import</span> CAT

<span class="code-comment"># Load pretrained model</span>
cat = CAT.<span class="code-function">load_model_pack</span>(<span class="code-string">"path/to/model_pack.zip"</span>)

<span class="code-comment"># Process clinical text</span>
text = <span class="code-string">"""Patient denies chest pain. History of hypertension, 
well controlled on lisinopril. No signs of heart failure."""</span>

entities = cat.<span class="code-function">get_entities</span>(text)

<span class="code-keyword">for</span> entity <span class="code-keyword">in</span> entities[<span class="code-string">'entities'</span>].values():
    <span class="code-function">print</span>(f<span class="code-string">"\nConcept: {entity['pretty_name']}"</span>)
    <span class="code-function">print</span>(f<span class="code-string">"SNOMED: {entity['cui']}"</span>)
    <span class="code-function">print</span>(f<span class="code-string">"Negated: {entity['meta_anns']['Negation']}"</span>)
    <span class="code-function">print</span>(f<span class="code-string">"Temporality: {entity['meta_anns']['Temporality']}"</span>)
            </div>
        </div>

        <!-- 3. BioBERT/ClinicalBERT Detailed Section -->
        <div class="detailed-section">
            <div class="detailed-title">
                <span style="font-size: 28px;">ü§ñ</span> BioBERT & ClinicalBERT: Transformer Models for Healthcare
            </div>
            
            <div class="description">
                <strong>BioBERT</strong> (Biomedical BERT) and <strong>ClinicalBERT</strong> are transformer-based language models pretrained on biomedical literature and clinical notes respectively. They leverage the BERT architecture with domain-specific pretraining to achieve state-of-the-art performance on various biomedical NLP tasks including named entity recognition, relation extraction, and question answering.
            </div>

            <div class="diagram-container">
                <svg width="100%" height="350" viewBox="0 0 870 350">
                    <text x="435" y="25" text-anchor="middle" fill="#1E64C8" font-size="16" font-weight="bold">BioBERT/ClinicalBERT Architecture</text>
                    
                    <!-- Pretraining Stage -->
                    <rect x="50" y="50" width="200" height="100" fill="#e8f5e9" stroke="#66bb6a" stroke-width="2" rx="5"/>
                    <text x="150" y="70" text-anchor="middle" fill="#66bb6a" font-size="13" font-weight="bold">Pretraining Corpus</text>
                    <text x="150" y="90" text-anchor="middle" fill="#333" font-size="11">BioBERT: PubMed + PMC</text>
                    <text x="150" y="105" text-anchor="middle" fill="#333" font-size="11">ClinicalBERT: MIMIC-III</text>
                    <text x="150" y="120" text-anchor="middle" fill="#333" font-size="11">BlueBERT: Both sources</text>
                    <text x="150" y="138" text-anchor="middle" fill="#666" font-size="10" font-style="italic">Masked Language Modeling</text>
                    
                    <!-- Arrow -->
                    <line x1="250" y1="100" x2="290" y2="100" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    
                    <!-- BERT Architecture -->
                    <rect x="290" y="50" width="280" height="100" fill="#e3f2fd" stroke="#1E64C8" stroke-width="2" rx="5"/>
                    <text x="430" y="70" text-anchor="middle" fill="#1E64C8" font-size="13" font-weight="bold">BERT Architecture</text>
                    
                    <!-- Transformer layers visualization -->
                    <rect x="310" y="85" width="70" height="55" fill="#90caf9" stroke="#1E64C8" stroke-width="1" rx="3"/>
                    <text x="345" y="100" text-anchor="middle" fill="#fff" font-size="9">Layer 12</text>
                    <text x="345" y="113" text-anchor="middle" fill="#fff" font-size="8">Multi-Head</text>
                    <text x="345" y="124" text-anchor="middle" fill="#fff" font-size="8">Attention</text>
                    <text x="345" y="135" text-anchor="middle" fill="#fff" font-size="8">+ FFN</text>
                    
                    <rect x="390" y="95" width="70" height="40" fill="#64b5f6" stroke="#1E64C8" stroke-width="1" rx="3"/>
                    <text x="425" y="110" text-anchor="middle" fill="#fff" font-size="9">Layer ...</text>
                    <text x="425" y="125" text-anchor="middle" fill="#fff" font-size="8">768 dims</text>
                    
                    <rect x="470" y="85" width="70" height="55" fill="#90caf9" stroke="#1E64C8" stroke-width="1" rx="3"/>
                    <text x="505" y="100" text-anchor="middle" fill="#fff" font-size="9">Layer 1</text>
                    <text x="505" y="113" text-anchor="middle" fill="#fff" font-size="8">Multi-Head</text>
                    <text x="505" y="124" text-anchor="middle" fill="#fff" font-size="8">Attention</text>
                    <text x="505" y="135" text-anchor="middle" fill="#fff" font-size="8">+ FFN</text>
                    
                    <!-- Arrow -->
                    <line x1="570" y1="100" x2="610" y2="100" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    
                    <!-- Fine-tuning -->
                    <rect x="610" y="50" width="200" height="100" fill="#fff3e0" stroke="#ff9800" stroke-width="2" rx="5"/>
                    <text x="710" y="70" text-anchor="middle" fill="#ff9800" font-size="13" font-weight="bold">Fine-tuning Tasks</text>
                    <text x="710" y="90" text-anchor="middle" fill="#333" font-size="11">‚Ä¢ NER (diseases, drugs)</text>
                    <text x="710" y="105" text-anchor="middle" fill="#333" font-size="11">‚Ä¢ Relation Extraction</text>
                    <text x="710" y="120" text-anchor="middle" fill="#333" font-size="11">‚Ä¢ Question Answering</text>
                    <text x="710" y="135" text-anchor="middle" fill="#333" font-size="11">‚Ä¢ Text Classification</text>
                    
                    <!-- Input Example -->
                    <rect x="50" y="180" width="380" height="60" fill="#f5f5f5" stroke="#757575" stroke-width="2" rx="5"/>
                    <text x="240" y="200" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">Input: Clinical Text</text>
                    <text x="240" y="218" text-anchor="middle" fill="#555" font-size="10">"Patient diagnosed with type 2 diabetes, started on metformin"</text>
                    
                    <!-- Tokenization -->
                    <line x1="240" y1="240" x2="240" y2="265" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    
                    <rect x="50" y="265" width="380" height="35" fill="#e0e0e0" stroke="#757575" stroke-width="1" rx="3"/>
                    <text x="240" y="283" text-anchor="middle" fill="#333" font-size="9">[CLS] patient diagnosed with type 2 diabetes , started on met ##formin [SEP]</text>
                    
                    <!-- Model Processing -->
                    <line x1="240" y1="300" x2="240" y2="320" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrowBlue)"/>
                    
                    <!-- Output -->
                    <rect x="460" y="180" width="380" height="150" fill="#e8f5e9" stroke="#66bb6a" stroke-width="2" rx="5"/>
                    <text x="650" y="200" text-anchor="middle" fill="#66bb6a" font-size="12" font-weight="bold">Output: Predictions</text>
                    
                    <rect x="480" y="215" width="340" height="25" fill="#c8e6c9" stroke="#66bb6a" stroke-width="1" rx="3"/>
                    <text x="650" y="231" text-anchor="middle" fill="#333" font-size="10">"type 2 diabetes" ‚Üí B-DISEASE, I-DISEASE, I-DISEASE</text>
                    
                    <rect x="480" y="245" width="340" height="25" fill="#c8e6c9" stroke="#66bb6a" stroke-width="1" rx="3"/>
                    <text x="650" y="261" text-anchor="middle" fill="#333" font-size="10">"metformin" ‚Üí B-DRUG</text>
                    
                    <rect x="480" y="275" width="340" height="25" fill="#c8e6c9" stroke="#66bb6a" stroke-width="1" rx="3"/>
                    <text x="650" y="291" text-anchor="middle" fill="#333" font-size="10">Confidence scores: 0.95, 0.92, 0.89</text>
                    
                    <rect x="480" y="305" width="340" height="20" fill="#ffecb3" stroke="#ffa000" stroke-width="1" rx="3"/>
                    <text x="650" y="319" text-anchor="middle" fill="#333" font-size="9">Entity linking possible with additional layer</text>
                </svg>
            </div>

            <div class="feature-grid">
                <div class="feature-box">
                    <div class="feature-box-title">üìö Domain Pretraining</div>
                    <div class="feature-box-text">
                        BioBERT trained on 4.5B words from PubMed abstracts and PMC full-text articles. ClinicalBERT trained on MIMIC-III clinical notes. This domain-specific pretraining provides deep understanding of medical language and terminology.
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">üéØ State-of-the-Art Performance</div>
                    <div class="feature-box-text">
                        Achieves best results on BC5CDR (chemical/disease NER), ChemProt (relation extraction), and BioASQ (question answering). F1 scores typically 85-90% on biomedical NER tasks.
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">üîß Easy Fine-tuning</div>
                    <div class="feature-box-text">
                        Integrated with Hugging Face Transformers library. Simple fine-tuning API with just a few lines of code. Supports transfer learning for new tasks with limited labeled data (few-shot learning).
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">üåê Multiple Variants</div>
                    <div class="feature-box-text">
                        Various sizes available: BioBERT-Base (110M params), BioBERT-Large (340M params), BlueBERT (PubMed + MIMIC), PubMedBERT (from scratch). Choose based on accuracy vs speed requirements.
                    </div>
                </div>
            </div>

            <div class="use-case">
                <div class="use-case-title">üí° Use Case Example</div>
                <div class="feature-box-text">
                    <strong>Clinical Trial Matching:</strong> A research institution uses BioBERT to extract patient conditions and medications from EHRs, then matches patients to relevant clinical trials based on inclusion/exclusion criteria. The model identifies complex medical concepts and their relationships with high accuracy.
                </div>
            </div>

            <div class="code-block">
<span class="code-comment"># BioBERT for Named Entity Recognition</span>
<span class="code-keyword">from</span> transformers <span class="code-keyword">import</span> (
    AutoTokenizer, 
    AutoModelForTokenClassification,
    pipeline
)

<span class="code-comment"># Load BioBERT NER model</span>
model_name = <span class="code-string">"dmis-lab/biobert-base-cased-v1.2"</span>
tokenizer = AutoTokenizer.<span class="code-function">from_pretrained</span>(model_name)
model = AutoModelForTokenClassification.<span class="code-function">from_pretrained</span>(
    <span class="code-string">"alvaroalon2/biobert_diseases_ner"</span>
)

<span class="code-comment"># Create NER pipeline</span>
ner_pipeline = <span class="code-function">pipeline</span>(
    <span class="code-string">"ner"</span>,
    model=model,
    tokenizer=tokenizer,
    aggregation_strategy=<span class="code-string">"simple"</span>
)

<span class="code-comment"># Process text</span>
text = <span class="code-string">"""Patient presents with acute myocardial infarction. 
History of type 2 diabetes mellitus and hypertension. 
Started on aspirin and metformin."""</span>

entities = <span class="code-function">ner_pipeline</span>(text)

<span class="code-keyword">for</span> entity <span class="code-keyword">in</span> entities:
    <span class="code-function">print</span>(f<span class="code-string">"{entity['word']} | {entity['entity_group']} | Score: {entity['score']:.3f}"</span>)
            </div>
        </div>

        <!-- 4. Evaluation Metrics Detailed Section -->
        <div class="detailed-section">
            <div class="detailed-title">
                <span style="font-size: 28px;">üìä</span> Evaluation Metrics for Clinical NLP
            </div>
            
            <div class="description">
                <strong>Evaluation metrics</strong> are essential for measuring the performance of NLP models. In clinical NLP, we need to carefully assess how well models identify medical entities, link them to correct concepts, and maintain high accuracy across diverse clinical texts. Understanding precision, recall, and F1 score helps us compare models and ensure they meet clinical requirements.
            </div>

            <div class="diagram-container">
                <svg width="100%" height="380" viewBox="0 0 870 380">
                    <text x="435" y="25" text-anchor="middle" fill="#1E64C8" font-size="16" font-weight="bold">Evaluation Metrics Framework</text>
                    
                    <!-- Confusion Matrix -->
                    <text x="150" y="55" text-anchor="middle" fill="#1E64C8" font-size="14" font-weight="bold">Confusion Matrix</text>
                    
                    <rect x="50" y="70" width="200" height="160" fill="white" stroke="#1E64C8" stroke-width="2" rx="5"/>
                    
                    <!-- Headers -->
                    <text x="90" y="90" text-anchor="middle" fill="#666" font-size="11" font-weight="bold">Predicted</text>
                    <text x="30" y="150" text-anchor="middle" fill="#666" font-size="11" font-weight="bold" transform="rotate(-90 30 150)">Actual</text>
                    
                    <!-- Column headers -->
                    <text x="125" y="105" text-anchor="middle" fill="#333" font-size="10">Positive</text>
                    <text x="200" y="105" text-anchor="middle" fill="#333" font-size="10">Negative</text>
                    
                    <!-- Row headers -->
                    <text x="65" y="145" text-anchor="end" fill="#333" font-size="10">Positive</text>
                    <text x="65" y="195" text-anchor="end" fill="#333" font-size="10">Negative</text>
                    
                    <!-- TP -->
                    <rect x="75" y="115" width="95" height="50" fill="#4caf50" stroke="#2e7d32" stroke-width="1" rx="3"/>
                    <text x="122" y="135" text-anchor="middle" fill="white" font-size="12" font-weight="bold">TP</text>
                    <text x="122" y="150" text-anchor="middle" fill="white" font-size="10">True Positive</text>
                    <text x="122" y="162" text-anchor="middle" fill="white" font-size="9">Correctly identified</text>
                    
                    <!-- FP -->
                    <rect x="175" y="115" width="65" height="50" fill="#f44336" stroke="#c62828" stroke-width="1" rx="3"/>
                    <text x="207" y="135" text-anchor="middle" fill="white" font-size="12" font-weight="bold">FP</text>
                    <text x="207" y="150" text-anchor="middle" fill="white" font-size="10">False Pos</text>
                    <text x="207" y="162" text-anchor="middle" fill="white" font-size="9">Incorrect</text>
                    
                    <!-- FN -->
                    <rect x="75" y="170" width="95" height="50" fill="#ff9800" stroke="#ef6c00" stroke-width="1" rx="3"/>
                    <text x="122" y="190" text-anchor="middle" fill="white" font-size="12" font-weight="bold">FN</text>
                    <text x="122" y="205" text-anchor="middle" fill="white" font-size="10">False Neg</text>
                    <text x="122" y="217" text-anchor="middle" fill="white" font-size="9">Missed</text>
                    
                    <!-- TN -->
                    <rect x="175" y="170" width="65" height="50" fill="#2196f3" stroke="#1565c0" stroke-width="1" rx="3"/>
                    <text x="207" y="190" text-anchor="middle" fill="white" font-size="12" font-weight="bold">TN</text>
                    <text x="207" y="205" text-anchor="middle" fill="white" font-size="10">True Neg</text>
                    <text x="207" y="217" text-anchor="middle" fill="white" font-size="9">Correct</text>
                    
                    <!-- Metrics Formulas -->
                    <rect x="290" y="70" width="550" height="160" fill="#f5f5f5" stroke="#1E64C8" stroke-width="2" rx="5"/>
                    <text x="565" y="90" text-anchor="middle" fill="#1E64C8" font-size="14" font-weight="bold">Metric Formulas</text>
                    
                    <!-- Precision -->
                    <rect x="310" y="105" width="250" height="35" fill="#e3f2fd" stroke="#1E64C8" stroke-width="1" rx="3"/>
                    <text x="320" y="122" fill="#1E64C8" font-size="12" font-weight="bold">Precision:</text>
                    <text x="320" y="136" fill="#333" font-size="11">TP / (TP + FP)</text>
                    <text x="480" y="128" fill="#666" font-size="9">"How many predicted</text>
                    <text x="480" y="138" fill="#666" font-size="9">entities are correct?"</text>
                    
                    <!-- Recall -->
                    <rect x="310" y="145" width="250" height="35" fill="#e8f5e9" stroke="#66bb6a" stroke-width="1" rx="3"/>
                    <text x="320" y="162" fill="#66bb6a" font-size="12" font-weight="bold">Recall:</text>
                    <text x="320" y="176" fill="#333" font-size="11">TP / (TP + FN)</text>
                    <text x="480" y="168" fill="#666" font-size="9">"How many actual</text>
                    <text x="480" y="178" fill="#666" font-size="9">entities were found?"</text>
                    
                    <!-- F1 Score -->
                    <rect x="310" y="185" width="250" height="40" fill="#fff3e0" stroke="#ff9800" stroke-width="1" rx="3"/>
                    <text x="320" y="202" fill="#ff9800" font-size="12" font-weight="bold">F1 Score:</text>
                    <text x="320" y="218" fill="#333" font-size="11">2 √ó (Precision √ó Recall) / (Precision + Recall)</text>
                    <text x="480" y="210" fill="#666" font-size="9">"Harmonic mean</text>
                    <text x="480" y="220" fill="#666" font-size="9">of both metrics"</text>
                    
                    <!-- Accuracy -->
                    <rect x="580" y="105" width="240" height="35" fill="#f3e5f5" stroke="#9c27b0" stroke-width="1" rx="3"/>
                    <text x="590" y="122" fill="#9c27b0" font-size="12" font-weight="bold">Accuracy:</text>
                    <text x="590" y="136" fill="#333" font-size="11">(TP + TN) / (TP + TN + FP + FN)</text>
                    <text x="750" y="128" fill="#666" font-size="9">"Overall</text>
                    <text x="750" y="138" fill="#666" font-size="9">correctness"</text>
                    
                    <!-- Specificity -->
                    <rect x="580" y="145" width="240" height="35" fill="#fce4ec" stroke="#e91e63" stroke-width="1" rx="3"/>
                    <text x="590" y="162" fill="#e91e63" font-size="12" font-weight="bold">Specificity:</text>
                    <text x="590" y="176" fill="#333" font-size="11">TN / (TN + FP)</text>
                    <text x="750" y="168" fill="#666" font-size="9">"True negative</text>
                    <text x="750" y="178" fill="#666" font-size="9">rate"</text>
                    
                    <!-- Example Calculation -->
                    <rect x="50" y="255" width="790" height="110" fill="#e8f5e9" stroke="#66bb6a" stroke-width="2" rx="5"/>
                    <text x="445" y="275" text-anchor="middle" fill="#66bb6a" font-size="14" font-weight="bold">Example: Disease Entity Recognition</text>
                    
                    <text x="70" y="295" fill="#333" font-size="11">Ground Truth: ["diabetes", "hypertension", "heart failure"]</text>
                    <text x="70" y="310" fill="#333" font-size="11">Predictions: ["diabetes", "hypertension", "cardiac arrest"]</text>
                    
                    <rect x="70" y="320" width="230" height="35" fill="white" stroke="#66bb6a" stroke-width="1" rx="3"/>
                    <text x="80" y="335" fill="#333" font-size="10">TP = 2 (diabetes, hypertension)</text>
                    <text x="80" y="348" fill="#333" font-size="10">FP = 1 (cardiac arrest)</text>
                    
                    <rect x="320" y="320" width="230" height="35" fill="white" stroke="#66bb6a" stroke-width="1" rx="3"/>
                    <text x="330" y="335" fill="#333" font-size="10">FN = 1 (heart failure missed)</text>
                    <text x="330" y="348" fill="#333" font-size="10">TN = N/A (open-ended task)</text>
                    
                    <rect x="570" y="320" width="250" height="35" fill="#c8e6c9" stroke="#66bb6a" stroke-width="2" rx="3"/>
                    <text x="580" y="333" fill="#2e7d32" font-size="10" font-weight="bold">Precision = 2/3 = 0.67 (67%)</text>
                    <text x="580" y="346" fill="#2e7d32" font-size="10" font-weight="bold">Recall = 2/3 = 0.67 (67%)</text>
                    <text x="580" y="358" fill="#ff6f00" font-size="10" font-weight="bold">F1 Score = 0.67</text>
                </svg>
            </div>

            <div class="feature-grid">
                <div class="feature-box">
                    <div class="feature-box-title">üéØ Precision</div>
                    <div class="feature-box-text">
                        Measures correctness of predictions. High precision means few false positives. Critical in clinical settings to avoid incorrect diagnoses or treatment recommendations. Example: Of 100 predicted diseases, how many are actually correct?
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">üîç Recall (Sensitivity)</div>
                    <div class="feature-box-text">
                        Measures completeness of predictions. High recall means few missed entities. Essential for patient safety to ensure no critical conditions are overlooked. Example: Of 100 actual diseases in text, how many did we find?
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">‚öñÔ∏è F1 Score</div>
                    <div class="feature-box-text">
                        Harmonic mean balancing precision and recall. Single metric for model comparison. F1 of 0.85+ considered good for clinical NLP. Use F1-macro for class imbalance, F1-micro for overall performance.
                    </div>
                </div>
                
                <div class="feature-box">
                    <div class="feature-box-title">üìè Evaluation Levels</div>
                    <div class="feature-box-text">
                        <strong>Token-level:</strong> Each token scored separately. <strong>Entity-level:</strong> Entire entity must match exactly (strict) or overlap partially (relaxed). <strong>Span-level:</strong> Boundaries must match. Clinical NLP typically uses strict entity-level evaluation.
                    </div>
                </div>
            </div>

            <div class="use-case">
                <div class="use-case-title">üí° Use Case Example</div>
                <div class="feature-box-text">
                    <strong>Model Selection for Deployment:</strong> A hospital compares three NER models: Model A (Precision: 0.95, Recall: 0.75, F1: 0.84), Model B (P: 0.85, R: 0.90, F1: 0.87), Model C (P: 0.88, R: 0.88, F1: 0.88). They choose Model B for a screening application where missing conditions is more dangerous than false positives, while Model A might be better for automated billing where precision matters more.
                </div>
            </div>

            <div class="code-block">
<span class="code-comment"># Calculate evaluation metrics for NER</span>
<span class="code-keyword">from</span> sklearn.metrics <span class="code-keyword">import</span> precision_recall_fscore_support, classification_report
<span class="code-keyword">import</span> numpy <span class="code-keyword">as</span> np

<span class="code-comment"># True labels and predictions (IOB format)</span>
y_true = [<span class="code-string">'O'</span>, <span class="code-string">'B-DIS'</span>, <span class="code-string">'I-DIS'</span>, <span class="code-string">'O'</span>, <span class="code-string">'B-DRUG'</span>, <span class="code-string">'O'</span>]
y_pred = [<span class="code-string">'O'</span>, <span class="code-string">'B-DIS'</span>, <span class="code-string">'I-DIS'</span>, <span class="code-string">'O'</span>, <span class="code-string">'O'</span>, <span class="code-string">'O'</span>]

<span class="code-comment"># Calculate metrics</span>
precision, recall, f1, support = <span class="code-function">precision_recall_fscore_support</span>(
    y_true, y_pred, average=<span class="code-string">'weighted'</span>, zero_division=0
)

<span class="code-function">print</span>(f<span class="code-string">"Precision: {precision:.3f}"</span>)
<span class="code-function">print</span>(f<span class="code-string">"Recall: {recall:.3f}"</span>)
<span class="code-function">print</span>(f<span class="code-string">"F1 Score: {f1:.3f}"</span>)

<span class="code-comment"># Detailed report by entity type</span>
<span class="code-function">print</span>(<span class="code-string">"\nClassification Report:"</span>)
<span class="code-function">print</span>(<span class="code-function">classification_report</span>(y_true, y_pred))

<span class="code-comment"># Entity-level evaluation (exact match)</span>
<span class="code-keyword">def</span> <span class="code-function">entity_level_f1</span>(true_entities, pred_entities):
    tp = <span class="code-function">len</span>(true_entities.intersection(pred_entities))
    fp = <span class="code-function">len</span>(pred_entities - true_entities)
    fn = <span class="code-function">len</span>(true_entities - pred_entities)
    
    precision = tp / (tp + fp) <span class="code-keyword">if</span> (tp + fp) > 0 <span class="code-keyword">else</span> 0
    recall = tp / (tp + fn) <span class="code-keyword">if</span> (tp + fn) > 0 <span class="code-keyword">else</span> 0
    f1 = 2 * precision * recall / (precision + recall) <span class="code-keyword">if</span> (precision + recall) > 0 <span class="code-keyword">else</span> 0
    
    <span class="code-keyword">return</span> precision, recall, f1

<span class="code-comment"># Example usage</span>
true_ents = {(<span class="code-string">'diabetes'</span>, 10, 18), (<span class="code-string">'hypertension'</span>, 25, 37)}
pred_ents = {(<span class="code-string">'diabetes'</span>, 10, 18), (<span class="code-string">'heart failure'</span>, 40, 53)}

p, r, f = <span class="code-function">entity_level_f1</span>(true_ents, pred_ents)
<span class="code-function">print</span>(f<span class="code-string">"\nEntity-level - Precision: {p:.2f}, Recall: {r:.2f}, F1: {f:.2f}"</span>)
            </div>
        </div>

        <!-- Footer -->
        <div style="margin-top: 50px; padding: 20px; background: #f0f7ff; border-radius: 10px; text-align: center;">
            <p style="color: #1E64C8; font-size: 16px; font-weight: 600; margin-bottom: 10px;">
                üéì Clinical NLP Best Practices
            </p>
            <p style="color: #555; font-size: 13px; line-height: 1.6;">
                Always validate models on diverse clinical datasets ‚Ä¢ Consider domain adaptation for your specific use case ‚Ä¢ 
                Monitor performance in production ‚Ä¢ Ensure compliance with healthcare regulations (HIPAA, GDPR) ‚Ä¢ 
                Involve clinical experts in evaluation ‚Ä¢ Test for bias across patient demographics
            </p>
        </div>

    </div>
</body>
</html>