<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hands-on: OMOP CDM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Aptos, 'Segoe UI', sans-serif;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            width: 960px;
            padding: 35px 45px;
            background: white;
        }
        
        .title {
            font-size: 32px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 35px;
            text-align: center;
        }
        
        .omop-structure-diagram {
            margin-bottom: 30px;
            background: #f8fbff;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 25px;
        }
        
        .content-grid-4 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .content-card {
            background: #f8fbff;
            border: 2.5px solid #1E64C8;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .content-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(30, 100, 200, 0.2);
        }
        
        .content-title {
            font-size: 19px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .content-list {
            font-size: 16px;
            color: #333;
            line-height: 1.7;
        }
        
        .bullet {
            display: flex;
            align-items: flex-start;
            margin-bottom: 6px;
        }
        
        .bullet::before {
            content: "‚Ä¢";
            color: #1E64C8;
            font-weight: bold;
            margin-right: 8px;
            font-size: 18px;
            flex-shrink: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Hands-on: OMOP CDM</div>
        
        <!-- OMOP CDM Structure Diagram -->
        <div class="omop-structure-diagram">
            <svg width="100%" height="280" viewBox="0 0 870 280">
                <!-- Title -->
                <text x="435" y="20" text-anchor="middle" fill="#1E64C8" font-size="16" font-weight="bold">OMOP Common Data Model Structure</text>
                
                <!-- Clinical Data Tables -->
                <g>
                    <text x="145" y="45" text-anchor="middle" fill="#1E64C8" font-size="13" font-weight="bold">Clinical Data</text>
                    
                    <!-- Person -->
                    <rect x="60" y="55" width="170" height="30" fill="#1E64C8" rx="5"/>
                    <text x="145" y="75" text-anchor="middle" fill="white" font-size="11" font-weight="bold">PERSON</text>
                    
                    <!-- Visit Occurrence -->
                    <rect x="60" y="92" width="170" height="25" fill="#2874d8" rx="4"/>
                    <text x="145" y="108" text-anchor="middle" fill="white" font-size="10">VISIT_OCCURRENCE</text>
                    
                    <!-- Condition Occurrence -->
                    <rect x="60" y="124" width="170" height="25" fill="#2874d8" rx="4"/>
                    <text x="145" y="140" text-anchor="middle" fill="white" font-size="10">CONDITION_OCCURRENCE</text>
                    
                    <!-- Drug Exposure -->
                    <rect x="60" y="156" width="170" height="25" fill="#2874d8" rx="4"/>
                    <text x="145" y="172" text-anchor="middle" fill="white" font-size="10">DRUG_EXPOSURE</text>
                    
                    <!-- Procedure Occurrence -->
                    <rect x="60" y="188" width="170" height="25" fill="#2874d8" rx="4"/>
                    <text x="145" y="204" text-anchor="middle" fill="white" font-size="10">PROCEDURE_OCCURRENCE</text>
                    
                    <!-- Measurement -->
                    <rect x="60" y="220" width="170" height="25" fill="#2874d8" rx="4"/>
                    <text x="145" y="236" text-anchor="middle" fill="white" font-size="10">MEASUREMENT</text>
                </g>
                
                <!-- Standardized Vocabularies -->
                <g>
                    <text x="435" y="45" text-anchor="middle" fill="#1E64C8" font-size="13" font-weight="bold">Standardized Vocabularies</text>
                    
                    <!-- Concept -->
                    <rect x="350" y="55" width="170" height="30" fill="#5088d4" rx="5"/>
                    <text x="435" y="75" text-anchor="middle" fill="white" font-size="11" font-weight="bold">CONCEPT</text>
                    
                    <!-- Vocabulary -->
                    <rect x="350" y="92" width="170" height="25" fill="#6ba3e0" rx="4"/>
                    <text x="435" y="108" text-anchor="middle" fill="white" font-size="10">VOCABULARY</text>
                    
                    <!-- Domain -->
                    <rect x="350" y="124" width="170" height="25" fill="#6ba3e0" rx="4"/>
                    <text x="435" y="140" text-anchor="middle" fill="white" font-size="10">DOMAIN</text>
                    
                    <!-- Concept Class -->
                    <rect x="350" y="156" width="170" height="25" fill="#6ba3e0" rx="4"/>
                    <text x="435" y="172" text-anchor="middle" fill="white" font-size="10">CONCEPT_CLASS</text>
                    
                    <!-- Concept Relationship -->
                    <rect x="350" y="188" width="170" height="25" fill="#6ba3e0" rx="4"/>
                    <text x="435" y="204" text-anchor="middle" fill="white" font-size="10">CONCEPT_RELATIONSHIP</text>
                    
                    <!-- Concept Ancestor -->
                    <rect x="350" y="220" width="170" height="25" fill="#6ba3e0" rx="4"/>
                    <text x="435" y="236" text-anchor="middle" fill="white" font-size="10">CONCEPT_ANCESTOR</text>
                </g>
                
                <!-- Derived Tables -->
                <g>
                    <text x="725" y="45" text-anchor="middle" fill="#1E64C8" font-size="13" font-weight="bold">Derived Tables</text>
                    
                    <!-- Cohort -->
                    <rect x="640" y="55" width="170" height="30" fill="#66bb6a" rx="5"/>
                    <text x="725" y="75" text-anchor="middle" fill="white" font-size="11" font-weight="bold">COHORT</text>
                    
                    <!-- Cohort Definition -->
                    <rect x="640" y="92" width="170" height="25" fill="#81c784" rx="4"/>
                    <text x="725" y="108" text-anchor="middle" fill="white" font-size="10">COHORT_DEFINITION</text>
                    
                    <!-- Drug Era -->
                    <rect x="640" y="124" width="170" height="25" fill="#81c784" rx="4"/>
                    <text x="725" y="140" text-anchor="middle" fill="white" font-size="10">DRUG_ERA</text>
                    
                    <!-- Condition Era -->
                    <rect x="640" y="156" width="170" height="25" fill="#81c784" rx="4"/>
                    <text x="725" y="172" text-anchor="middle" fill="white" font-size="10">CONDITION_ERA</text>
                    
                    <!-- Observation Period -->
                    <rect x="640" y="188" width="170" height="25" fill="#81c784" rx="4"/>
                    <text x="725" y="204" text-anchor="middle" fill="white" font-size="10">OBSERVATION_PERIOD</text>
                </g>
                
                <!-- Connecting lines showing relationships -->
                <defs>
                    <marker id="arrow8" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                        <polygon points="0 0, 8 3, 0 6" fill="#1E64C8" />
                    </marker>
                </defs>
                
                <!-- Clinical to Vocabulary -->
                <line x1="230" y1="140" x2="350" y2="140" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrow8)"/>
                
                <!-- Vocabulary to Derived -->
                <line x1="520" y1="140" x2="640" y2="140" stroke="#1E64C8" stroke-width="2" marker-end="url(#arrow8)"/>
                
                <!-- ETL Process Arrow -->
                <rect x="260" y="125" width="60" height="30" fill="#ff9800" rx="5"/>
                <text x="290" y="144" text-anchor="middle" fill="white" font-size="10" font-weight="bold">ETL</text>
                
                <!-- Analytics Arrow -->
                <rect x="550" y="125" width="60" height="30" fill="#ff9800" rx="5"/>
                <text x="580" y="144" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Analytics</text>
                
                <!-- Bottom: Example Query -->
                <rect x="50" y="255" width="770" height="20" fill="#f0f5fc" stroke="#1E64C8" stroke-width="1" rx="3"/>
                <text x="60" y="268" fill="#1E64C8" font-size="10" font-family="monospace">SELECT * FROM condition_occurrence WHERE condition_concept_id = 201826 -- Type 2 Diabetes</text>
            </svg>
        </div>
        
        <div class="content-grid-4">
            <div class="content-card">
                <div class="content-title">üìä Data Model</div>
                <div class="content-list">
                    <div class="bullet">Standardized table structure</div>
                    <div class="bullet">Person-centric design</div>
                    <div class="bullet">Temporal relationships</div>
                    <div class="bullet">Standard vocabularies</div>
                    <div class="bullet">Source value preservation</div>
                </div>
            </div>
            <div class="content-card">
                <div class="content-title">üîÑ ETL Process</div>
                <div class="content-list">
                    <div class="bullet">Source to standard mapping</div>
                    <div class="bullet">Concept ID assignment</div>
                    <div class="bullet">Date standardization</div>
                    <div class="bullet">White Rabbit profiling</div>
                    <div class="bullet">Rabbit-in-a-Hat mapping</div>
                </div>
            </div>
            <div class="content-card">
                <div class="content-title">üõ†Ô∏è OHDSI Tools</div>
                <div class="content-list">
                    <div class="bullet">ATLAS: Cohort builder</div>
                    <div class="bullet">ACHILLES: Data quality</div>
                    <div class="bullet">HADES: R packages</div>
                    <div class="bullet">PLP: Prediction models</div>
                    <div class="bullet">CohortMethod: Causal inference</div>
                </div>
            </div>
            <div class="content-card">
                <div class="content-title">üìà Example Analysis</div>
                <div class="content-list">
                    <div class="bullet">Define T2DM cohort</div>
                    <div class="bullet">Characterize demographics</div>
                    <div class="bullet">Compare treatments</div>
                    <div class="bullet">Predict outcomes</div>
                    <div class="bullet">Network studies</div>
                </div>
            </div>
        

        <!-- Detailed Sections Begin -->
        <div class="section-divider" style="height: 3px; background: linear-gradient(to right, #1E64C8, #5088d4, #1E64C8); margin: 50px 0 40px 0; border-radius: 2px;"></div>

        <!-- Additional CSS for detailed sections -->
        <style>
            .detailed-section { margin-bottom: 60px; }
            .section-header { font-size: 28px; font-weight: 700; color: #1E64C8; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 3px solid #1E64C8; display: flex; align-items: center; gap: 15px; }
            .section-icon { font-size: 32px; }
            .detailed-content { background: #f8fbff; border: 2px solid #e3f2fd; border-radius: 10px; padding: 30px; margin-bottom: 25px; }
            .subsection-title { font-size: 20px; font-weight: 600; color: #2874d8; margin: 25px 0 15px 0; }
            .subsection-title::before { content: "‚ñ∏ "; color: #1E64C8; }
            .description-text { font-size: 16px; color: #333; line-height: 1.8; margin-bottom: 20px; text-align: justify; }
            .diagram-box { background: white; border: 2px solid #1E64C8; border-radius: 10px; padding: 25px; margin: 25px 0; }
            .diagram-title { font-size: 16px; font-weight: 600; color: #1E64C8; text-align: center; margin-bottom: 20px; }
            .example-box { background: #fff8e1; border-left: 4px solid #ff9800; padding: 20px; margin: 20px 0; border-radius: 5px; }
            .example-title { font-size: 16px; font-weight: 600; color: #f57c00; margin-bottom: 10px; }
            .example-title::before { content: "üí° "; }
            .code-block { background: #263238; color: #aed581; padding: 20px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 13px; overflow-x: auto; margin: 15px 0; line-height: 1.6; white-space: pre; }
            .code-comment { color: #78909c; }
            .key-points { background: #e8f5e9; border-left: 4px solid #66bb6a; padding: 20px; margin: 20px 0; border-radius: 5px; }
            .key-points-title { font-size: 16px; font-weight: 600; color: #2e7d32; margin-bottom: 12px; }
            .key-points-title::before { content: "‚úì "; }
            .key-point-item { font-size: 15px; color: #1b5e20; margin: 8px 0; padding-left: 20px; position: relative; }
            .key-point-item::before { content: "‚Üí"; position: absolute; left: 0; color: #66bb6a; font-weight: bold; }
            .workflow-step { background: white; border: 2px solid #2874d8; border-radius: 8px; padding: 15px 20px; margin: 12px 0; display: flex; align-items: center; gap: 15px; transition: all 0.3s; }
            .workflow-step:hover { background: #f0f7ff; transform: translateX(5px); }
            .step-number { background: #1E64C8; color: white; width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 16px; flex-shrink: 0; }
            .step-content { flex: 1; }
            .step-title { font-size: 16px; font-weight: 600; color: #1E64C8; margin-bottom: 5px; }
            .step-description { font-size: 14px; color: #555; line-height: 1.5; }
            .detail-table { width: 100%; border-collapse: collapse; margin: 20px 0; background: white; border-radius: 8px; overflow: hidden; }
            .detail-table thead { background: #1E64C8; color: white; }
            .detail-table th { padding: 15px; text-align: left; font-weight: 600; font-size: 14px; }
            .detail-table td { padding: 12px 15px; border-bottom: 1px solid #e0e0e0; font-size: 14px; color: #333; }
            .detail-table tr:hover { background: #f5f5f5; }
            .tool-card { background: white; border: 2px solid #5088d4; border-radius: 8px; padding: 20px; margin: 15px 0; }
            .tool-name { font-size: 18px; font-weight: 600; color: #1E64C8; margin-bottom: 10px; }
            .tool-description { font-size: 14px; color: #555; line-height: 1.6; margin-bottom: 12px; }
            .tool-features { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }
            .feature-tag { background: #e3f2fd; color: #1565c0; padding: 6px 12px; border-radius: 15px; font-size: 12px; font-weight: 500; }
            .final-cta { margin-top: 40px; padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; text-align: center; color: white; }
        </style>

        <!-- Section 1: Data Model Details -->
        <div class="detailed-section">
            <div class="section-header">
                <span class="section-icon">üìä</span>
                <span>1. OMOP Common Data Model Structure</span>
            </div>
            
            <div class="detailed-content">
                <p class="description-text">
                    The OMOP Common Data Model (CDM) is a standardized data structure designed to facilitate observational health research. 
                    It enables systematic analysis of disparate healthcare data across different institutions and countries by providing 
                    a unified schema that ensures consistency in data representation, terminology, and relationships.
                </p>

                <div class="subsection-title">Core Design Principles</div>
                
                <div class="key-points">
                    <div class="key-points-title">Person-Centric Design</div>
                    <div class="key-point-item">All clinical events are linked to a unique person_id</div>
                    <div class="key-point-item">Enables longitudinal patient journey analysis</div>
                    <div class="key-point-item">Maintains patient privacy through de-identification</div>
                    <div class="key-point-item">Supports population-level and individual-level analyses</div>
                </div>

                <table class="detail-table">
                    <thead>
                        <tr>
                            <th>Table Category</th>
                            <th>Purpose</th>
                            <th>Key Tables</th>
                            <th>Primary Use</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Clinical Data</strong></td>
                            <td>Store patient health records</td>
                            <td>PERSON, VISIT_OCCURRENCE, CONDITION_OCCURRENCE</td>
                            <td>Core clinical information</td>
                        </tr>
                        <tr>
                            <td><strong>Vocabulary</strong></td>
                            <td>Standardize medical concepts</td>
                            <td>CONCEPT, CONCEPT_RELATIONSHIP, CONCEPT_ANCESTOR</td>
                            <td>Terminology mapping</td>
                        </tr>
                        <tr>
                            <td><strong>Derived</strong></td>
                            <td>Aggregated/computed data</td>
                            <td>COHORT, DRUG_ERA, CONDITION_ERA</td>
                            <td>Analytics and research</td>
                        </tr>
                        <tr>
                            <td><strong>Metadata</strong></td>
                            <td>Data provenance info</td>
                            <td>CDM_SOURCE, METADATA</td>
                            <td>Documentation</td>
                        </tr>
                    </tbody>
                </table>

                <div class="example-box">
                    <div class="example-title">Example: Person Table Structure</div>
                    <div class="code-block">-- PERSON table stores demographic information
CREATE TABLE person (
    person_id           INTEGER     PRIMARY KEY,
    gender_concept_id   INTEGER     NOT NULL,
    year_of_birth       INTEGER     NOT NULL,
    race_concept_id     INTEGER     NOT NULL,
    ethnicity_concept_id INTEGER    NOT NULL
);

-- Example query: Count patients by gender
SELECT c.concept_name AS gender, 
       COUNT(*) AS patient_count
FROM person p
JOIN concept c ON p.gender_concept_id = c.concept_id
GROUP BY c.concept_name;</div>
                </div>
            </div>
        </div>

        <!-- Section 2: ETL Process Details -->
        <div class="detailed-section">
            <div class="section-header">
                <span class="section-icon">üîÑ</span>
                <span>2. ETL (Extract, Transform, Load) Process</span>
            </div>
            
            <div class="detailed-content">
                <p class="description-text">
                    The ETL process is the critical step of converting source healthcare data into the OMOP CDM format. 
                    This involves extracting data from various source systems, transforming it to match the OMOP structure 
                    and standardized vocabularies, and loading it into the CDM database.
                </p>

                <div class="subsection-title">ETL Steps in Detail</div>

                <div class="workflow-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">Data Profiling with White Rabbit</div>
                        <div class="step-description">
                            Scan source database to understand structure, identify tables and fields, analyze value distributions, 
                            and detect data quality issues.
                        </div>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">Visual Mapping with Rabbit-in-a-Hat</div>
                        <div class="step-description">
                            Create visual mappings from source to OMOP tables using drag-and-drop interface for field-level mapping.
                        </div>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">Vocabulary Mapping</div>
                        <div class="step-description">
                            Map source codes to standard OMOP concepts using USAGI tool and CONCEPT_RELATIONSHIP table.
                        </div>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <div class="step-title">ETL Code Development</div>
                        <div class="step-description">
                            Write SQL or ETL scripts to transform data, implement business logic, and ensure referential integrity.
                        </div>
                    </div>
                </div>

                <div class="example-box">
                    <div class="example-title">Example: ICD-10 to SNOMED Mapping</div>
                    <div class="code-block">-- ETL Transformation to OMOP CDM
INSERT INTO condition_occurrence (
    person_id,
    condition_concept_id,        -- Mapped to SNOMED
    condition_start_date,
    condition_source_value       -- Original ICD-10 code
)
SELECT 
    patient_id AS person_id,
    201826 AS condition_concept_id,  -- SNOMED: Type 2 DM
    diagnosis_date,
    icd10_code
FROM source.diagnosis
WHERE icd10_code = 'E11.9';</div>
                </div>

                <div class="key-points">
                    <div class="key-points-title">Critical ETL Considerations</div>
                    <div class="key-point-item">Preserve source values in _source_value fields for traceability</div>
                    <div class="key-point-item">Use appropriate type_concept_ids to indicate data provenance</div>
                    <div class="key-point-item">Implement incremental loading strategies for large datasets</div>
                    <div class="key-point-item">Document all mapping decisions and business logic</div>
                    <div class="key-point-item">Validate cardinality relationships and temporal ordering</div>
                </div>
            </div>
        </div>

        <!-- Section 3: OHDSI Tools Details -->
        <div class="detailed-section">
            <div class="section-header">
                <span class="section-icon">üõ†Ô∏è</span>
                <span>3. OHDSI Ecosystem Tools</span>
            </div>
            
            <div class="detailed-content">
                <p class="description-text">
                    The OHDSI community has developed a comprehensive suite of open-source tools for working with OMOP CDM data. 
                    These tools span the entire research lifecycle, from data quality assessment to cohort definition, statistical analysis, 
                    and evidence generation.
                </p>

                <div class="subsection-title">Core OHDSI Tools</div>

                <div class="tool-card">
                    <div class="tool-name">üéØ ATLAS - Interactive Analytics Platform</div>
                    <div class="tool-description">
                        ATLAS is the flagship web-based tool for cohort definition, characterization, and population-level 
                        effect estimation. It provides an intuitive graphical interface for researchers without SQL expertise.
                    </div>
                    <div class="tool-features">
                        <span class="feature-tag">Cohort Builder</span>
                        <span class="feature-tag">Characterization</span>
                        <span class="feature-tag">Incidence Rates</span>
                        <span class="feature-tag">Pathway Analysis</span>
                    </div>
                </div>

                <div class="tool-card">
                    <div class="tool-name">üìä ACHILLES - Automated Characterization</div>
                    <div class="tool-description">
                        Generates comprehensive descriptive statistics about your OMOP CDM database, creating thousands of analyses 
                        for data profiling and quality assessment.
                    </div>
                    <div class="tool-features">
                        <span class="feature-tag">Data Profiling</span>
                        <span class="feature-tag">Summary Statistics</span>
                        <span class="feature-tag">Visualization</span>
                    </div>
                </div>

                <div class="tool-card">
                    <div class="tool-name">üì¶ HADES - Health Analytics Data-to-Evidence Suite</div>
                    <div class="tool-description">
                        Comprehensive collection of R packages designed for large-scale analytics using observational health data.
                    </div>
                    <div class="tool-features">
                        <span class="feature-tag">DatabaseConnector</span>
                        <span class="feature-tag">SqlRender</span>
                        <span class="feature-tag">FeatureExtraction</span>
                    </div>
                </div>

                <div class="tool-card">
                    <div class="tool-name">ü§ñ PatientLevelPrediction (PLP)</div>
                    <div class="tool-description">
                        R package for developing and validating patient-level prediction models with multiple machine learning algorithms.
                    </div>
                    <div class="tool-features">
                        <span class="feature-tag">ML Algorithms</span>
                        <span class="feature-tag">Cross-validation</span>
                        <span class="feature-tag">External Validation</span>
                    </div>
                </div>

                <div class="tool-card">
                    <div class="tool-name">‚öñÔ∏è CohortMethod - Causal Inference</div>
                    <div class="tool-description">
                        Implements advanced methods for population-level causal effect estimation, including propensity score matching.
                    </div>
                    <div class="tool-features">
                        <span class="feature-tag">Propensity Scores</span>
                        <span class="feature-tag">Matching</span>
                        <span class="feature-tag">Effect Estimation</span>
                    </div>
                </div>

                <div class="key-points">
                    <div class="key-points-title">Best Practices for OHDSI Tools</div>
                    <div class="key-point-item">Start with ACHILLES to understand your data before analysis</div>
                    <div class="key-point-item">Use ATLAS for reproducible cohort definitions across studies</div>
                    <div class="key-point-item">Leverage HADES packages for programmatic, scalable analyses</div>
                    <div class="key-point-item">Always validate cohorts with manual chart review samples</div>
                </div>
            </div>
        </div>

        <!-- Section 4: Example Analysis Details -->
        <div class="detailed-section">
            <div class="section-header">
                <span class="section-icon">üìà</span>
                <span>4. Complete Analysis Example: Type 2 Diabetes Study</span>
            </div>
            
            <div class="detailed-content">
                <p class="description-text">
                    This section demonstrates a complete end-to-end analysis workflow using OMOP CDM data. We'll walk through 
                    a comparative effectiveness study examining treatment outcomes for Type 2 Diabetes patients.
                </p>

                <div class="subsection-title">Study Design Overview</div>

                <div class="workflow-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">Define Target and Comparator Cohorts</div>
                        <div class="step-description">
                            Identify patients with Type 2 Diabetes who initiated either Metformin (target) or Sulfonylurea 
                            (comparator) as first-line therapy.
                        </div>
                    </div>
                </div>

                <div class="example-box">
                    <div class="example-title">SQL: Target Cohort (Metformin Initiators)</div>
                    <div class="code-block">-- Define Metformin initiator cohort
SELECT 
    fm.person_id,
    fm.index_date AS cohort_start_date
FROM first_metformin fm
JOIN diabetes_patients dp ON fm.person_id = dp.person_id
WHERE YEAR(fm.index_date) - p.year_of_birth BETWEEN 18 AND 75;</div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">Characterize Baseline Covariates</div>
                        <div class="step-description">
                            Extract baseline characteristics including demographics, comorbidities, prior medications, 
                            and healthcare utilization in the 365 days prior to index date.
                        </div>
                    </div>
                </div>

                <table class="detail-table">
                    <thead>
                        <tr>
                            <th>Baseline Characteristic</th>
                            <th>Metformin (N=12,547)</th>
                            <th>Sulfonylurea (N=8,932)</th>
                            <th>Std Diff</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Age, mean (SD)</td>
                            <td>56.3 (12.4)</td>
                            <td>58.7 (13.1)</td>
                            <td>0.19</td>
                        </tr>
                        <tr>
                            <td>Female, %</td>
                            <td>48.2%</td>
                            <td>51.3%</td>
                            <td>0.06</td>
                        </tr>
                        <tr>
                            <td>Hypertension, %</td>
                            <td>64.5%</td>
                            <td>68.9%</td>
                            <td>0.09</td>
                        </tr>
                    </tbody>
                </table>

                <div class="workflow-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">Calculate and Apply Propensity Scores</div>
                        <div class="step-description">
                            Build a logistic regression model predicting treatment assignment. Perform 1:1 matching using 
                            nearest neighbor with caliper width of 0.1.
                        </div>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <div class="step-title">Assess Outcomes</div>
                        <div class="step-description">
                            Primary outcome: Time to first major adverse cardiovascular event (MACE). Secondary outcomes: 
                            All-cause mortality, hospitalization, HbA1c control.
                        </div>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <div class="step-title">Statistical Analysis</div>
                        <div class="step-description">
                            Fit Cox proportional hazards model on matched population. Calculate hazard ratios with 95% confidence 
                            intervals. Create Kaplan-Meier survival curves.
                        </div>
                    </div>
                </div>

                <div class="key-points">
                    <div class="key-points-title">Key Study Findings</div>
                    <div class="key-point-item">Metformin associated with 32% lower risk of MACE vs. Sulfonylurea (HR: 0.68)</div>
                    <div class="key-point-item">Benefit consistent across age, gender, and baseline comorbidity subgroups</div>
                    <div class="key-point-item">Lower rate of severe hypoglycemia in Metformin group (2.1% vs 5.8%)</div>
                    <div class="key-point-item">Results robust to multiple sensitivity analyses</div>
                </div>

                <div class="subsection-title">Network Study Collaboration</div>
                
                <p class="description-text">
                    One of the most powerful features of OMOP CDM is the ability to run distributed network studies. 
                    The same analysis package can be executed across multiple healthcare databases without sharing patient-level 
                    data, enabling large-scale evidence generation while maintaining privacy.
                </p>
            </div>
        </div>

        <!-- Final Summary -->
        <div class="section-divider"></div>
        
        <div class="detailed-content" style="margin-top: 40px;">
            <div class="subsection-title">Summary and Next Steps</div>
            
            <p class="description-text">
                The OMOP Common Data Model provides a powerful framework for standardized observational health research. 
                By following the structured ETL process, leveraging OHDSI tools, and applying rigorous analytical methods, 
                researchers can generate reliable, reproducible evidence from real-world healthcare data.
            </p>

            <div class="key-points">
                <div class="key-points-title">Key Takeaways</div>
                <div class="key-point-item">OMOP CDM enables standardized, reproducible research across diverse data sources</div>
                <div class="key-point-item">ETL is critical - invest time in quality mapping and documentation</div>
                <div class="key-point-item">OHDSI tools provide end-to-end support from data quality to analysis</div>
                <div class="key-point-item">Network studies amplify the power and generalizability of findings</div>
                <div class="key-point-item">Start small, validate thoroughly, and scale progressively</div>
            </div>

            <div class="example-box" style="margin-top: 30px;">
                <div class="example-title">Resources for Learning More</div>
                <div style="padding: 10px 0;">
                    <table class="detail-table">
                        <thead>
                            <tr>
                                <th>Resource</th>
                                <th>Description</th>
                                <th>URL</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>OHDSI Website</strong></td>
                                <td>Official community portal</td>
                                <td>ohdsi.org</td>
                            </tr>
                            <tr>
                                <td><strong>Book of OHDSI</strong></td>
                                <td>Comprehensive textbook</td>
                                <td>ohdsi.github.io/TheBookOfOhdsi</td>
                            </tr>
                            <tr>
                                <td><strong>OHDSI Forums</strong></td>
                                <td>Community Q&A and discussions</td>
                                <td>forums.ohdsi.org</td>
                            </tr>
                            <tr>
                                <td><strong>ATLAS Demo</strong></td>
                                <td>Try ATLAS with sample data</td>
                                <td>atlas-demo.ohdsi.org</td>
                            </tr>
                            <tr>
                                <td><strong>GitHub Repository</strong></td>
                                <td>All OHDSI tools source code</td>
                                <td>github.com/OHDSI</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="final-cta">
                <div style="font-size: 24px; font-weight: 700; margin-bottom: 15px;">
                    Ready to Start Your OMOP Journey?
                </div>
                <div style="font-size: 16px; line-height: 1.6;">
                    Join the global OHDSI community and contribute to advancing observational health research.<br/>
                    Transform your healthcare data into actionable evidence.
                </div>
            </div>
        </div>
</div>
    </div>
</body>
</html>