<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultrasound Imaging - Detailed</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Aptos, 'Segoe UI', sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        
        .page {
            width: 960px;
            margin: 0 auto 30px;
            padding: 40px 60px;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            page-break-after: always;
        }
        
        .title {
            font-size: 36px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 30px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 3px solid #1E64C8;
        }
        
        .main-content {
            display: flex;
            gap: 30px;
        }
        
        .content-grid {
            display: flex;
            flex-direction: column;
            gap: 13px;
            flex: 1;
        }
        
        .content-card {
            background: #f8fbff;
            border-left: 5px solid #1E64C8;
            border-radius: 8px;
            padding: 13px 20px;
            transition: all 0.3s;
        }
        
        .content-card:hover {
            background: #e8f2ff;
            transform: translateX(5px);
        }
        
        .card-label {
            font-size: 17px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 4px;
        }
        
        .card-desc {
            font-size: 15px;
            color: #333;
            line-height: 1.4;
        }
        
        .diagram-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Detail page styles */
        .detail-title {
            font-size: 32px;
            font-weight: 700;
            color: #1E64C8;
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 3px solid #1E64C8;
        }
        
        .detail-section {
            margin-bottom: 25px;
        }
        
        .section-subtitle {
            font-size: 20px;
            font-weight: 700;
            color: #2E7DD2;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }
        
        .section-subtitle::before {
            content: '';
            width: 5px;
            height: 20px;
            background: #2E7DD2;
            margin-right: 10px;
            border-radius: 2px;
        }
        
        .detail-text {
            font-size: 15px;
            color: #333;
            line-height: 1.7;
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .detail-list {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .detail-list li {
            font-size: 15px;
            color: #333;
            line-height: 1.6;
            margin-bottom: 8px;
        }
        
        .highlight-box {
            background: #fff9e6;
            border-left: 4px solid #FFA500;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .highlight-box-title {
            font-size: 16px;
            font-weight: 700;
            color: #FFA500;
            margin-bottom: 8px;
        }
        
        .formula-box {
            background: #f0f8ff;
            border: 2px solid #1E64C8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            text-align: center;
        }
        
        .formula {
            font-size: 18px;
            font-weight: 600;
            color: #1E64C8;
            font-family: 'Courier New', monospace;
        }
        
        .svg-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            .page {
                box-shadow: none;
                margin: 0;
                page-break-after: always;
            }
        }
    </style>
</head>
<body>
    <!-- Page 1: Overview -->
    <div class="page">
        <div class="title">Ultrasound Imaging</div>
        
        <div class="main-content">
            <div class="content-grid">
                <div class="content-card">
                    <div class="card-label">Piezoelectric transducers</div>
                    <div class="card-desc">Convert electrical to acoustic energy</div>
                </div>
                <div class="content-card">
                    <div class="card-label">Acoustic impedance</div>
                    <div class="card-desc">Tissue resistance to sound propagation</div>
                </div>
                <div class="content-card">
                    <div class="card-label">Reflection and refraction</div>
                    <div class="card-desc">Interface properties determine echoes</div>
                </div>
                <div class="content-card">
                    <div class="card-label">Beamforming</div>
                    <div class="card-desc">Focusing and steering ultrasound beam</div>
                </div>
                <div class="content-card">
                    <div class="card-label">Harmonic imaging</div>
                    <div class="card-desc">Higher frequencies improve resolution</div>
                </div>
            </div>
            
            <div class="diagram-container">
                <svg width="420" height="400" viewBox="0 0 420 400">
                    <!-- Transducer -->
                    <rect x="160" y="20" width="100" height="25" fill="#4A90E2" stroke="#1E64C8" stroke-width="2" rx="3"/>
                    <text x="210" y="37" text-anchor="middle" font-size="12" fill="white" font-weight="700">Transducer</text>
                    <text x="210" y="62" text-anchor="middle" font-size="10" fill="#1E64C8" font-weight="600">(Piezoelectric)</text>
                    
                    <!-- Ultrasound beam -->
                    <path d="M 185 45 Q 185 100, 170 150" stroke="#4A90E2" stroke-width="2" fill="none"/>
                    <path d="M 210 45 Q 210 100, 210 150" stroke="#4A90E2" stroke-width="2.5" fill="none"/>
                    <path d="M 235 45 Q 235 100, 250 150" stroke="#4A90E2" stroke-width="2" fill="none"/>
                    
                    <!-- Beam focus area -->
                    <ellipse cx="210" cy="150" rx="50" ry="15" fill="#4A90E2" opacity="0.2" stroke="#1E64C8" stroke-width="1" stroke-dasharray="3,3"/>
                    <text x="280" y="155" font-size="10" fill="#1E64C8" font-weight="600">Focus zone</text>
                    
                    <!-- Tissue layers -->
                    <!-- Layer 1: Skin/Fat -->
                    <rect x="100" y="180" width="220" height="30" fill="#FFE5CC" stroke="#CC8866" stroke-width="1.5"/>
                    <text x="330" y="198" font-size="10" fill="#CC8866" font-weight="600">Skin/Fat (Z₁)</text>
                    
                    <!-- Layer 2: Muscle -->
                    <rect x="100" y="210" width="220" height="40" fill="#FFCCCC" stroke="#CC6666" stroke-width="1.5"/>
                    <text x="330" y="233" font-size="10" fill="#CC6666" font-weight="600">Muscle (Z₂)</text>
                    
                    <!-- Layer 3: Organ -->
                    <rect x="100" y="250" width="220" height="50" fill="#E5CCFF" stroke="#9966CC" stroke-width="1.5"/>
                    <text x="330" y="278" font-size="10" fill="#9966CC" font-weight="600">Organ (Z₃)</text>
                    
                    <!-- Interface reflections -->
                    <!-- Interface 1 -->
                    <line x1="210" y1="150" x2="210" y2="180" stroke="#4A90E2" stroke-width="2.5"/>
                    <circle cx="210" cy="180" r="4" fill="#FF6B6B"/>
                    <line x1="210" y1="180" x2="210" y2="90" stroke="#FF6B6B" stroke-width="2" opacity="0.7"/>
                    <text x="225" y="135" font-size="9" fill="#FF6B6B" font-weight="600">Echo 1</text>
                    
                    <!-- Interface 2 -->
                    <line x1="210" y1="180" x2="210" y2="210" stroke="#4A90E2" stroke-width="2.5"/>
                    <circle cx="210" cy="210" r="4" fill="#FF8C42"/>
                    <line x1="210" y1="210" x2="210" y2="90" stroke="#FF8C42" stroke-width="2" opacity="0.5"/>
                    <text x="225" y="150" font-size="9" fill="#FF8C42" font-weight="600">Echo 2</text>
                    
                    <!-- Interface 3 -->
                    <line x1="210" y1="210" x2="210" y2="250" stroke="#4A90E2" stroke-width="2.5"/>
                    <circle cx="210" cy="250" r="4" fill="#FFA07A"/>
                    <line x1="210" y1="250" x2="210" y2="90" stroke="#FFA07A" stroke-width="2" opacity="0.3"/>
                    <text x="225" y="170" font-size="9" fill="#FFA07A" font-weight="600">Echo 3</text>
                    
                    <!-- Transmitted wave continues -->
                    <line x1="210" y1="250" x2="210" y2="300" stroke="#4A90E2" stroke-width="2" opacity="0.4" stroke-dasharray="4,4"/>
                    
                    <!-- Acoustic Impedance formula box -->
                    <rect x="20" y="315" width="180" height="70" fill="#f0f8ff" stroke="#1E64C8" stroke-width="2" rx="5"/>
                    <text x="110" y="335" text-anchor="middle" font-size="11" fill="#1E64C8" font-weight="700">Acoustic Impedance</text>
                    <text x="110" y="355" text-anchor="middle" font-size="10" fill="#333">Z = ρ × c</text>
                    <text x="110" y="372" text-anchor="middle" font-size="9" fill="#666">ρ = density, c = sound speed</text>
                    
                    <!-- Reflection coefficient box -->
                    <rect x="220" y="315" width="180" height="70" fill="#fff8f0" stroke="#FFA500" stroke-width="2" rx="5"/>
                    <text x="310" y="335" text-anchor="middle" font-size="11" fill="#FFA500" font-weight="700">Reflection Coefficient</text>
                    <text x="310" y="355" text-anchor="middle" font-size="10" fill="#333">R = (Z₂ - Z₁)² / (Z₂ + Z₁)²</text>
                    <text x="310" y="372" text-anchor="middle" font-size="9" fill="#666">Larger ΔZ → Stronger echo</text>
                    
                    <!-- Wave representation -->
                    <path d="M 30 100 Q 35 95, 40 100 T 50 100 T 60 100 T 70 100" stroke="#4A90E2" stroke-width="2" fill="none"/>
                    <text x="75" y="105" font-size="9" fill="#4A90E2" font-weight="600">~MHz</text>
                </svg>
            </div>
        </div>
    </div>

    <!-- Page 2: Piezoelectric Transducers -->
    <div class="page">
        <div class="detail-title">1. Piezoelectric Transducers</div>
        
        <div class="detail-section">
            <div class="section-subtitle">Principle of Operation</div>
            <p class="detail-text">
                Piezoelectric transducers are the heart of ultrasound imaging systems. They exploit the piezoelectric effect, where certain crystalline materials generate an electric charge when mechanically stressed, and conversely, deform when an electric field is applied. This bidirectional conversion enables both the transmission and reception of ultrasound waves.
            </p>
        </div>
        
        <div class="detail-section">
            <div class="section-subtitle">Key Components</div>
            <ul class="detail-list">
                <li><strong>Piezoelectric element:</strong> Typically made from lead zirconate titanate (PZT) or polyvinylidene fluoride (PVDF), this crystal converts electrical energy to mechanical vibrations (transmit mode) and mechanical vibrations to electrical signals (receive mode).</li>
                <li><strong>Matching layer:</strong> Reduces acoustic impedance mismatch between the transducer and tissue, maximizing energy transfer efficiency.</li>
                <li><strong>Backing material:</strong> Dampens vibrations to produce short pulses, improving axial resolution.</li>
                <li><strong>Electrodes:</strong> Apply voltage for transmission and collect charges during reception.</li>
            </ul>
        </div>
        
        <div class="svg-container">
            <svg width="800" height="300" viewBox="0 0 800 300">
                <!-- Left side: Transmit mode -->
                <text x="150" y="25" text-anchor="middle" font-size="18" fill="#1E64C8" font-weight="700">Transmit Mode</text>
                
                <!-- Voltage source -->
                <rect x="100" y="45" width="100" height="40" fill="#FFE5CC" stroke="#CC8866" stroke-width="2" rx="5"/>
                <text x="150" y="70" text-anchor="middle" font-size="14" fill="#333">Voltage Pulse</text>
                
                <!-- Arrow down -->
                <path d="M 150 85 L 150 115" stroke="#1E64C8" stroke-width="3" marker-end="url(#arrowblue)"/>
                
                <!-- Piezoelectric crystal (transmit) -->
                <rect x="100" y="120" width="100" height="50" fill="#4A90E2" stroke="#1E64C8" stroke-width="3" rx="3"/>
                <text x="150" y="142" text-anchor="middle" font-size="12" fill="white" font-weight="700">PZT Crystal</text>
                <text x="150" y="158" text-anchor="middle" font-size="11" fill="white">(Compressed)</text>
                
                <!-- Mechanical wave -->
                <path d="M 150 170 L 150 200" stroke="#1E64C8" stroke-width="3" marker-end="url(#arrowblue)"/>
                <text x="170" y="190" font-size="11" fill="#1E64C8" font-weight="600">Mechanical</text>
                <text x="170" y="205" font-size="11" fill="#1E64C8" font-weight="600">Vibration</text>
                
                <!-- Sound wave -->
                <path d="M 120 210 Q 125 205, 130 210 T 140 210 T 150 210 T 160 210 T 170 210 T 180 210" 
                      stroke="#FF6B6B" stroke-width="3" fill="none"/>
                <text x="150" y="235" text-anchor="middle" font-size="12" fill="#FF6B6B" font-weight="700">Ultrasound Wave</text>
                <text x="150" y="250" text-anchor="middle" font-size="10" fill="#666">(2-15 MHz)</text>
                
                <!-- Right side: Receive mode -->
                <text x="550" y="25" text-anchor="middle" font-size="18" fill="#1E64C8" font-weight="700">Receive Mode</text>
                
                <!-- Sound wave (incoming) -->
                <path d="M 520 50 Q 525 45, 530 50 T 540 50 T 550 50 T 560 50 T 570 50 T 580 50" 
                      stroke="#FF6B6B" stroke-width="3" fill="none"/>
                <text x="550" y="75" text-anchor="middle" font-size="12" fill="#FF6B6B" font-weight="700">Echo Returns</text>
                
                <!-- Arrow down -->
                <path d="M 550 85 L 550 115" stroke="#FF6B6B" stroke-width="3" marker-end="url(#arrowred)"/>
                
                <!-- Piezoelectric crystal (receive) -->
                <rect x="500" y="120" width="100" height="50" fill="#4A90E2" stroke="#1E64C8" stroke-width="3" rx="3"/>
                <text x="550" y="142" text-anchor="middle" font-size="12" fill="white" font-weight="700">PZT Crystal</text>
                <text x="550" y="158" text-anchor="middle" font-size="11" fill="white">(Deformed)</text>
                
                <!-- Electric signal -->
                <path d="M 550 170 L 550 200" stroke="#FFA500" stroke-width="3" marker-end="url(#arroworange)"/>
                <text x="570" y="190" font-size="11" fill="#FFA500" font-weight="600">Electric</text>
                <text x="570" y="205" font-size="11" fill="#FFA500" font-weight="600">Charge</text>
                
                <!-- Amplifier -->
                <rect x="500" y="210" width="100" height="40" fill="#FFE5CC" stroke="#CC8866" stroke-width="2" rx="5"/>
                <text x="550" y="235" text-anchor="middle" font-size="14" fill="#333">Signal Output</text>
                
                <!-- Arrows -->
                <defs>
                    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
                        <polygon points="0 0, 10 5, 0 10" fill="#1E64C8"/>
                    </marker>
                    <marker id="arrowred" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
                        <polygon points="0 0, 10 5, 0 10" fill="#FF6B6B"/>
                    </marker>
                    <marker id="arroworange" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
                        <polygon points="0 0, 10 5, 0 10" fill="#FFA500"/>
                    </marker>
                </defs>
                
                <!-- Center divider -->
                <line x1="350" y1="40" x2="350" y2="260" stroke="#CCC" stroke-width="2" stroke-dasharray="5,5"/>
            </svg>
        </div>
        
        <div class="highlight-box">
            <div class="highlight-box-title">Clinical Significance</div>
            <p class="detail-text" style="margin-bottom: 0;">
                The frequency of the transducer determines imaging depth and resolution. Higher frequencies (7-15 MHz) provide excellent resolution but limited penetration, ideal for superficial structures. Lower frequencies (2-5 MHz) penetrate deeper but sacrifice resolution, suitable for abdominal and cardiac imaging.
            </p>
        </div>
    </div>

    <!-- Page 3: Acoustic Impedance -->
    <div class="page">
        <div class="detail-title">2. Acoustic Impedance</div>
        
        <div class="detail-section">
            <div class="section-subtitle">Definition and Importance</div>
            <p class="detail-text">
                Acoustic impedance (Z) is a fundamental property that describes how much resistance a material offers to the propagation of sound waves. It is the product of the material's density (ρ) and the speed of sound through that material (c). This property is crucial in ultrasound imaging because differences in acoustic impedance between tissues determine the strength of reflected echoes.
            </p>
        </div>
        
        <div class="formula-box">
            <div class="formula">Z = ρ × c</div>
            <p style="font-size: 13px; color: #666; margin-top: 8px;">
                where ρ is density (kg/m³) and c is sound velocity (m/s)<br>
                Unit: Rayl (1 Rayl = 1 kg·m⁻²·s⁻¹)
            </p>
        </div>
        
        <div class="detail-section">
            <div class="section-subtitle">Acoustic Impedance Values</div>
            <p class="detail-text">Different tissues have characteristic impedance values:</p>
        </div>
        
        <div class="svg-container">
            <svg width="750" height="280" viewBox="0 0 750 280">
                <!-- Title -->
                <text x="375" y="25" text-anchor="middle" font-size="16" fill="#1E64C8" font-weight="700">
                    Acoustic Impedance Comparison
                </text>
                
                <!-- Bar chart -->
                <!-- Air -->
                <rect x="50" y="220" width="80" height="30" fill="#E8F4FF" stroke="#1E64C8" stroke-width="2"/>
                <text x="90" y="240" text-anchor="middle" font-size="12" fill="#333" font-weight="600">Air</text>
                <text x="90" y="265" text-anchor="middle" font-size="11" fill="#666">0.0004</text>
                
                <!-- Fat -->
                <rect x="160" y="150" width="80" height="100" fill="#FFE5CC" stroke="#CC8866" stroke-width="2"/>
                <text x="200" y="205" text-anchor="middle" font-size="12" fill="#333" font-weight="600">Fat</text>
                <text x="200" y="265" text-anchor="middle" font-size="11" fill="#666">1.38</text>
                
                <!-- Blood -->
                <rect x="270" y="120" width="80" height="130" fill="#FFD4D4" stroke="#CC6666" stroke-width="2"/>
                <text x="310" y="190" text-anchor="middle" font-size="12" fill="#333" font-weight="600">Blood</text>
                <text x="310" y="265" text-anchor="middle" font-size="11" fill="#666">1.61</text>
                
                <!-- Muscle -->
                <rect x="380" y="100" width="80" height="150" fill="#FFCCCC" stroke="#CC4444" stroke-width="2"/>
                <text x="420" y="180" text-anchor="middle" font-size="12" fill="#333" font-weight="600">Muscle</text>
                <text x="420" y="265" text-anchor="middle" font-size="11" fill="#666">1.70</text>
                
                <!-- Kidney -->
                <rect x="490" y="90" width="80" height="160" fill="#E5CCFF" stroke="#9966CC" stroke-width="2"/>
                <text x="530" y="175" text-anchor="middle" font-size="12" fill="#333" font-weight="600">Kidney</text>
                <text x="530" y="265" text-anchor="middle" font-size="11" fill="#666">1.62</text>
                
                <!-- Bone -->
                <rect x="600" y="50" width="80" height="200" fill="#D4D4D4" stroke="#666666" stroke-width="2"/>
                <text x="640" y="155" text-anchor="middle" font-size="12" fill="#333" font-weight="600">Bone</text>
                <text x="640" y="265" text-anchor="middle" font-size="11" fill="#666">7.80</text>
                
                <!-- Y-axis -->
                <line x1="30" y1="50" x2="30" y2="250" stroke="#333" stroke-width="2"/>
                <line x1="30" y1="250" x2="700" y2="250" stroke="#333" stroke-width="2"/>
                
                <!-- Y-axis label -->
                <text x="15" y="150" text-anchor="middle" font-size="12" fill="#333" font-weight="600" transform="rotate(-90, 15, 150)">
                    Acoustic Impedance (MRayl)
                </text>
                
                <!-- Grid lines -->
                <line x1="30" y1="150" x2="700" y2="150" stroke="#DDD" stroke-width="1" stroke-dasharray="3,3"/>
                <line x1="30" y1="100" x2="700" y2="100" stroke="#DDD" stroke-width="1" stroke-dasharray="3,3"/>
                
                <text x="20" y="253" text-anchor="end" font-size="10" fill="#666">0</text>
                <text x="20" y="153" text-anchor="end" font-size="10" fill="#666">4</text>
                <text x="20" y="53" text-anchor="end" font-size="10" fill="#666">8</text>
            </svg>
        </div>
        
        <div class="highlight-box">
            <div class="highlight-box-title">Clinical Impact</div>
            <p class="detail-text" style="margin-bottom: 0;">
                Large impedance mismatches create strong reflections. For example, the air-tissue interface reflects nearly 100% of ultrasound energy, which is why gel is essential to eliminate air gaps. The bone-soft tissue interface also creates strong reflections, causing acoustic shadowing behind bones.
            </p>
        </div>
    </div>

    <!-- Page 4: Reflection and Refraction -->
    <div class="page">
        <div class="detail-title">3. Reflection and Refraction</div>
        
        <div class="detail-section">
            <div class="section-subtitle">Reflection Coefficient</div>
            <p class="detail-text">
                When an ultrasound wave encounters an interface between two materials with different acoustic impedances, part of the wave is reflected back (echo) and part continues forward (transmitted). The reflection coefficient (R) quantifies the fraction of intensity reflected at the interface.
            </p>
        </div>
        
        <div class="formula-box">
            <div class="formula">R = [(Z₂ - Z₁) / (Z₂ + Z₁)]²</div>
            <p style="font-size: 13px; color: #666; margin-top: 8px;">
                Intensity Reflection Coefficient (0 ≤ R ≤ 1)<br>
                Larger impedance difference → Stronger reflection
            </p>
        </div>
        
        <div class="svg-container">
            <svg width="800" height="320" viewBox="0 0 800 320">
                <!-- Title -->
                <text x="400" y="25" text-anchor="middle" font-size="16" fill="#1E64C8" font-weight="700">
                    Reflection and Refraction at Tissue Interface
                </text>
                
                <!-- Medium 1 (top) -->
                <rect x="50" y="50" width="700" height="120" fill="#E8F4FF" stroke="#1E64C8" stroke-width="2"/>
                <text x="100" y="80" font-size="14" fill="#1E64C8" font-weight="700">Medium 1 (e.g., Fat)</text>
                <text x="100" y="100" font-size="12" fill="#666">Z₁ = 1.38 MRayl</text>
                <text x="100" y="118" font-size="12" fill="#666">c₁ = 1450 m/s</text>
                
                <!-- Interface line -->
                <line x1="50" y1="170" x2="750" y2="170" stroke="#FF6B6B" stroke-width="4"/>
                <text x="400" y="190" text-anchor="middle" font-size="13" fill="#FF6B6B" font-weight="700">
                    INTERFACE
                </text>
                
                <!-- Medium 2 (bottom) -->
                <rect x="50" y="170" width="700" height="120" fill="#FFE5E5" stroke="#CC6666" stroke-width="2"/>
                <text x="100" y="215" font-size="14" fill="#CC6666" font-weight="700">Medium 2 (e.g., Muscle)</text>
                <text x="100" y="235" font-size="12" fill="#666">Z₂ = 1.70 MRayl</text>
                <text x="100" y="253" font-size="12" fill="#666">c₂ = 1580 m/s</text>
                
                <!-- Incident wave -->
                <defs>
                    <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
                        <polygon points="0 0, 10 5, 0 10" fill="#4A90E2"/>
                    </marker>
                    <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
                        <polygon points="0 0, 10 5, 0 10" fill="#FFA500"/>
                    </marker>
                    <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
                        <polygon points="0 0, 10 5, 0 10" fill="#28A745"/>
                    </marker>
                </defs>
                
                <!-- Incident beam -->
                <path d="M 400 60 L 400 150" stroke="#4A90E2" stroke-width="4" marker-end="url(#arrow1)"/>
                <text x="420" y="105" font-size="13" fill="#4A90E2" font-weight="700">Incident</text>
                <text x="420" y="122" font-size="11" fill="#4A90E2">I₀ = 100%</text>
                
                <!-- Angle indicator for incident -->
                <path d="M 400 150 L 430 150 A 30 30 0 0 0 400 120" stroke="#333" stroke-width="1" fill="none"/>
                <text x="445" y="140" font-size="11" fill="#333">θᵢ</text>
                
                <!-- Reflected beam -->
                <path d="M 400 170 L 320 90" stroke="#FFA500" stroke-width="4" marker-end="url(#arrow2)"/>
                <text x="300" y="125" font-size="13" fill="#FFA500" font-weight="700">Reflected</text>
                <text x="285" y="142" font-size="11" fill="#FFA500">I_r ≈ 1%</text>
                
                <!-- Angle indicator for reflected -->
                <path d="M 400 150 L 370 150 A 30 30 0 0 1 400 120" stroke="#333" stroke-width="1" fill="none"/>
                <text x="355" y="140" font-size="11" fill="#333">θᵣ = θᵢ</text>
                
                <!-- Transmitted/refracted beam -->
                <path d="M 400 170 L 420 280" stroke="#28A745" stroke-width="4" marker-end="url(#arrow3)"/>
                <text x="440" y="225" font-size="13" fill="#28A745" font-weight="700">Transmitted</text>
                <text x="440" y="242" font-size="11" fill="#28A745">(Refracted)</text>
                <text x="440" y="259" font-size="11" fill="#28A745">I_t ≈ 99%</text>
                
                <!-- Angle indicator for transmitted -->
                <path d="M 400 190 L 430 190 A 30 30 0 0 1 400 220" stroke="#333" stroke-width="1" fill="none"/>
                <text x="445" y="210" font-size="11" fill="#333">θₜ</text>
                
                <!-- Snell's Law box -->
                <rect x="550" y="60" width="180" height="70" fill="#FFF9E6" stroke="#FFA500" stroke-width="2" rx="5"/>
                <text x="640" y="80" text-anchor="middle" font-size="12" fill="#FFA500" font-weight="700">Snell's Law</text>
                <text x="640" y="100" text-anchor="middle" font-size="11" fill="#333">sin(θᵢ) / sin(θₜ) = c₁ / c₂</text>
                <text x="640" y="118" text-anchor="middle" font-size="10" fill="#666">Determines refraction angle</text>
            </svg>
        </div>
        
        <div class="detail-section">
            <div class="section-subtitle">Types of Reflection</div>
            <ul class="detail-list">
                <li><strong>Specular reflection:</strong> Occurs at large, smooth interfaces (e.g., diaphragm, vessel walls). Produces strong echoes when the beam is perpendicular to the interface.</li>
                <li><strong>Diffuse reflection (scattering):</strong> Occurs when the interface is rough or when structures are smaller than the wavelength. Creates the characteristic tissue texture in images.</li>
            </ul>
        </div>
        
        <div class="highlight-box">
            <div class="highlight-box-title">Practical Considerations</div>
            <p class="detail-text" style="margin-bottom: 0;">
                Refraction can cause image artifacts, particularly when imaging through curved surfaces or oblique angles. Speed of sound variations between tissues can lead to geometric distortion and misregistration of structures. Proper probe angulation and understanding of tissue interfaces help minimize these artifacts.
            </p>
        </div>
    </div>

    <!-- Page 5: Beamforming -->
    <div class="page">
        <div class="detail-title">4. Beamforming</div>
        
        <div class="detail-section">
            <div class="section-subtitle">Concept and Purpose</div>
            <p class="detail-text">
                Beamforming is the process of electronically focusing and steering the ultrasound beam to improve image quality and enable scanning without mechanical probe movement. Modern array transducers contain multiple piezoelectric elements (64-256 or more) that can be controlled independently to shape and direct the acoustic beam.
            </p>
        </div>
        
        <div class="svg-container">
            <svg width="800" height="350" viewBox="0 0 800 350">
                <!-- Title -->
                <text x="400" y="25" text-anchor="middle" font-size="16" fill="#1E64C8" font-weight="700">
                    Phased Array Beamforming
                </text>
                
                <!-- Array transducer elements -->
                <text x="400" y="55" text-anchor="middle" font-size="13" fill="#333" font-weight="600">
                    Multi-element Transducer Array
                </text>
                
                <!-- Individual elements -->
                <rect x="200" y="70" width="25" height="40" fill="#4A90E2" stroke="#1E64C8" stroke-width="2" rx="2"/>
                <rect x="230" y="70" width="25" height="40" fill="#4A90E2" stroke="#1E64C8" stroke-width="2" rx="2"/>
                <rect x="260" y="70" width="25" height="40" fill="#4A90E2" stroke="#1E64C8" stroke-width="2" rx="2"/>
                <rect x="290" y="70" width="25" height="40" fill="#6BA3E8" stroke="#1E64C8" stroke-width="2" rx="2"/>
                <rect x="320" y="70" width="25" height="40" fill="#6BA3E8" stroke="#1E64C8" stroke-width="2" rx="2"/>
                <rect x="350" y="70" width="25" height="40" fill="#8CB5ED" stroke="#1E64C8" stroke-width="2" rx="2"/>
                <rect x="380" y="70" width="25" height="40" fill="#8CB5ED" stroke="#1E64C8" stroke-width="2" rx="2"/>
                <rect x="410" y="70" width="25" height="40" fill="#6BA3E8" stroke="#1E64C8" stroke-width="2" rx="2"/>
                <rect x="440" y="70" width="25" height="40" fill="#6BA3E8" stroke="#1E64C8" stroke-width="2" rx="2"/>
                <rect x="470" y="70" width="25" height="40" fill="#4A90E2" stroke="#1E64C8" stroke-width="2" rx="2"/>
                <rect x="500" y="70" width="25" height="40" fill="#4A90E2" stroke="#1E64C8" stroke-width="2" rx="2"/>
                <rect x="530" y="70" width="25" height="40" fill="#4A90E2" stroke="#1E64C8" stroke-width="2" rx="2"/>
                
                <!-- Element numbers -->
                <text x="212" y="132" font-size="9" fill="#666">1</text>
                <text x="397" y="132" font-size="9" fill="#666">...6...</text>
                <text x="542" y="132" font-size="9" fill="#666">n</text>
                
                <!-- Delay timing diagram -->
                <text x="100" y="170" font-size="12" fill="#333" font-weight="600">Time Delays:</text>
                
                <!-- Delay indicators -->
                <line x1="212" y1="150" x2="212" y2="185" stroke="#FFA500" stroke-width="2"/>
                <circle cx="212" cy="185" r="4" fill="#FFA500"/>
                <text x="212" y="200" text-anchor="middle" font-size="9" fill="#666">Δt₁</text>
                
                <line x1="302" y1="150" x2="302" y2="175" stroke="#FFA500" stroke-width="2"/>
                <circle cx="302" cy="175" r="4" fill="#FFA500"/>
                <text x="302" y="190" text-anchor="middle" font-size="9" fill="#666">Δt₂</text>
                
                <line x1="392" y1="150" x2="392" y2="165" stroke="#FFA500" stroke-width="2"/>
                <circle cx="392" cy="165" r="4" fill="#FFA500"/>
                <text x="392" y="180" text-anchor="middle" font-size="9" fill="#666">Δt₃</text>
                
                <line x1="452" y1="150" x2="452" y2="175" stroke="#FFA500" stroke-width="2"/>
                <circle cx="452" cy="175" r="4" fill="#FFA500"/>
                
                <line x1="542" y1="150" x2="542" y2="185" stroke="#FFA500" stroke-width="2"/>
                <circle cx="542" cy="185" r="4" fill="#FFA500"/>
                <text x="542" y="200" text-anchor="middle" font-size="9" fill="#666">Δtₙ</text>
                
                <!-- Wavefronts -->
                <text x="150" y="235" font-size="13" fill="#1E64C8" font-weight="600">A. Focused Beam</text>
                <ellipse cx="380" cy="270" rx="120" ry="20" fill="none" stroke="#4A90E2" stroke-width="2"/>
                <ellipse cx="380" cy="295" rx="90" ry="15" fill="none" stroke="#4A90E2" stroke-width="2"/>
                <ellipse cx="380" cy="315" rx="60" ry="10" fill="none" stroke="#4A90E2" stroke-width="2"/>
                <circle cx="380" cy="325" r="8" fill="#FF6B6B" opacity="0.6"/>
                <text x="380" y="345" text-anchor="middle" font-size="11" fill="#FF6B6B" font-weight="600">Focal Point</text>
                
                <!-- Steered beam diagram -->
                <text x="550" y="235" font-size="13" fill="#1E64C8" font-weight="600">B. Steered Beam</text>
                <path d="M 550 260 L 650 320" stroke="#4A90E2" stroke-width="3" opacity="0.7"/>
                <path d="M 570 260 L 670 320" stroke="#4A90E2" stroke-width="3" opacity="0.7"/>
                <path d="M 590 260 L 690 320" stroke="#4A90E2" stroke-width="3" opacity="0.7"/>
                <text x="700" y="325" font-size="10" fill="#1E64C8">Scan direction</text>
                <path d="M 620 270 L 650 270 A 30 30 0 0 1 640 300" stroke="#333" stroke-width="1" fill="none"/>
                <text x="665" y="290" font-size="10" fill="#333">θ</text>
            </svg>
        </div>
        
        <div class="detail-section">
            <div class="section-subtitle">Beamforming Techniques</div>
            <ul class="detail-list">
                <li><strong>Transmit focusing:</strong> Elements fire with precise time delays to make waves converge at a desired focal depth, improving lateral resolution at that depth.</li>
                <li><strong>Dynamic receive focusing:</strong> Continuously adjusts receive delays as echoes return from different depths, maintaining optimal focus throughout the image.</li>
                <li><strong>Electronic steering:</strong> Sequential firing patterns direct the beam to different angles without moving the probe, enabling sector scanning.</li>
                <li><strong>Parallel beamforming:</strong> Modern systems can process multiple receive beams simultaneously, dramatically increasing frame rates.</li>
            </ul>
        </div>
        
        <div class="highlight-box">
            <div class="highlight-box-title">Advanced Applications</div>
            <p class="detail-text" style="margin-bottom: 0;">
                Adaptive beamforming algorithms can correct for phase aberrations caused by tissue inhomogeneities. Synthetic aperture techniques combine data from multiple transmit events to synthesize larger effective apertures. These advances enable improved penetration, resolution, and contrast in challenging imaging scenarios.
            </p>
        </div>
    </div>

    <!-- Page 6: Harmonic Imaging -->
    <div class="page">
        <div class="detail-title">5. Harmonic Imaging</div>
        
        <div class="detail-section">
            <div class="section-subtitle">Physical Basis</div>
            <p class="detail-text">
                Harmonic imaging exploits the nonlinear propagation of ultrasound through tissue. As ultrasound waves travel through tissue, the peaks of the waveform propagate slightly faster than the troughs due to pressure-dependent sound velocity. This nonlinear distortion generates harmonic frequencies—integer multiples of the transmitted fundamental frequency. By receiving only the second harmonic (2f₀), image quality can be significantly improved.
            </p>
        </div>
        
        <div class="svg-container">
            <svg width="800" height="320" viewBox="0 0 800 320">
                <!-- Title -->
                <text x="400" y="25" text-anchor="middle" font-size="16" fill="#1E64C8" font-weight="700">
                    Harmonic Generation and Detection
                </text>
                
                <!-- Transducer -->
                <rect x="350" y="45" width="100" height="30" fill="#4A90E2" stroke="#1E64C8" stroke-width="2" rx="3"/>
                <text x="400" y="65" text-anchor="middle" font-size="12" fill="white" font-weight="700">Transducer</text>
                
                <!-- Transmitted wave (fundamental) -->
                <text x="50" y="120" font-size="13" fill="#1E64C8" font-weight="700">Transmitted (Fundamental f₀)</text>
                <path d="M 50 140 Q 70 120, 90 140 T 130 140 T 170 140 T 210 140" 
                      stroke="#4A90E2" stroke-width="3" fill="none"/>
                <text x="220" y="145" font-size="11" fill="#666">Clean sine wave</text>
                <text x="50" y="165" font-size="10" fill="#666">e.g., 2.5 MHz</text>
                
                <!-- Arrow showing propagation -->
                <path d="M 400 75 L 400 195" stroke="#333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowgray)"/>
                <text x="420" y="135" font-size="11" fill="#666">Nonlinear</text>
                <text x="420" y="150" font-size="11" fill="#666">propagation</text>
                
                <!-- After propagation (distorted wave) -->
                <text x="50" y="220" font-size="13" fill="#9966CC" font-weight="700">After Tissue Propagation</text>
                <path d="M 50 240 Q 62 215, 74 240 Q 86 265, 98 240 Q 110 215, 122 240 Q 134 265, 146 240 Q 158 215, 170 240 Q 182 265, 194 240" 
                      stroke="#9966CC" stroke-width="3" fill="none"/>
                <text x="210" y="245" font-size="11" fill="#666">Distorted waveform</text>
                <text x="50" y="265" font-size="10" fill="#666">Contains f₀, 2f₀, 3f₀...</text>
                
                <!-- Frequency spectrum -->
                <text x="500" y="120" font-size="13" fill="#1E64C8" font-weight="700">Frequency Spectrum</text>
                
                <!-- Spectrum axes -->
                <line x1="480" y1="200" x2="720" y2="200" stroke="#333" stroke-width="2"/>
                <line x1="480" y1="140" x2="480" y2="200" stroke="#333" stroke-width="2"/>
                
                <!-- Fundamental peak -->
                <rect x="520" y="170" width="35" height="30" fill="#4A90E2" stroke="#1E64C8" stroke-width="2"/>
                <text x="537" y="215" text-anchor="middle" font-size="11" fill="#333">f₀</text>
                
                <!-- Second harmonic peak -->
                <rect x="595" y="155" width="35" height="45" fill="#FF6B6B" stroke="#CC4444" stroke-width="2"/>
                <text x="612" y="215" text-anchor="middle" font-size="11" fill="#333">2f₀</text>
                <text x="612" y="230" text-anchor="middle" font-size="10" fill="#FF6B6B" font-weight="600">↑ Use this</text>
                
                <!-- Third harmonic peak -->
                <rect x="670" y="180" width="35" height="20" fill="#CCC" stroke="#999" stroke-width="2"/>
                <text x="687" y="215" text-anchor="middle" font-size="11" fill="#333">3f₀</text>
                
                <!-- Labels -->
                <text x="475" y="150" text-anchor="end" font-size="10" fill="#666">Amplitude</text>
                <text x="720" y="215" font-size="10" fill="#666">Frequency</text>
                
                <!-- Arrows -->
                <defs>
                    <marker id="arrowgray" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
                        <polygon points="0 0, 10 5, 0 10" fill="#333"/>
                    </marker>
                </defs>
                
                <!-- Filter box -->
                <rect x="480" y="245" width="240" height="60" fill="#FFF9E6" stroke="#FFA500" stroke-width="2" rx="5"/>
                <text x="600" y="265" text-anchor="middle" font-size="12" fill="#FFA500" font-weight="700">Harmonic Filter</text>
                <text x="600" y="283" text-anchor="middle" font-size="11" fill="#333">Receive only 2f₀ component</text>
                <text x="600" y="298" text-anchor="middle" font-size="10" fill="#666">Rejects fundamental and other harmonics</text>
            </svg>
        </div>
        
        <div class="detail-section">
            <div class="section-subtitle">Advantages of Harmonic Imaging</div>
            <ul class="detail-list">
                <li><strong>Reduced clutter:</strong> Harmonics are generated primarily in tissue, not in superficial layers, reducing near-field artifacts and reverberation.</li>
                <li><strong>Improved contrast resolution:</strong> Better discrimination between different tissue types and improved border definition.</li>
                <li><strong>Enhanced lateral resolution:</strong> Narrower beam width at harmonic frequencies improves spatial resolution.</li>
                <li><strong>Reduced side lobe artifacts:</strong> Side lobes of the transmit beam contribute less to harmonic generation.</li>
            </ul>
        </div>
        
        <div class="highlight-box">
            <div class="highlight-box-title">Clinical Applications</div>
            <p class="detail-text" style="margin-bottom: 0;">
                Harmonic imaging has become standard in cardiac ultrasound for improved endocardial border definition. Tissue harmonic imaging (THI) is routinely used in abdominal scanning to reduce artifacts from body wall and improve visualization of deep structures. Contrast harmonic imaging exploits the strong nonlinear response of microbubble contrast agents for perfusion assessment and lesion characterization.
            </p>
        </div>
        
        <div class="formula-box">
            <div class="formula">Resolution Trade-off</div>
            <p style="font-size: 13px; color: #666; margin-top: 8px;">
                Axial resolution ≈ λ/2 = c/(2f)<br>
                Higher harmonic frequency (2f₀) → Better resolution<br>
                But: Higher frequency → Increased attenuation → Reduced penetration
            </p>
        </div>
    </div>

</body>
</html>